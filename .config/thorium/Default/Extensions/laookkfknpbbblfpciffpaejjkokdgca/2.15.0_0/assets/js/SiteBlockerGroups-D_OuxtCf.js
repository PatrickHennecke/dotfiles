import{a as t,z as e,r as s,b as o}from"./ResizeSensor-CXS_pGRc.js";import{A as i}from"./AppView-CyOtvy2t.js";import{A as r}from"./AppHeader-DGqF8Ifm.js";import{B as n}from"./BaseIcon-CACrCBea.js";import{B as a}from"./BaseItemList-DEa4hADS.js";import{u as p,a as c}from"./siteBlockerGroups-1V1XRNi6.js";import{T as l}from"./ToggleSwitch-PS_qhS7h.js";import{F as m}from"./FormEditableInlineInput-ByfGai0r.js";import{S as u}from"./siteBlockerViewState-BRcSSYc9.js";import{B as g}from"./BaseForm-C8SO80Dz.js";import{n as d}from"./promisifiedChrome-CheD9WtZ.js";import{A as h}from"./AppHeaderControl-BC-AHodD.js";import{A as j}from"./AppLoading-DeR9IIx3.js";import f from"./siteBlockerSession-DgFf8Wzp.js";import{F as b}from"./FavIcon-Cddzo7ot.js";import{g as v}from"./string-KTo4Qfpe.js";import{A as k}from"./AppEmpty-BrSPSkb0.js";import{s as w}from"./dashboard-CF_jRhAY.js";import"./environmentVariables-Cy83xda0.js";import"./icon-hide-NFfBhfBx.js";import"./arrow-B0GpGOd-.js";import"./icon-weather-reset-D7qA-OAP.js";import"./icon-settings-Bycjf8-G.js";import"./icon-chrome-BdhFuvxf.js";import"./icon-back-arrow-CiRQJ6G-.js";import"./icon-back-D_TFrgyJ.js";import"./icon-check-Vc9B11BJ.js";import"./icon-circle-D-D5U4qS.js";import"./icon-close-BUGl_M7j.js";import"./icon-cog-BFr_Pva7.js";import"./icon-skip-BOkC5L0N.js";import"./icon-trash-DFxJwJNo.js";import"./icon-down-BiHbKN-t.js";import"./icon-edit-CixeXNYx.js";import"./icon-ellipsis-D3jS4u3x.js";import"./icon-error-state-BKQhfBCj.js";import"./icon-heart-v5O7C6eS.js";import"./icon-key-BPNRipb3.js";import"./icon-lock-B0ekkj2F.js";import"./icon-next-B4hjdiAA.js";import"./icon-photo-BrwqV1T0.js";import"./icon-pin-BHeOuzvO.js";import"./icon-plus-D4YOesIc.js";import"./icon-profile-B_XWyuTb.js";import"./icon-x-qUCmf2CW.js";import"./icon-skip-intro-BUi8b3Ak.js";import"./icon-tooltip-CN09iXOB.js";import"./icon-visible-on-CM3kpcFN.js";import"./icon-x-caret-half-CZtcH_PM.js";import"./star-rating-CNohptmf.js";import"./pomodoro-circle-Dx_GWql1.js";import"./star-KworSO8x.js";import"./thanks-DfYnO-qW.js";import"./add-COIuonao.js";import"./google-DKPAcOmk.js";import"./arrow-up-1QPpu78M.js";import"./chevron-down-DdbU9YAr.js";import"./pomodoro-DvfTwCi0.js";import"./clocks-DjzskNOU.js";import"./close-D7GCNZxm.js";import"./search-DCqlmJx6.js";import"./folder-CwWTWsnJ.js";import"./switch-EuBTQVVE.js";import"./focus-mode-09pIyYAW.js";import"./storage-YYEO5TB5.js";import"./icon-confetti-Dz2LojDe.js";import"./wind-D3u4taeq.js";import"./sparks-CAw9b6ob.js";import"./secure-B8YP-AML.js";import"./icon-percent-schedule-CA5EI9b7.js";import"./icon-trello-BoqqWb7o.js";import"./icon-clean-rFsPxTtp.js";import"./icon-more-lists-Dg-hN7s6.js";import"./icon-more-fonts-CcfOY0t4.js";import"./icon-focus-stats-keERwXFt.js";import"./icon-easy-access-BZifTR0C.js";import"./icon-top-of-mind-B6EhbCcK.js";import"./icon-flow-5QqmGIWX.js";import"./icon-focused-JrsBbR-K.js";import"./icon-weather-extra-ufLpT_SX.js";import"./icon-spiral-gh4hwZDD.js";import"./icon-happy-place-D1z6CJgM.js";import"./icon-time-sensitive-CP2L3maw.js";import"./icon-hourly-CdMmiQZT.js";import"./icon-infinity-D4yMRoAd.js";import"./icon-integrations-Y-aXZTst.js";import"./icon-kanban-Dodqg7y-.js";import"./icon-personalize-photos-D2M4lLlt.js";import"./icon-personalize-n8qjJGGA.js";import"./icon-photo-match-C2EChNEK.js";import"./icon-random-375DbcwF.js";import"./icon-timezones-DGZoTtaT.js";import"./icon-simplify-BRUtLJYp.js";import"./icon-skip-Bd6EhalI.js";import"./icon-sync-DIH26Y9h.js";import"./constants-BpVlFj04.js";import"./allComponentsMounted-C3UsG_cA.js";import"./timestampDb-sTUCijT1.js";import"./Logger-Dqn8sDPg.js";import"./preload-helper-D7CfCCEq.js";import"./constants-D-OQQ8lR.js";import"./compareObjects-BF7sSNEf.js";import"./globalKeyEventManager-KbJZwtdf.js";import"./ViewState-CkTFc_ep.js";import"./FormMessage-DG-NAWke.js";import"./SmoothReflow-B3dWZqEj.js";import"./focusModeHelpers-Cqkll3ju.js";import"./reactiveCustomization-CrL2eTrh.js";import"./VueBase-CjPGMLuv.js";import"./index-CJJH83pl.js";import"./focusModeViewState-Sf_PQc_2.js";import"./main--IJuvtTE.js";import"./localStorage-B4mFdj8F.js";import"./migrateLegacyUserMessageHandler-CU6TUnqH.js";const S=t({name:"SiteBlockerGroupsListItem",components:{BaseForm:g,InlineInput:m,BaseIcon:n,ToggleSwitch:l},props:{group:{type:Object,required:!0},newGroup:{type:Boolean,default:!1}},setup:()=>({groupsStore:p(),viewStateStore:e("viewStateStore"),inlineInputRef:s(),formRef:s(),capture:e("capture")}),mounted(){var t;this.newGroup&&(null==(t=this.inlineInputRef)||t.focus())},methods:{toggleEnabled(){var t;if(this.group.enabled=!this.group.enabled,!this.newGroup)return null==(t=this.capture)||t.call(this,"site blocker toggle group",{defaultKey:this.group.defaultKey}),this.groupsStore.update(this.group.id,{enabled:this.group.enabled})},createNewGroup(){var t,e;return this.newGroup&&""!==this.group.name?(this.groupsStore.clearActiveItem(),null==(e=this.capture)||e.call(this,"site blocker create new group",{defaultKey:this.group.defaultKey}),this.groupsStore.create(this.group)):null==(t=this.formRef)?void 0:t.pulseField("name-input")},async goToGroupWebsitesIfNotNewGroup(){var t;this.newGroup||(this.groupsStore.editItem(this.group.id),await(null==(t=this.viewStateStore)?void 0:t.setActiveView(u.Websites)))}}});const I=d(t({name:"SiteBlockerGroupsList",components:{BaseIcon:n,SiteBlockerGroupsListItem:d(S,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("li",{staticClass:"site-blocker-groups-list-item app-list-item-lines-between",attrs:{"data-test":"groups-list-item"},on:{click:t.goToGroupWebsitesIfNotNewGroup}},[e("base-form",{ref:"formRef",staticClass:"list-item-form",attrs:{submit:t.createNewGroup,"submit-button":!1,"submit-on-blur":!0}},[e("div",{staticClass:"list-item-content",class:{editing:t.newGroup}},[e("inline-input",{ref:"inlineInputRef",staticClass:"group-websites-input",attrs:{name:"name-input",editing:t.newGroup,placeholder:"New group","data-test":"groups-list-item-input"},model:{value:t.group.name,callback:function(e){t.$set(t.group,"name",e)},expression:"group.name"}}),t.newGroup?t._e():e("span",{staticClass:"group-websites-count"},[t._v(t._s(t.group.totalWebsites))]),e("toggle-switch",{attrs:{value:t.group.enabled,"data-test":"groups-list-item-toggle"},on:{click:function(e){return e.stopPropagation(),t.toggleEnabled.apply(null,arguments)}}}),e("div",{staticClass:"icon-wrapper group-websites-view u--mobile-show-bg",class:{disabled:t.newGroup},attrs:{"data-test":"groups-list-item-websites"}},[e("base-icon",{staticClass:"icon",attrs:{src:"icon-next",size:"10px"}})],1)],1)])],1)}),[],!1,null,"229213e5").exports,BaseItemList:a},setup:()=>({groupsStore:p()}),computed:{editingExistingGroup(){return!!this.groupsStore.activeItem&&!!this.groupsStore.getGroupOrDefaultFromId(this.groupsStore.activeItem.id)}},methods:{createNewGroup(){this.groupsStore.newItem()}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"site-blocker-groups-list"},[e("div",{staticClass:"groups-header"},[e("span",{staticClass:"groups-header-title"},[t._v("Blocked groups")]),e("div",{staticClass:"icon-wrapper",attrs:{"data-test":"new-group"},on:{click:t.createNewGroup}},[e("base-icon",{staticClass:"icon",attrs:{src:"icon-plus",size:"12px"}})],1)]),e("base-item-list",[t.groupsStore.activeItem&&!t.editingExistingGroup?e("site-blocker-groups-list-item",{key:t.groupsStore.activeItem.id,attrs:{group:t.groupsStore.activeItem,"new-group":!0}}):t._e(),t._l(t.groupsStore.items,(function(t){return e("site-blocker-groups-list-item",{key:t.id,attrs:{group:t}})}))],2)],1)}),[],!1,null,"c9a82ea7").exports,y=t({name:"SiteBlockerGroupsBlockingBannerIcon",components:{FavIcon:b},props:{url:{type:String,required:!0}},setup:()=>({yDisplacement:"0rem",xDisplacement:"0rem",animationStart:"0s",animationSpeed:"10s"}),created(){this.yDisplacement=4*Math.random()-2+"rem",this.xDisplacement=2.25*Math.random()+1.5+"rem";const t=5*Math.random()+35;this.animationSpeed=t+"s",this.animationStart=-1*Math.random()*t+"s"}}),B=()=>{o(((t,e)=>({"99fb043a":t.xDisplacement,"201f1e6f":t.animationSpeed,"2020e28a":t.animationStart,bcf4f738:t.yDisplacement})))},x=y.setup;y.setup=x?(t,e)=>(B(),x(t,e)):B;const G=t({name:"SiteBlockerGroupsBlockingBanner",components:{SiteBlockerGroupsBlockingBannerIcon:d(y,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"site-blocker-groups-blocking-banner-icon"},[e("fav-icon",{staticClass:"favicon",attrs:{url:t.url}})],1)}),[],!1,null,"b6e1f749").exports,BaseIcon:n},setup:()=>({sessionStore:f(),iconRangeInterval:void 0}),data:()=>({visibleIconRangeMin:0,visibleIconRangeMax:0,iconsVisible:!1}),computed:{urls(){return""===this.sessionStore.urls?[]:this.sessionStore.urls.replaceAll("*","com").split(" ")}},watch:{urls(){this.setRandomIconRange()}},created(){this.setRandomIconRange(),this.iconRangeInterval=setInterval((()=>{this.visibleIconRangeMin=v(this.urls,this.visibleIconRangeMin,1),this.visibleIconRangeMax=v(this.urls,this.visibleIconRangeMax,1)}),5e3),setTimeout((()=>{this.iconsVisible=!0}),200)},destroyed(){clearInterval(this.iconRangeInterval)},methods:{setRandomIconRange(){const t=Math.floor(Math.random()*this.urls.length);this.visibleIconRangeMin=t,this.visibleIconRangeMax=v(this.urls,t,Math.min(this.urls.length-1,10))},isIconInRange(t){return this.visibleIconRangeMax<this.visibleIconRangeMin?t>=0&&t<=this.visibleIconRangeMax||t>=this.visibleIconRangeMin&&t<=this.urls.length-1:(t-this.visibleIconRangeMin)*(t-this.visibleIconRangeMax)<=0}}});const _=d(t({name:"SiteBlockerGroups",components:{AppEmpty:k,AppLoading:j,SiteBlockerGroupsBlockingBanner:d(G,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("transition-group",{staticClass:"site-blocker-groups-blocking-banner",attrs:{tag:"div",name:"slow-fade-icon"}},[e("div",{key:"blocking-browser",staticClass:"blocking-browser",attrs:{"data-test":"blocking-browser"}},[e("div",{staticClass:"blocking-nav"},[e("div",{staticClass:"nav-item"}),e("div",{staticClass:"nav-item"}),e("div",{staticClass:"nav-item"}),e("div",{staticClass:"nav-item nav-bar"})]),e("base-icon",{attrs:{src:"icon/denied",size:"2rem"}}),e("span",{staticClass:"blocking-message"},[t._v("Blocking distractions")])],1),t._l(t.urls,(function(s,o){return t.iconsVisible&&t.isIconInRange(o)?e("site-blocker-groups-blocking-banner-icon",{key:`${s}`,attrs:{url:s}}):t._e()}))],2)}),[],!1,null,"446f2e15").exports,AppHeaderControl:h,SiteBlockerGroupsList:I,BaseIcon:n,AppHeader:r,AppView:i},props:{onHeaderBack:{type:Function,default:null}},setup:()=>({groupsStore:p(),websitesStore:c(),sessionStore:f()}),data:()=>({pomodoroActiveInFocusMode:!1}),computed:{loaded(){return this.groupsStore.loaded&&this.websitesStore.loaded},hasActiveItem(){return!!this.groupsStore.activeItem},empty(){return 0===this.groupsStore.items.length},focusModeActive:()=>w.currentValue,blockingActive(){return this.sessionStore.active&&!this.empty}},created(){this.groupsStore.refresh(),this.websitesStore.refresh()},methods:{createNewGroup(){this.groupsStore.newItem()}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("app-view",{staticClass:"site-blocker-groups",scopedSlots:t._u([{key:"header",fn:function(){return[e("app-header",{scopedSlots:t._u([{key:"left",fn:function(){return[t.onHeaderBack?e("app-header-control",{on:{click:t.onHeaderBack}},[e("base-icon",{staticClass:"icon",attrs:{src:"icon/arrow-left"}})],1):t._e(),e("base-icon",{staticClass:"app-header-icon",attrs:{src:"icon/apps/site-blocker",size:"16px"}}),e("span",{staticClass:"app-header-name"},[t._v("Site Blocker")])]},proxy:!0}])})]},proxy:!0},{key:"body",fn:function(){return[e("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t.loaded?e("div",[t.empty&&!t.hasActiveItem?e("app-empty",{attrs:{description:"Add a group to get started","button-text":"Add Group","button-data-test":"new-group-empty"},on:{buttonClick:t.createNewGroup}}):[e("transition",{attrs:{name:"fade"}},[t.blockingActive?e("site-blocker-groups-blocking-banner"):t._e()],1),e("site-blocker-groups-list")]],2):e("app-loading",{attrs:{"data-test":"groups-loading"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)})}),[],!1,null,"ff4f0fda").exports;export{_ as default};