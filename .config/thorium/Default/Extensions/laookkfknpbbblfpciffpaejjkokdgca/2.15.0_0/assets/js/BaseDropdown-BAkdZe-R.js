import{r as t,n as e}from"./promisifiedChrome-CheD9WtZ.js";import{R as o,b as n}from"./ResizeSensor-CXS_pGRc.js";import{w as i}from"./VueBase-CjPGMLuv.js";import{_ as s}from"./icon-ellipsis-D3jS4u3x.js";import{u as a}from"./preload-helper-D7CfCCEq.js";var r=(t=>(t.Top="top",t.Right="right",t.Bottom="bottom",t.Left="left",t.OverlayTop="overlayTop",t.OverlayBottom="overlayBottom",t))(r||{});const l={top:"bottom",right:"left",bottom:"top",left:"right",overlayTop:"overlayBottom",overlayBottom:"overlayTop"};var d=(t=>(t.Left="left",t.Right="right",t.Center="center",t))(d||{});const p={right:"left",left:"right",center:"center"};var h=(t=>(t.Start="start",t.Between="between",t.End="end",t))(h||{});const c={name:"BaseDropdownContainer",directives:{ResizeSensor:o},provide(){return{closeDropdown:this.closeDropdown}},props:{target:{type:Element,default:void 0},scrollTarget:{type:Element,default:void 0},boundScrollX:{type:Boolean,default:!1},boundScrollY:{type:Boolean,default:!0},position:{type:String,default:r.Bottom},positionOffset:{type:Number,default:4},alignment:{type:String,default:d.Left},alignmentOffset:{type:Number,default:0},closeDropdown:{type:Function,required:!0},nipple:{type:Boolean,default:!0},nippleAlignmentOffset:{type:Number,default:8},minWidth:{type:String,default:"160px"},width:{type:String,default:""},maxWidth:{type:String,default:"100vw"},windowEdgePadding:{type:Number,default:8},disableCloseEvent:{type:Boolean,default:!1},disablePointerEvents:{type:Boolean,default:!1}},data(){return{x:0,y:0,height:"",nippleDisplacement:0,nipplePosition:this.position,nippleVisible:this.nipple,maxWindowWidth:"100vw"}},computed:{windowDimensions:()=>t.windowDimensions,nippleClass(){return`nipple nipple-${l[this.nipplePosition]}-left`}},watch:{windowDimensions:{async handler(){await this.$nextTick(),await this.$nextTick(),this.onResize()},deep:!0,immediate:!0}},mounted(){this.setupScrollTarget(this.scrollTarget),this.disableCloseEvent||this.$e.$on("dropdown:close",this.closeDropdown)},destroyed(){this.destroyScrollTarget(this.scrollTarget),this.disableCloseEvent||this.$e.$off("dropdown:close")},updated(){this.onResize()},methods:{onResize(){var t;if(!this.target||!this.$refs.dropdownContainer)return void this.closeDropdown();const e=this.target.getBoundingClientRect(),o=this.$refs.dropdownContainer.getBoundingClientRect(),n=null==(t=this.scrollTarget)?void 0:t.getBoundingClientRect(),[i,s,a,r]=this.getUpdatedCoordinatesPositionAlignment(e,o,n),l=this.getUpdatedNippleDisplacement(e,i,s,a);this.x=i,this.y=s,this.nippleDisplacement=l,this.nipplePosition=a,this.nippleVisible=r,this.maxWindowWidth=n?n.width+"px":"100vw"},calculateCoordinates(t,e,o,n){let i=0,s=0;const a=(this.nipple&&this.position!==r.OverlayTop&&this.position!==r.OverlayBottom?this.nippleAlignmentOffset:0)-this.alignmentOffset;if(o===r.Top?(i=t.x-a,s=t.y-e.height-(this.positionOffset+7)):o===r.Right?(i=t.x+t.width+(this.positionOffset+7),s=t.y-a):o===r.Bottom?(i=t.x-a,s=t.y+t.height+(this.positionOffset+7)):o===r.Left?(i=t.x-e.width-(this.positionOffset+7),s=t.y-a):o===r.OverlayTop?(i=t.x-a,s=t.y-this.positionOffset):o===r.OverlayBottom&&(i=t.x-a,s=t.y-e.height+t.height-this.positionOffset),n===d.Right)switch(o){case r.Top:case r.Bottom:case r.OverlayTop:case r.OverlayBottom:i-=e.width-t.width-2*a;break;case r.Right:case r.Left:s-=e.height-t.height-2*a}else if(n===d.Center)switch(o){case r.Top:case r.Bottom:case r.OverlayTop:case r.OverlayBottom:i-=e.width/2-t.width/2-a;break;case r.Right:case r.Left:s-=e.height/2-t.height/2-a}return[i,s]},getWindowMinMax(t){let e=this.windowEdgePadding,o=this.windowEdgePadding,n=this.windowDimensions.width-this.windowEdgePadding,i=this.windowDimensions.height-this.windowEdgePadding;return this.scrollTarget&&(this.boundScrollX||this.boundScrollY)&&(this.boundScrollX&&(e=t.left+this.windowEdgePadding,n=t.right-this.windowEdgePadding),this.boundScrollY&&(o=t.top+this.windowEdgePadding,i=t.bottom-this.windowEdgePadding)),[e,o,n,i]},getBoundedCoordinatesWithinWindowMinMax(t,e,o,n,i){let s=this.nipple;const[a,l,d,p]=this.getWindowMinMax(n),h=this.boundScrollX&&(i===r.Left||i===r.Right),c=this.boundScrollY&&(i===r.Top||i===r.Bottom);return t<a?(t=a,h&&(s=!1)):t+o.width>d&&(t=d-o.width,h&&(s=!1)),e<l?(e=l,c&&(s=!1)):e+o.height>p&&(e=p-o.height,c&&(s=!1)),[t,e,s]},getOppositePositionAndAlignment(t,e,o,n,i){let s=this.position,a=this.alignment;const[d,h,c,u]=this.getWindowMinMax(i);return(e<h||e+n>u)&&(this.position===r.Top||this.position===r.Bottom?s=l[this.position]:a=p[this.alignment]),(t<d||t+o>c)&&(this.position===r.Left||this.position===r.Right?s=l[this.position]:a=p[this.alignment]),[s,a]},getUpdatedCoordinatesPositionAlignment(t,e,o){const[n,i]=this.calculateCoordinates(t,e,this.position,this.alignment,!1),[s,a,r,l]=this.getWindowMinMax(o);if(n>s&&i>a&&n+e.width<r&&i+e.height<l)return[n,i,this.position,this.nipple];const[d,p]=this.getOppositePositionAndAlignment(n,i,e.width,e.height,o),[h,c]=this.calculateCoordinates(t,e,d,p,!0);if(h<s||c<a||h+e.width>r||c+e.height>l){const[t,s,a]=this.getBoundedCoordinatesWithinWindowMinMax(n,i,e,o,this.position);return[t,s,this.position,a]}const[u,g,m]=this.getBoundedCoordinatesWithinWindowMinMax(h,c,e,o,d);return[u,g,d,m]},getUpdatedNippleDisplacement(t,e,o,n){let i=0;const s=t.width/2-7,a=t.height/2-7;return n===r.Top||n===r.Bottom?i=t.left-e+s+this.alignmentOffset:n!==r.Right&&n!==r.Left||(i=t.top-o+a+this.alignmentOffset),i},setupScrollTarget(t){null==t||t.addEventListener("scroll",this.onResize)},destroyScrollTarget(t){null==t||t.removeEventListener("scroll",this.onResize)}}},u=()=>{n(((t,e)=>({"45af1bc2":t.x,"45af1bc0":t.y,"27ce8db8":t.nippleDisplacement,"64eb212b":t.windowEdgePadding,"0616ed2a":t.maxWindowWidth,"517773ed":t.width,"5c896f0d":t.minWidth,"732fe98a":t.maxWidth})))},g=c.setup;c.setup=g?(t,e)=>(u(),g(t,e)):u;const m=e(c,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"base-dropdown-transition-fade",appear:""}},[e("div",t._g({directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:t.onResize,expression:"onResize"}],ref:"dropdownContainer",staticClass:"base-dropdown-container reset-app-styles",class:{[t.nippleClass]:t.nippleVisible,"disable-pointer-events":t.disablePointerEvents},on:{mousedown:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()},wheel:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}}},t.$listeners),[t._t("default")],2)])}),[],!1,null,"47c2a035").exports;const f=e({name:"PortalToggle",props:{tag:{type:String,default:"div"},id:{type:String,required:!0},portalTargetName:{type:String,required:!0},disableClickOutside:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},hoverContent:{type:Boolean,default:!0},hoverHideContentDelay:{type:Number,default:200},mobileToggleHidden:{type:Boolean,default:!1}},emits:["toggle"],data:()=>({contentOpen:!1}),computed:{clickOutsideHandler(){return this.disableClickOutside?()=>{}:this.closeContent},mouseEnterHandler(){return this.hover?this.openContent:()=>{}},mouseLeaveHandler(){return this.hover?this.hoverContent?this.createMouseLeaveTimeout:this.closeContent:()=>{}},contentMouseLeaveHandler(){return this.hover?this.closeUnlessMouseInToggle:()=>{}},toggleActive(){return!this.$touch||!this.mobileToggleHidden}},destroyed(){this.closeContentInPortalTarget(),this.$emit("toggle",!1)},updated(){this.contentOpen?this.openContentInPortalTarget():this.closeContentInPortalTarget()},methods:{toggleContent(){this.disabled||(this.contentOpen=!this.contentOpen,this.$emit("toggle",this.contentOpen))},closeContent(){this.contentOpen=!1,this.$emit("toggle",!1)},openContent(){this.disabled||(this.clearToggleAndContentMouseLeaveTimeout(),this.contentOpen=!0,this.$emit("toggle",!0))},openContentInPortalTarget(){var t,e;this.$refs.toggle.children.length>1&&console.warn(`[PORTAL-TOGGLE: ${this.portalTargetName}] There is more than one toggle child! Only the first will be used.`);const o=null==(e=(t=this.$scopedSlots).content)?void 0:e.call(t,{close:this.closeContent,mouseLeave:this.contentMouseLeaveHandler,mouseEnter:this.clearToggleAndContentMouseLeaveTimeout,target:this.$refs.toggle.children[0]});if(o.length<=0)throw new Error(`[PORTAL-TOGGLE: ${this.portalTargetName}] Slot "content" does not exist!`);if(!i.hasTarget(this.portalTargetName))throw new Error(`[PORTAL-TOGGLE: ${this.portalTargetName}] Portal "${this.portalTargetName}" does not exist!`);i.open({to:this.portalTargetName,from:`${this.portalTargetName}-${this.id}`,passengers:o})},closeContentInPortalTarget(){i.close({to:this.portalTargetName,from:`${this.portalTargetName}-${this.id}`})},closeUnlessMouseInToggle(t){this.$refs.toggle.contains(t.relatedTarget)||this.createContentMouseLeaveTimeout()},createMouseLeaveTimeout(){this.mouseInContentTimeout=setTimeout(this.closeContent,this.hoverHideContentDelay)},createContentMouseLeaveTimeout(){this.mouseOutContentTimeout=setTimeout(this.closeContent,this.hoverHideContentDelay)},clearToggleAndContentMouseLeaveTimeout(){clearTimeout(this.mouseOutContentTimeout),clearTimeout(this.mouseInContentTimeout)}}},(function(){var t=this,e=t._self._c;return e(t.tag,{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.clickOutsideHandler,expression:"clickOutsideHandler"}],ref:"toggle",tag:"component",staticClass:"portal-toggle",class:[{open:t.contentOpen}],on:{click:function(e){return e.stopPropagation(),t.toggleContent.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterHandler.apply(null,arguments)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveHandler.apply(null,arguments)}}},[t.toggleActive?t._t("toggle",(function(){return[e("div",{staticClass:"icon-wrapper more-toggle"},[e("inline-svg",{staticClass:"icon icon-ellipsis",attrs:{src:s}})],1)]})):t._e()],2)}),[],!1,null,"a780cc77").exports;const w=e({name:"ToastMenuContainer",props:{dataOb:{type:String,default:""},sectionTitle:{type:String,default:""},closeToast:{type:Function,required:!0}},methods:{hasHeader(){return!!this.$slots.header}}},(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"toast-menu",duration:"200",appear:""}},[e("div",{staticClass:"toast-menu-container reset-app-styles",on:{mousedown:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()}}},[e("div",{staticClass:"toast-menu-overlay",on:{click:t.closeToast}}),e("div",{staticClass:"toast-menu-content",attrs:{"data-test":"toast"}},[t.hasHeader()?[e("div",{staticClass:"toast-header"},[t._t("header")],2),e("div",{staticClass:"line header-line"})]:t._e(),t.sectionTitle?e("div",{staticClass:"section-title"},[t._v(t._s(t.sectionTitle))]):t._e(),e("ul",{staticClass:"toast-list",attrs:{"data-test":"toast-options"}},[t._t("default")],2),e("div",{staticClass:"button button-close",on:{click:t.closeToast}},[e("span",{staticClass:"button-label"},[t._v("Close")])])],2)])])}),[],!1,null,"abe4c359").exports;const v=e({name:"BaseDropdownContent"},(function(){return(0,this._self._c)("div",{staticClass:"base-dropdown-content"},[this._t("default")],2)}),[],!1,null,"13836eed").exports;const C=e({name:"BaseDropdown",components:{BaseDropdownContent:v,ToastMenuContainer:w,BaseDropdownContainer:m,PortalToggle:f},props:{tag:f.props.tag,disabled:f.props.disabled,disableClickOutside:f.props.disableClickOutside,hover:f.props.hover,hoverContent:f.props.hoverContent,hoverHideContentDelay:f.props.hoverHideContentDelay,mobileToggleHidden:f.props.mobileToggleHidden,containerClass:{type:String,default:"app"},useToastMobile:{type:Boolean,default:!0},containerDataTest:{type:String,default:""},position:m.props.position,positionOffset:m.props.positionOffset,alignment:m.props.alignment,alignmentOffset:m.props.alignmentOffset,nipple:m.props.nipple,nippleAlignmentOffset:m.props.nippleAlignmentOffset,minWidth:m.props.minWidth,width:m.props.width,maxWidth:m.props.maxWidth,disableCloseEvent:m.props.disableCloseEvent,disablePointerEvents:m.props.disablePointerEvents,windowEdgePadding:m.props.windowEdgePadding,scrollTarget:m.props.scrollTarget,boundScrollX:m.props.boundScrollX,boundScrollY:m.props.boundScrollY},emits:["toggle"],setup:()=>({uuid:a()}),computed:{useDropdownContainer(){return!this.$touch||!this.useToastMobile}},methods:{closeDropdown(){this.$refs["portal-toggle"].closeContent()},openDropdown(){this.$refs["portal-toggle"].openContent()},forceUpdateDropdownPosition(){var t;null==(t=this.$refs["dropdown-container"])||t.onResize()}}},(function(){var t=this,e=t._self._c;return e("portal-toggle",{ref:"portal-toggle",staticClass:"base-dropdown",attrs:{id:t.uuid,"portal-target-name":t.useDropdownContainer?"dropdown-portal":"toast-menu-portal","disable-click-outside":t.disableClickOutside,disabled:t.disabled,hover:t.hover,"hover-content":t.hoverContent,"hover-hide-content-delay":t.hoverHideContentDelay,"mobile-toggle-hidden":t.mobileToggleHidden},on:{toggle:function(e){return t.$emit("toggle",e)}},scopedSlots:t._u([{key:"toggle",fn:function(){return[t._t("toggle")]},proxy:!0},{key:"content",fn:function({target:o,close:n,mouseLeave:i,mouseEnter:s}){return[t.useDropdownContainer?e("base-dropdown-container",t._b({key:t.uuid,ref:"dropdown-container",class:t.containerClass,attrs:{"close-dropdown":n,target:o},on:{mouseleave:i,mouseenter:s}},"base-dropdown-container",t.$props,!1),[t._t("contentOverride",(function(){return[e("base-dropdown-content",{attrs:{"data-test":t.containerDataTest||void 0}},[t._t("default")],2)]}))],2):e("toast-menu-container",{class:t.containerClass,attrs:{"close-toast":n},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("toastHeader")]},proxy:!0}],null,!0)},[t._t("contentOverride",(function(){return[t._t("default")]}))],2)]}}],null,!0)})}),[],!1,null,null).exports;export{C as B,h as D,v as a,r as b,d as c,m as d};