import{b as t}from"./bookmarkUtils-BELSVhnR.js";import{n as s,p as i,c as e,u as a,A as o}from"./promisifiedChrome-CheD9WtZ.js";import{a as n}from"./allComponentsMounted-C3UsG_cA.js";import{s as r}from"./showAnyway-CbfR58eh.js";import{p as l}from"./reactiveCustomization-CrL2eTrh.js";import"./timestampDb-sTUCijT1.js";import"./Logger-Dqn8sDPg.js";import"./environmentVariables-Cy83xda0.js";import"./ResizeSensor-CXS_pGRc.js";import"./preload-helper-D7CfCCEq.js";import"./string-KTo4Qfpe.js";import"./VueBase-CjPGMLuv.js";import"./dashboard-CF_jRhAY.js";import"./main--IJuvtTE.js";import"./localStorage-B4mFdj8F.js";import"./migrateLegacyUserMessageHandler-CU6TUnqH.js";import"./index-CJJH83pl.js";const p=new o({feature:"launchpad"});const c=s({name:"Launchpad",mixins:[n],setup:()=>({showAnyway:r}),data:()=>({topSites:[]}),created(){this.initTopSites()},methods:{openLinks(t,s){p.capture("launchpad link click");let e=m.models.bookmarksSettings.get("openInNewTab")||t.metaKey||"auxclick"===t.type;i.tabs.openUrl(s,e)},async initTopSites(){const s=e();if("topSites"in s&&s.topSites)t.requestFaviconPermissionIfNeeded("Launchpad");else{this.emitComponentMounted();let t={permissions:["topSites"]};a.isChrome()&&t.permissions.push("favicon");if(!(await new Promise((s=>{m.cmd("modal.open","PERMISSION_REQUEST",{resolve:s,permissions:t,widgetName:"Launchpad",permissionExplanation:"To display your top sites"})}))))return l.launchpadVisible=!1}const o=await i.topSites.get();o.forEach((s=>{s.hostname=new URL(s.url).hostname,s.imgSrc=t.favicon(s.url,32),(s.title.startsWith("https://")||s.title.startsWith("http://"))&&(s.title=""),s.title.includes("|")&&(s.title=s.title.split("|").at(-1).trim())})),this.topSites=o.slice(0,8),this.emitComponentMounted()},onAllComponentsMountedOverride(){}}},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"app-container launchpad",class:{"show-anyway":t.showAnyway.includes("launchpad")},attrs:{"data-test":"launchpad","data-show-anyway":"launchpad"}},[s("div",{staticClass:"top-sites"},t._l(t.topSites,(function(i){return s("div",{key:i.url,staticClass:"site",attrs:{"data-test":"launchpad-item"},on:{click:function(s){return t.openLinks(s,i.url)},auxclick:function(s){return t.openLinks(s,i.url)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i.imgSrc,draggable:"false"}})]),s("div",{staticClass:"title"},[t._v(t._s(i.title||i.hostname||" "))]),s("div",{staticClass:"tooltip"},[s("div",{staticClass:"tooltip-title"},[t._v(t._s(i.title||i.hostname||" "))]),s("div",{staticClass:"full-url"},[t._v(t._s(i.url))])])])})),0)])}),[],!1,null,"9d5d690b").exports;export{c as default};