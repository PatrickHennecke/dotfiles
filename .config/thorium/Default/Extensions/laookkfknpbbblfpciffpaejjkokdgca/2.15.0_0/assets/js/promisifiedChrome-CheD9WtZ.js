var e;import{S as t,t as n,M as r}from"./timestampDb-sTUCijT1.js";import{V as i,w as s,e as o,E as a,F as u,i as l,r as c}from"./ResizeSensor-CXS_pGRc.js";import{L as d,g as h,m as f}from"./Logger-Dqn8sDPg.js";import{u as p,p as g,h as v}from"./preload-helper-D7CfCCEq.js";import{s as _,b as y}from"./string-KTo4Qfpe.js";const b=p();class w extends d{constructor(...e){super(...e),this.tabId=b}}function k(e,t){return function(){return e.apply(t,arguments)}}const{toString:S}=Object.prototype,{getPrototypeOf:E}=Object,R=(e=>t=>{const n=S.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),P=e=>(e=e.toLowerCase(),t=>R(t)===e),F=e=>t=>typeof t===e,{isArray:T}=Array,O=F("undefined");const x=P("ArrayBuffer");const C=F("string"),I=F("function"),M=F("number"),A=e=>null!==e&&"object"==typeof e,D=e=>{if("object"!==R(e))return!1;const t=E(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},L=P("Date"),j=P("File"),N=P("Blob"),q=P("FileList"),B=P("URLSearchParams");function U(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),T(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(r=0;r<s;r++)o=i[r],t.call(null,e[o],o,e)}}function H(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,V=e=>!O(e)&&e!==W;const z=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&E(Uint8Array)),G=P("HTMLFormElement"),K=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),J=P("RegExp"),Y=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};U(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},Q="abcdefghijklmnopqrstuvwxyz",X="0123456789",Z={DIGIT:X,ALPHA:Q,ALPHA_DIGIT:Q+Q.toUpperCase()+X};const ee=P("AsyncFunction"),te={isArray:T,isArrayBuffer:x,isBuffer:function(e){return null!==e&&!O(e)&&null!==e.constructor&&!O(e.constructor)&&I(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||I(e.append)&&("formdata"===(t=R(e))||"object"===t&&I(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&x(e.buffer),t},isString:C,isNumber:M,isBoolean:e=>!0===e||!1===e,isObject:A,isPlainObject:D,isUndefined:O,isDate:L,isFile:j,isBlob:N,isRegExp:J,isFunction:I,isStream:e=>A(e)&&I(e.pipe),isURLSearchParams:B,isTypedArray:z,isFileList:q,forEach:U,merge:function e(){const{caseless:t}=V(this)&&this||{},n={},r=(r,i)=>{const s=t&&H(n,i)||i;D(n[s])&&D(r)?n[s]=e(n[s],r):D(r)?n[s]=e({},r):T(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&U(arguments[i],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(U(t,((t,r)=>{n&&I(t)?e[r]=k(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&E(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:R,kindOfTest:P,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(T(e))return e;let t=e.length;if(!M(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:G,hasOwnProperty:K,hasOwnProp:K,reduceDescriptors:Y,freezeMethods:e=>{Y(e,((t,n)=>{if(I(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];I(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return T(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:H,global:W,isContextDefined:V,ALPHABET:Z,generateString:(e=16,t=Z.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&I(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(A(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=T(e)?[]:{};return U(e,((e,t)=>{const s=n(e,r+1);!O(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ee,isThenable:e=>e&&(A(e)||I(e))&&I(e.then)&&I(e.catch)};function ne(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}te.inherits(ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const re=ne.prototype,ie={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ie[e]={value:e}})),Object.defineProperties(ne,ie),Object.defineProperty(re,"isAxiosError",{value:!0}),ne.from=(e,t,n,r,i,s)=>{const o=Object.create(re);return te.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ne.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};function se(e){return te.isPlainObject(e)||te.isArray(e)}function oe(e){return te.endsWith(e,"[]")?e.slice(0,-2):e}function ae(e,t,n){return e?e.concat(t).map((function(e,t){return e=oe(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const ue=te.toFlatObject(te,{},null,(function(e){return/^is[A-Z]/.test(e)}));function le(e,t,n){if(!te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!te.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&te.isSpecCompliantForm(t);if(!te.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(te.isDate(e))return e.toISOString();if(!a&&te.isBlob(e))throw new ne("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(e)||te.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if(te.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(te.isArray(e)&&function(e){return te.isArray(e)&&!e.some(se)}(e)||(te.isFileList(e)||te.endsWith(n,"[]"))&&(a=te.toArray(e)))return n=oe(n),a.forEach((function(e,r){!te.isUndefined(e)&&null!==e&&t.append(!0===o?ae([n],r,s):null===o?n:n+"[]",u(e))})),!1;return!!se(e)||(t.append(ae(i,n,s),u(e)),!1)}const c=[],d=Object.assign(ue,{defaultVisitor:l,convertValue:u,isVisitable:se});if(!te.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!te.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),te.forEach(n,(function(n,s){!0===(!(te.isUndefined(n)||null===n)&&i.call(t,n,te.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])})),c.pop()}}(e),t}function ce(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function de(e,t){this._pairs=[],e&&le(e,this,t)}const he=de.prototype;function fe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pe(e,t,n){if(!t)return e;const r=n&&n.encode||fe,i=n&&n.serialize;let s;if(s=i?i(t,n):te.isURLSearchParams(t)?t.toString():new de(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}he.append=function(e,t){this._pairs.push([e,t])},he.toString=function(e){const t=e?function(t){return e.call(this,t,ce)}:ce;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class ge{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){te.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},me={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:de,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},_e="undefined"!=typeof window&&"undefined"!=typeof document,ye=(be="undefined"!=typeof navigator&&navigator.product,_e&&["ReactNative","NativeScript","NS"].indexOf(be)<0);var be;const we="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ke={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_e,hasStandardBrowserEnv:ye,hasStandardBrowserWebWorkerEnv:we},Symbol.toStringTag,{value:"Module"})),...me};function Se(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&te.isArray(r)?r.length:s,a)return te.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&te.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&te.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(te.isFormData(e)&&te.isFunction(e.entries)){const n={};return te.forEachEntry(e,((e,r)=>{t(function(e){return te.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Ee={transitional:ve,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=te.isObject(e);i&&te.isHTMLForm(e)&&(e=new FormData(e));if(te.isFormData(e))return r?JSON.stringify(Se(e)):e;if(te.isArrayBuffer(e)||te.isBuffer(e)||te.isStream(e)||te.isFile(e)||te.isBlob(e))return e;if(te.isArrayBufferView(e))return e.buffer;if(te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return le(e,new ke.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ke.isNode&&te.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=te.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return le(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(te.isString(e))try{return(t||JSON.parse)(e),te.trim(e)}catch(ln){if("SyntaxError"!==ln.name)throw ln}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ee.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&te.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(ln){if(n){if("SyntaxError"===ln.name)throw ne.from(ln,ne.ERR_BAD_RESPONSE,this,null,this.response);throw ln}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ke.classes.FormData,Blob:ke.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],(e=>{Ee.headers[e]={}}));const Re=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Pe=Symbol("internals");function Fe(e){return e&&String(e).trim().toLowerCase()}function Te(e){return!1===e||null==e?e:te.isArray(e)?e.map(Te):String(e)}function Oe(e,t,n,r,i){return te.isFunction(r)?r.call(this,t,n):(i&&(t=n),te.isString(t)?te.isString(r)?-1!==t.indexOf(r):te.isRegExp(r)?r.test(t):void 0:void 0)}class xe{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Fe(t);if(!i)throw new Error("header name must be a non-empty string");const s=te.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Te(e))}const s=(e,t)=>te.forEach(e,((e,n)=>i(e,n,t)));return te.isPlainObject(e)||e instanceof this.constructor?s(e,t):te.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Re[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=Fe(e)){const n=te.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(te.isFunction(t))return t.call(this,e,n);if(te.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Fe(e)){const n=te.findKey(this,e);return!(!n||void 0===this[n]||t&&!Oe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Fe(e)){const i=te.findKey(n,e);!i||t&&!Oe(0,n[i],i,t)||(delete n[i],r=!0)}}return te.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Oe(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return te.forEach(this,((r,i)=>{const s=te.findKey(n,i);if(s)return t[s]=Te(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Te(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return te.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&te.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Pe]=this[Pe]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Fe(e);t[r]||(!function(e,t){const n=te.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return te.isArray(e)?e.forEach(r):r(e),this}}function Ce(e,t){const n=this||Ee,r=t||n,i=xe.from(r.headers);let s=r.data;return te.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function Ie(e){return!(!e||!e.__CANCEL__)}function Me(e,t,n){ne.call(this,null==e?"canceled":e,ne.ERR_CANCELED,t,n),this.name="CanceledError"}xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),te.reduceDescriptors(xe.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),te.freezeMethods(xe),te.inherits(Me,ne,{__CANCEL__:!0});const Ae=ke.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];te.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),te.isString(r)&&o.push("path="+r),te.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function De(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Le=ke.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=te.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return function(){return!0}}();function je(e,t){let n=0;const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const u=Date.now(),l=r[o];i||(i=u),n[s]=a,r[s]=u;let c=o,d=0;for(;c!==s;)d+=n[c++],c%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),u-i<t)return;const h=l&&u-l;return h?Math.round(1e3*d/h):void 0}}(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,u=r(a);n=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&s<=o?(o-s)/u:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const Ne={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=xe.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:u}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(te.isFormData(r))if(ke.hasStandardBrowserEnv||ke.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const d=De(e.baseURL,e.url);function h(){if(!c)return;const r=xe.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ne("Request failed with status code "+n.status,[ne.ERR_BAD_REQUEST,ne.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),pe(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new ne("Request aborted",ne.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new ne("Network Error",ne.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||ve;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ne(t,r.clarifyTimeoutError?ne.ETIMEDOUT:ne.ECONNABORTED,e,c)),c=null},ke.hasStandardBrowserEnv&&(u&&te.isFunction(u)&&(u=u(e)),u||!1!==u&&Le(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&Ae.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in c&&te.forEach(i.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),te.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",je(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",je(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{c&&(n(!t||t.type?new Me(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);f&&-1===ke.protocols.indexOf(f)?n(new ne("Unsupported protocol "+f+":",ne.ERR_BAD_REQUEST,e)):c.send(r||null)}))}};te.forEach(Ne,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(ln){}Object.defineProperty(e,"adapterName",{value:t})}}));const $e=e=>`- ${e}`,qe=e=>te.isFunction(e)||null===e||!1===e,Be=e=>{e=te.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!qe(n)&&(r=Ne[(t=String(n)).toLowerCase()],void 0===r))throw new ne(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new ne("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map($e).join("\n"):" "+$e(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Ue(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Me(null,e)}function He(e){Ue(e),e.headers=xe.from(e.headers),e.data=Ce.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Be(e.adapter||Ee.adapter)(e).then((function(t){return Ue(e),t.data=Ce.call(e,e.transformResponse,t),t.headers=xe.from(t.headers),t}),(function(t){return Ie(t)||(Ue(e),t&&t.response&&(t.response.data=Ce.call(e,e.transformResponse,t.response),t.response.headers=xe.from(t.response.headers))),Promise.reject(t)}))}const We=e=>e instanceof xe?{...e}:e;function Ve(e,t){t=t||{};const n={};function r(e,t,n){return te.isPlainObject(e)&&te.isPlainObject(t)?te.merge.call({caseless:n},e,t):te.isPlainObject(t)?te.merge({},t):te.isArray(t)?t.slice():t}function i(e,t,n){return te.isUndefined(t)?te.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!te.isUndefined(t))return r(void 0,t)}function o(e,t){return te.isUndefined(t)?te.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(We(e),We(t),!0)};return te.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=u[r]||i,o=s(e[r],t[r],r);te.isUndefined(o)&&s!==a||(n[r]=o)})),n}const ze="1.6.8",Ge={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ge[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ke={};Ge.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new ne(r(i," has been removed"+(t?" in "+t:"")),ne.ERR_DEPRECATED);return t&&!Ke[i]&&(Ke[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const Je={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ne("options must be an object",ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new ne("option "+s+" must be "+n,ne.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ne("Unknown option "+s,ne.ERR_BAD_OPTION)}},validators:Ge},Ye=Je.validators;class Qe{constructor(e){this.defaults=e,this.interceptors={request:new ge,response:new ge}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ve(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Je.assertOptions(n,{silentJSONParsing:Ye.transitional(Ye.boolean),forcedJSONParsing:Ye.transitional(Ye.boolean),clarifyTimeoutError:Ye.transitional(Ye.boolean)},!1),null!=r&&(te.isFunction(r)?t.paramsSerializer={serialize:r}:Je.assertOptions(r,{encode:Ye.function,serialize:Ye.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&te.merge(i.common,i[t.method]);i&&te.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=xe.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const u=[];let l;this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));let c,d=0;if(!a){const e=[He.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,u),c=e.length,l=Promise.resolve(t);d<c;)l=l.then(e[d++],e[d++]);return l}c=o.length;let h=t;for(d=0;d<c;){const e=o[d++],t=o[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{l=He.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,c=u.length;d<c;)l=l.then(u[d++],u[d++]);return l}getUri(e){return pe(De((e=Ve(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}te.forEach(["delete","get","head","options"],(function(e){Qe.prototype[e]=function(t,n){return this.request(Ve(n||{},{method:e,url:t,data:(n||{}).data}))}})),te.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ve(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Qe.prototype[e]=t(),Qe.prototype[e+"Form"]=t(!0)}));class Xe{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Me(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Xe((function(t){e=t})),cancel:e}}}const Ze={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ze).forEach((([e,t])=>{Ze[t]=e}));const et=function e(t){const n=new Qe(t),r=k(Qe.prototype.request,n);return te.extend(r,Qe.prototype,n,{allOwnKeys:!0}),te.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ve(t,n))},r}(Ee);et.Axios=Qe,et.CanceledError=Me,et.CancelToken=Xe,et.isCancel=Ie,et.VERSION=ze,et.toFormData=le,et.AxiosError=ne,et.Cancel=et.CanceledError,et.all=function(e){return Promise.all(e)},et.spread=function(e){return function(t){return e.apply(null,t)}},et.isAxiosError=function(e){return te.isObject(e)&&!0===e.isAxiosError},et.mergeConfig=Ve,et.AxiosHeaders=xe,et.formToJSON=e=>Se(te.isHTMLForm(e)?new FormData(e):e),et.getAdapter=Be,et.HttpStatusCode=Ze,et.default=et;const tt=new Proxy({},{set:(e,t,n)=>(i.set(e,t,n),m.models.customization.computeProperties(),!0),deleteProperty:(e,t)=>(t in e&&(i.delete(e,t),m.models.customization.computeProperties()),!0)});function nt(e={}){Object.entries(e).forEach((([e,t])=>{null===t?delete tt[e]:tt[e]=t}))}const rt=i.observable({experiments:[],visibilityOverride:tt,tabFocused:document.hasFocus(),tabVisible:"visible"===document.visibilityState,appsReady:!1,allowAwaitingAppsReadySmoothReflow:!1,dashboardOverlayActive:!1,windowDimensions:{height:window.innerHeight,width:window.innerWidth},onboardingRefreshing:!1});s((()=>rt.appsReady),(e=>{e?setTimeout((()=>{rt.allowAwaitingAppsReadySmoothReflow=!0}),500):rt.allowAwaitingAppsReadySmoothReflow=!1})),window.addEventListener("resize",(()=>{rt.windowDimensions.height=window.innerHeight,rt.windowDimensions.width=window.innerWidth})),window.addEventListener("focus",(()=>{rt.tabFocused=!0})),window.addEventListener("blur",(()=>{rt.tabFocused=!1})),window.addEventListener("visibilitychange",(()=>{rt.tabVisible="visible"===document.visibilityState}));class it{constructor(e){"string"==typeof e?this.message=e:(this.message=e.message,this.contact=!!e.contact,e.type&&(this.type=e.type),e.input&&(this.input=e.input))}}const st=et.create({timeout:1e5});st.interceptors.request.use((function(e){const t={"X-Momentum-Version":m.globals.version,"X-Momentum-ClientDate":Ba.getLocalDateTimeString(),"X-Momentum-TabId":b},n=localStorage.getItem("token"),r=localStorage.getItem("client_uuid"),i=localStorage.getItem("activeTags");if(n&&(t.Authorization="Bearer "+n),r&&(t["X-Momentum-ClientId"]=r),i&&(t["X-Momentum-Tags"]=i),m.conditionalFeatures.featureEnabled("allowoptions")){const e=localStorage.getItem("X-Momentum-Options");e&&(t["X-Momentum-Options"]=e)}return e.baseURL=m.globals.urlRootApi,e.headers.set(t),e}),(()=>Promise.reject()));const ot=(e,t)=>{var n,r;if(et.isAxiosError(e)){const{type:i,detail:s}=(null==(n=e.response)?void 0:n.data)??{},a=(null==(r=e.response)?void 0:r.status)??200,u=[429,504].includes(a)?null==t?void 0:t[429]:null==t?void 0:t[a];if(u)return new it({message:u});if(i&&s)return new it({type:i,message:s});if(!navigator.onLine)return new it({message:o.NETWORK_ERROR_WHILE_OFFLINE});if("ERR_NETWORK"===e.code)return new it({message:o.NETWORK_ERROR_WHILE_ONLINE})}return new it({message:(null==t?void 0:t.default)??o.SERVER_ERROR_GENERAL})};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t,n){return t&&dt(e.prototype,t),n&&dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(u){a=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||vt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){if(e){if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(e,t):void 0}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=vt(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}var yt={DEBUG:!1,LIB_VERSION:"1.128.1"},bt=Array.isArray,wt=Object.prototype,kt=wt.hasOwnProperty,St=wt.toString,Et=bt||function(e){return"[object Array]"===St.call(e)},Rt=function(e){return"function"==typeof e},Pt=function(e){return e===Object(e)&&!Et(e)},Ft=function(e){if(Pt(e)){for(var t in e)if(kt.call(e,t))return!1;return!0}return!1},Tt=function(e){return void 0===e},Ot=function(e){return"[object String]"==St.call(e)},xt=function(e){return null===e},Ct=function(e){return Tt(e)||xt(e)},It=function(e){return"[object Number]"==St.call(e)},Mt=function(e){return"[object Boolean]"===St.call(e)},At=function(e){return e instanceof FormData},Dt="undefined"!=typeof window?window:void 0,Lt="undefined"!=typeof globalThis?globalThis:Dt,jt=Array.prototype,Nt=jt.forEach,$t=jt.indexOf,qt=null==Lt?void 0:Lt.navigator,Bt=null==Lt?void 0:Lt.document,Ut=null==Lt?void 0:Lt.location,Ht=null==Lt?void 0:Lt.fetch,Wt=null!=Lt&&Lt.XMLHttpRequest&&"withCredentials"in new Lt.XMLHttpRequest?Lt.XMLHttpRequest:void 0,Vt=null==Lt?void 0:Lt.AbortController,zt=null==qt?void 0:qt.userAgent,Gt=null!=Dt?Dt:{},Kt="[PostHog.js]",Jt={_log:function(e){if(Dt&&(yt.DEBUG||Gt.POSTHOG_DEBUG)&&!Tt(Dt.console)&&Dt.console){for(var t=("__rrweb_original__"in Dt.console[e]?Dt.console[e].__rrweb_original__:Dt.console[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,[Kt].concat(r))}},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Jt._log.apply(Jt,["log"].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Jt._log.apply(Jt,["warn"].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Jt._log.apply(Jt,["error"].concat(t))},critical:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,[Kt].concat(n))},uninitializedWarning:function(e){Jt.error("You must initialize PostHog before calling ".concat(e))}},Yt={},Qt=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Xt(e,t,n){if(Et(e))if(Nt&&e.forEach===Nt)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===Yt)return}function Zt(e,t,n){if(!Ct(e)){if(Et(e))return Xt(e,t,n);if(At(e)){var r,i=_t(e.entries());try{for(i.s();!(r=i.n()).done;){var s=r.value;if(t.call(n,s[1],s[0])===Yt)return}}catch(a){i.e(a)}finally{i.f()}}else for(var o in e)if(kt.call(e,o)&&t.call(n,e[o],o)===Yt)return}}var en=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xt(n,(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e};function tn(e,t){return-1!==e.indexOf(t)}function nn(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var rn=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},sn=function(e){try{return e()}catch(t){return}},on=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(i){Jt.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Jt.critical(i)}}},an=function(e){var t={};return Zt(e,(function(e,n){Ot(e)&&e.length>0&&(t[n]=e)})),t};var un,ln,cn=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,n,r,i,s){if(t)if(t.addEventListener&&!i)t.addEventListener(n,r,!!s);else{var o="on"+n,a=t[o];t[o]=function(t,n,r){return function(i){if(i=i||e(null==Dt?void 0:Dt.event)){var s,o=!0;Rt(r)&&(s=r(i));var a=n.call(t,i);return!1!==s&&!1!==a||(o=!1),o}}}(t,r,a)}else Jt.error("No valid element provided to register_event")}}();function dn(e,t){var n=function(){if(!Bt)return t("document not found");var n=Bt.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(e){return t(void 0,e)},n.onerror=function(e){return t(e)};var r,i=Bt.querySelectorAll("body > script");i.length>0?null===(r=i[0].parentNode)||void 0===r||r.insertBefore(n,i[0]):Bt.body.appendChild(n)};null!=Bt&&Bt.body?n():null==Bt||Bt.addEventListener("DOMContentLoaded",n)}(ln=un||(un={})).GZipJS="gzip-js",ln.Base64="base64";var hn="$people_distinct_id",fn="__alias",pn="__timers",gn="$autocapture_disabled_server_side",vn="$session_recording_enabled_server_side",mn="$console_log_recording_enabled_server_side",_n="$session_recording_network_payload_capture",yn="$session_recording_canvas_recording",bn="$replay_sample_rate",wn="$replay_minimum_duration",kn="$sesid",Sn="$session_is_sampled",En="$enabled_feature_flags",Rn="$early_access_features",Pn="$stored_person_properties",Fn="$stored_group_properties",Tn="$surveys",On="$flag_call_reported",xn="$user_state",Cn="$client_session_props",In="$capture_rate_limit",Mn="$initial_campaign_params",An="$initial_referrer_info",Dn="$epp",Ln=[hn,fn,"__cmpns",pn,vn,kn,En,xn,Rn,Fn,Pn,Tn,On,Cn,In,Mn,An,Dn],jn="$active_feature_flags",Nn="$override_feature_flags",$n="$feature_flag_payloads",qn=function(e){var t,n={},r=_t(nn(e||{}));try{for(r.s();!(t=r.n()).done;){var i=pt(t.value,2),s=i[0],o=i[1];o&&(n[s]=o)}}catch(a){r.e(a)}finally{r.f()}return n},Bn=function(){function e(t){ct(this,e),this.instance=t,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return ht(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(En),t=this.instance.get_property(Nn);if(!t)return e||{};for(var n=en({},e),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this._override_warning||(Jt.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n}},{key:"getFlagPayloads",value:function(){return this.instance.get_property($n)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout((function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())}),5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var t=this.instance.config.token,n=this.instance.get_property(Pn),r=this.instance.get_property(Fn),i={token:t,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:r,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:i,compression:this.instance.config.disable_compression?void 0:un.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(t){var n;e.setReloadingPaused(!1);var r=!0;200===t.statusCode&&(e.$anon_distinct_id=void 0,r=!1),e.receivedFeatureFlags(null!==(n=t.json)&&void 0!==n?n:{},r),e._startReloadTimer()}})}}},{key:"getFeatureFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var n,r=this.getFlagVariants()[e],i="".concat(r),s=this.instance.get_property(On)||{};return!t.send_event&&"send_event"in t||e in s&&s[e].includes(i)||(Et(s[e])?s[e].push(i):s[e]=[i],null===(n=this.instance.persistence)||void 0===n||n.register(ft({},On,s)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}Jt.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);Jt.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((function(t){return t!==e}))}},{key:"receivedFeatureFlags",value:function(e,t){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads();!function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=e.featureFlags,o=e.featureFlagPayloads;if(s)if(Et(s)){var a,u={};if(s)for(var l=0;l<s.length;l++)u[s[l]]=!0;t&&t.register((ft(a={},jn,s),ft(a,En,u),a))}else{var c=s,d=o;e.errorsWhileComputingFlags&&(c=ut(ut({},r),c),d=ut(ut({},i),d)),t&&t.register((ft(n={},jn,Object.keys(qn(c))),ft(n,En,c||{}),ft(n,$n,d||{}),n))}}(e,this.instance.persistence,n,r),this._fireFeatureFlagsCallbacks(t)}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return Jt.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,!1===e)this.instance.persistence.unregister(Nn);else if(Et(e)){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;this.instance.persistence.register(ft({},Nn,t))}else this.instance.persistence.register(ft({},Nn,e))}},{key:"onFeatureFlags",value:function(e){var t=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var n=this._prepareFeatureFlagsForCallbacks(),r=n.flags,i=n.flagVariants;e(r,i)}return function(){return t.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){var n,r,i=ft({},"$feature_enrollment/".concat(e),t);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:t,$set:i}),this.setPersonPropertiesForFlags(i,!1);var s=ut(ut({},this.getFlagVariants()),{},ft({},e,t));null===(n=this.instance.persistence)||void 0===n||n.register((ft(r={},jn,Object.keys(qn(s))),ft(r,En,s),r)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.instance.get_property(Rn);if(r&&!n)return e(r);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:function(n){var r;if(n.json){var i=n.json.earlyAccessFeatures;return null===(r=t.instance.persistence)||void 0===r||r.register(ft({},Rn,i)),e(i)}}})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((function(e){return t[e]})),flagVariants:Object.keys(t).filter((function(e){return t[e]})).reduce((function(e,n){return e[n]=t[n],e}),{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(e){var t=this._prepareFeatureFlagsForCallbacks(),n=t.flags,r=t.flagVariants;this.featureFlagEventHandlers.forEach((function(t){return t(n,r,{errorsLoading:e})}))}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Pn)||{};this.instance.register(ft({},Pn,ut(ut({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(Pn)}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Fn)||{};0!==Object.keys(n).length&&Object.keys(n).forEach((function(t){n[t]=ut(ut({},n[t]),e[t]),delete e[t]})),this.instance.register(ft({},Fn,ut(ut({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var t=this.instance.get_property(Fn)||{};this.instance.register(ft({},Fn,ut(ut({},t),{},ft({},e,{}))))}else this.instance.unregister(Fn)}}]),e}();Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return It(e)&&isFinite(e)&&Math.floor(e)===e});var Un="0123456789abcdef",Hn=function(){function e(t){if(ct(this,e),this.bytes=t,16!==t.length)throw new TypeError("not 128-bit length")}return ht(e,[{key:"toString",value:function(){for(var e="",t=0;t<this.bytes.length;t++)e=e+Un.charAt(this.bytes[t]>>>4)+Un.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(e){return 0===this.compareTo(e)}},{key:"compareTo",value:function(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}],[{key:"fromFieldsV7",value:function(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=t/Math.pow(2,40),s[1]=t/Math.pow(2,32),s[2]=t/Math.pow(2,24),s[3]=t/Math.pow(2,16),s[4]=t/Math.pow(2,8),s[5]=t,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new e(s)}}]),e}(),Wn=function(){function e(){ct(this,e),ft(this,"timestamp",0),ft(this,"counter",0),ft(this,"random",new Gn)}return ht(e,[{key:"generate",value:function(){var e=this.generateOrAbort();if(Tt(e)){this.timestamp=0;var t=this.generateOrAbort();if(Tt(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return Hn.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e}(),Vn=function(e){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};Dt&&!Tt(Dt.crypto)&&crypto.getRandomValues&&(Vn=function(e){return crypto.getRandomValues(e)});var zn,Gn=function(){function e(){ct(this,e),ft(this,"buffer",new Uint32Array(8)),ft(this,"cursor",1/0)}return ht(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(Vn(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e}(),Kn=function(){return Jn().toString()},Jn=function(){return(zn||(zn=new Wn)).generate()},Yn="",Qn=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var Xn,Zn={is_supported:function(){return!!Bt},error:function(e){Jt.error("cookieStore error: "+e)},get:function(e){if(Bt){try{for(var t=e+"=",n=Bt.cookie.split(";").filter((function(e){return e.length})),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(s){}return null}},parse:function(e){var t;try{t=JSON.parse(Zn.get(e))||{}}catch(n){}return t},set:function(e,t,n,r,i){if(Bt)try{var s="",o="",a=function(e,t){if(t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt;if(Yn)return Yn;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),r=Math.min(n.length,8),i="dmn_chk_"+Kn(),s=new RegExp("(^|;)\\s*"+i+"=1");!Yn&&r--;){var o=n.slice(r).join("."),a=i+"=1;domain=."+o;t.cookie=a,s.test(t.cookie)&&(t.cookie=a+";expires=Thu, 01 Jan 1970 00:00:00 GMT",Yn=o)}return Yn}(e);if(!n){var r=(i=e.match(Qn))?i[0]:"";r!==n&&Jt.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}var i;return""}(Bt.location.hostname,r);if(n){var u=new Date;u.setTime(u.getTime()+24*n*60*60*1e3),s="; expires="+u.toUTCString()}i&&(o="; secure");var l=e+"="+encodeURIComponent(JSON.stringify(t))+s+"; SameSite=Lax; path=/"+a+o;return l.length>3686.4&&Jt.warn("cookieStore warning: large cookie, len="+l.length),Bt.cookie=l,l}catch(c){return}},remove:function(e,t){try{Zn.set(e,"",-1,t)}catch(n){return}}},er=null,tr={is_supported:function(){if(!xt(er))return er;var e=!0;if(Tt(Dt))e=!1;else try{var t="__mplssupport__";tr.set(t,"xyz"),'"xyz"'!==tr.get(t)&&(e=!1),tr.remove(t)}catch(n){e=!1}return e||Jt.error("localStorage unsupported; falling back to cookie store"),er=e,e},error:function(e){Jt.error("localStorage error: "+e)},get:function(e){try{return null==Dt?void 0:Dt.localStorage.getItem(e)}catch(t){tr.error(t)}return null},parse:function(e){try{return JSON.parse(tr.get(e))||{}}catch(t){}return null},set:function(e,t){try{null==Dt||Dt.localStorage.setItem(e,JSON.stringify(t))}catch(n){tr.error(n)}},remove:function(e){try{null==Dt||Dt.localStorage.removeItem(e)}catch(t){tr.error(t)}}},nr=["distinct_id",kn,Sn,Dn],rr=ut(ut({},tr),{},{parse:function(e){try{var t={};try{t=Zn.parse(e)||{}}catch(r){}var n=en(t,JSON.parse(tr.get(e)||"{}"));return tr.set(e,n),n}catch(r){}return null},set:function(e,t,n,r,i){try{tr.set(e,t);var s={};nr.forEach((function(e){t[e]&&(s[e]=t[e])})),Object.keys(s).length&&Zn.set(e,s,n,r,i)}catch(o){tr.error(o)}},remove:function(e,t){try{null==Dt||Dt.localStorage.removeItem(e),Zn.remove(e,t)}catch(n){tr.error(n)}}}),ir={},sr={is_supported:function(){return!0},error:function(e){Jt.error("memoryStorage error: "+e)},get:function(e){return ir[e]||null},parse:function(e){return ir[e]||null},set:function(e,t){ir[e]=t},remove:function(e){delete ir[e]}},or=null,ar={is_supported:function(){if(!xt(or))return or;if(or=!0,Tt(Dt))or=!1;else try{var e="__support__";ar.set(e,"xyz"),'"xyz"'!==ar.get(e)&&(or=!1),ar.remove(e)}catch(t){or=!1}return or},error:function(e){Jt.error("sessionStorage error: ",e)},get:function(e){try{return null==Dt?void 0:Dt.sessionStorage.getItem(e)}catch(t){ar.error(t)}return null},parse:function(e){try{return JSON.parse(ar.get(e))||null}catch(t){}return null},set:function(e,t){try{null==Dt||Dt.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){ar.error(n)}},remove:function(e){try{null==Dt||Dt.sessionStorage.removeItem(e)}catch(t){ar.error(t)}}},ur=["localhost","127.0.0.1"],lr=function(e){var t=null==Bt?void 0:Bt.createElement("a");return Tt(t)?null:(t.href=e,t)},cr=function(e,t){for(var n,r=((e.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===t){n=s;break}}if(!Et(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch(a){Jt.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},dr=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},hr="Mobile",fr="iOS",pr="Android",gr="Tablet",vr=pr+" "+gr,mr="iPad",_r="Apple",yr=_r+" Watch",br="Safari",wr="BlackBerry",kr="Samsung",Sr=kr+"Browser",Er=kr+" Internet",Rr="Chrome",Pr=Rr+" OS",Fr=Rr+" "+fr,Tr="Internet Explorer",Or=Tr+" "+hr,xr="Opera",Cr=xr+" Mini",Ir="Edge",Mr="Microsoft "+Ir,Ar="Firefox",Dr=Ar+" "+fr,Lr="Nintendo",jr="PlayStation",Nr="Xbox",$r=pr+" "+hr,qr=hr+" "+br,Br="Windows",Ur=Br+" Phone",Hr="Nokia",Wr="Ouya",Vr="Generic",zr=Vr+" "+hr.toLowerCase(),Gr=Vr+" "+gr.toLowerCase(),Kr="Konqueror",Jr="(\\d+(\\.\\d+)?)",Yr=new RegExp("Version/"+Jr),Qr=new RegExp(Nr,"i"),Xr=new RegExp(jr+" \\w+","i"),Zr=new RegExp(Lr+" \\w+","i"),ei=new RegExp(wr+"|PlayBook|BB10","i"),ti={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},ni=function(e,t){return t=t||"",tn(e," OPR/")&&tn(e,"Mini")?Cr:tn(e," OPR/")?xr:ei.test(e)?wr:tn(e,"IE"+hr)||tn(e,"WPDesktop")?Or:tn(e,Sr)?Er:tn(e,Ir)||tn(e,"Edg/")?Mr:tn(e,"FBIOS")?"Facebook "+hr:tn(e,Rr)?Rr:tn(e,"CriOS")?Fr:tn(e,"UCWEB")||tn(e,"UCBrowser")?"UC Browser":tn(e,"FxiOS")?Dr:tn(e,pr)?$r:tn(e.toLowerCase(),Kr.toLowerCase())?Kr:function(e,t){return t&&tn(t,_r)||tn(n=e,br)&&!tn(n,Rr)&&!tn(n,pr);var n}(e,t)?tn(e,hr)?qr:br:tn(e,Ar)?Ar:tn(e,"MSIE")||tn(e,"Trident/")?Tr:tn(e,"Gecko")?Ar:""},ri=(ft(Xn={},Or,[new RegExp("rv:"+Jr)]),ft(Xn,Mr,[new RegExp(Ir+"?\\/"+Jr)]),ft(Xn,Rr,[new RegExp(Rr+"/"+Jr)]),ft(Xn,Fr,[new RegExp("CriOS\\/"+Jr)]),ft(Xn,"UC Browser",[new RegExp("(UCBrowser|UCWEB)\\/"+Jr)]),ft(Xn,br,[Yr]),ft(Xn,qr,[Yr]),ft(Xn,xr,[new RegExp("(Opera|OPR)\\/"+Jr)]),ft(Xn,Ar,[new RegExp(Ar+"\\/"+Jr)]),ft(Xn,Dr,[new RegExp("FxiOS\\/"+Jr)]),ft(Xn,Kr,[new RegExp("Konqueror[:/]?"+Jr,"i")]),ft(Xn,wr,[new RegExp(wr+" "+Jr),Yr]),ft(Xn,$r,[new RegExp("android\\s"+Jr)]),ft(Xn,Er,[new RegExp(Sr+"\\/"+Jr)]),ft(Xn,Tr,[new RegExp("(rv:|MSIE )"+Jr)]),ft(Xn,"Mozilla",[new RegExp("rv:"+Jr)]),Xn),ii=[[new RegExp(Nr+"; "+Nr+" (.*?)[);]","i"),function(e){return[Nr,e&&e[1]||""]}],[new RegExp(Lr,"i"),[Lr,""]],[new RegExp(jr,"i"),[jr,""]],[ei,[wr,""]],[new RegExp(Br,"i"),function(e,t){if(/Phone/.test(t)||/WPDesktop/.test(t))return[Ur,""];if(new RegExp(hr).test(t)&&!/IEMobile\b/.test(t))return[Br+" "+hr,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=ti[r]||"";return/arm/i.test(t)&&(i="RT"),[Br,i]}return[Br,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(e){if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[fr,t.join(".")]}return[fr,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(e){var t="";return e&&e.length>=3&&(t=Tt(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+pr+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+pr+")","i"),function(e){if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[pr,t.join(".")]}return[pr,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(e){var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Pr,""]],[/Linux|debian/i,["Linux",""]]],si=function(e){return Zr.test(e)?Lr:Xr.test(e)?jr:Qr.test(e)?Nr:new RegExp(Wr,"i").test(e)?Wr:new RegExp("("+Ur+"|WPDesktop)","i").test(e)?Ur:/iPad/.test(e)?mr:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?yr:ei.test(e)?wr:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(Hr,"i").test(e)?Hr:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(hr).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?pr:vr:pr:new RegExp("(pda|"+hr+")","i").test(e)?zr:new RegExp(gr,"i").test(e)&&!new RegExp(gr+" pc","i").test(e)?Gr:""},oi="https?://(.*)",ai=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid"],ui={campaignParams:function(e){var t=ai.concat(e||[]),n={};return Zt(t,(function(e){var t=Bt?cr(Bt.URL,e):"";t.length&&(n[e]=t)})),n},searchEngine:function(){var e=null==Bt?void 0:Bt.referrer;return e?0===e.search(oi+"google.([^/?]*)")?"google":0===e.search(oi+"bing.com")?"bing":0===e.search(oi+"yahoo.com")?"yahoo":0===e.search(oi+"duckduckgo.com")?"duckduckgo":null:null},searchInfo:function(){var e=ui.searchEngine(),t="yahoo"!=e?"q":"p",n={};if(!xt(e)){n.$search_engine=e;var r=Bt?cr(Bt.referrer,t):"";r.length&&(n.ph_keyword=r)}return n},browser:ni,browserVersion:function(e,t){var n=ni(e,t),r=ri[n];if(Tt(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=e.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(e){for(var t=0;t<ii.length;t++){var n=pt(ii[t],2),r=n[0],i=n[1],s=r.exec(e),o=s&&(Rt(i)?i(s,e):i);if(o)return o}return["",""]},device:si,deviceType:function(e){var t=si(e);return t===mr||t===vr||"Kobo"===t||"Kindle Fire"===t||t===Gr?gr:t===Lr||t===Nr||t===jr||t===Wr?"Console":t===yr?"Wearable":t?hr:"Desktop"},referrer:function(){return(null==Bt?void 0:Bt.referrer)||"$direct"},referringDomain:function(){var e;return null!=Bt&&Bt.referrer&&(null===(e=lr(Bt.referrer))||void 0===e?void 0:e.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},properties:function(){if(!zt)return{};var e=pt(ui.os(zt),2),t=e[0],n=e[1];return en(an({$os:t,$os_version:n,$browser:ui.browser(zt,navigator.vendor),$device:ui.device(zt),$device_type:ui.deviceType(zt)}),{$current_url:null==Ut?void 0:Ut.href,$host:null==Ut?void 0:Ut.host,$pathname:null==Ut?void 0:Ut.pathname,$raw_user_agent:zt.length>1e3?zt.substring(0,997)+"...":zt,$browser_version:ui.browserVersion(zt,navigator.vendor),$browser_language:ui.browserLanguage(),$screen_height:null==Dt?void 0:Dt.screen.height,$screen_width:null==Dt?void 0:Dt.screen.width,$viewport_height:null==Dt?void 0:Dt.innerHeight,$viewport_width:null==Dt?void 0:Dt.innerWidth,$lib:"web",$lib_version:yt.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:rn()/1e3})},people_properties:function(){if(!zt)return{};var e=pt(ui.os(zt),2),t=e[0],n=e[1];return en(an({$os:t,$os_version:n,$browser:ui.browser(zt,navigator.vendor)}),{$browser_version:ui.browserVersion(zt,navigator.vendor)})}},li=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],ci=function(){function e(t){var n,r;ct(this,e),this.config=t,this.props={},this.campaign_params_saved=!1,this.name=(r="",(n=t).token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"),this.storage=this.buildStorage(t),this.load(),this.update_config(t,t),this.save()}return ht(e,[{key:"buildStorage",value:function(e){-1===li.indexOf(e.persistence.toLowerCase())&&(Jt.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&tr.is_supported()?tr:"localstorage+cookie"===t&&rr.is_supported()?rr:"sessionstorage"===t&&ar.is_supported()?ar:"memory"===t?sr:"cookie"===t?Zn:rr.is_supported()?rr:Zn}},{key:"properties",value:function(){var e={};return Zt(this.props,(function(t,n){if(n===En&&Pt(t))for(var r=Object.keys(t),i=0;i<r.length;i++)e["$feature/".concat(r[i])]=t[r[i]];else o=n,a=!1,(xt(s=Ln)?a:$t&&s.indexOf===$t?-1!=s.indexOf(o):(Zt(s,(function(e){if(a||(a=e===o))return Yt})),a))||(e[n]=t);var s,o,a})),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=en({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,t,n){var r=this;if(Pt(e)){Tt(t)&&(t="None"),this.expire_days=Tt(n)?this.default_expiry:n;var i=!1;if(Zt(e,(function(e,n){r.props.hasOwnProperty(n)&&r.props[n]!==t||(r.props[n]=e,i=!0)})),i)return this.save(),!0}return!1}},{key:"register",value:function(e,t){var n=this;if(Pt(e)){this.expire_days=Tt(t)?this.default_expiry:t;var r=!1;if(Zt(e,(function(t,i){e.hasOwnProperty(i)&&n.props[i]!==t&&(n.props[i]=t,r=!0)})),r)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(ui.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"set_initial_campaign_params",value:function(){this.register_once(ft({},Mn,ui.campaignParams(this.config.custom_campaign_params)),void 0)}},{key:"update_search_keyword",value:function(){this.register(ui.searchInfo())}},{key:"update_referrer_info",value:function(){this.register(ui.referrerInfo())}},{key:"set_initial_referrer_info",value:function(){this.register_once(ft({},An,ui.referrerInfo()),void 0)}},{key:"get_referrer_info",value:function(){return an({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"get_initial_props",value:function(){var e=this,t={};return Zt([An,Mn],(function(n){var r=e.props[n];r&&Zt(r,(function(e,n){var r;t["$initial_"+(r=n,r.replace(/^\$/,""))]=e}))})),t}},{key:"safe_merge",value:function(e){return Zt(this.props,(function(t,n){n in e||(e[n]=t)})),e}},{key:"update_config",value:function(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var n=this.buildStorage(e),r=this.props;this.clear(),this.storage=n,this.props=r,this.save()}}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,t){var n=this.props[pn]||{};n[e]=t,this.props[pn]=n,this.save()}},{key:"remove_event_timer",value:function(e){var t=(this.props[pn]||{})[e];return Tt(t)||(delete this.props[pn][e],this.save()),t}},{key:"get_property",value:function(e){return this.props[e]}},{key:"set_property",value:function(e,t){this.props[e]=t,this.save()}}]),e}(),di=2,hi=4,fi=ht((function e(t){var n,r,i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ct(this,e),ft(this,"bucketSize",100),ft(this,"refillRate",10),ft(this,"mutationBuckets",{}),ft(this,"loggedTracker",{}),ft(this,"refillBuckets",(function(){Object.keys(i.mutationBuckets).forEach((function(e){i.mutationBuckets[e]=i.mutationBuckets[e]+i.refillRate,i.mutationBuckets[e]>=i.bucketSize&&delete i.mutationBuckets[e]}))})),ft(this,"getNodeOrRelevantParent",(function(e){var t=i.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[i.rrweb.mirror.getId(n),n]}return[e,t]})),ft(this,"numberOfChanges",(function(e){var t,n,r,i,s,o,a,u;return(null!==(t=null===(n=e.removes)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(r=null===(i=e.attributes)||void 0===i?void 0:i.length)&&void 0!==r?r:0)+(null!==(s=null===(o=e.texts)||void 0===o?void 0:o.length)&&void 0!==s?s:0)+(null!==(a=null===(u=e.adds)||void 0===u?void 0:u.length)&&void 0!==a?a:0)})),ft(this,"throttleMutations",(function(e){if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=i.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((function(e){var t,n,r,s=pt(i.getNodeOrRelevantParent(e.id),2),o=s[0],a=s[1];return 0!==i.mutationBuckets[o]&&(i.mutationBuckets[o]=null!==(t=i.mutationBuckets[o])&&void 0!==t?t:i.bucketSize,i.mutationBuckets[o]=Math.max(i.mutationBuckets[o]-1,0),0===i.mutationBuckets[o]&&(i.loggedTracker[o]||(i.loggedTracker[o]=!0,null===(n=(r=i.options).onBlockedNode)||void 0===n||n.call(r,o,a))),e)})));var r=i.numberOfChanges(t);return 0!==r||n===r?e:void 0})),this.rrweb=t,this.options=s,this.refillRate=null!==(n=this.options.refillRate)&&void 0!==n?n:this.refillRate,this.bucketSize=null!==(r=this.options.bucketSize)&&void 0!==r?r:this.bucketSize,setInterval((function(){i.refillBuckets()}),1e3)})),pi=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(pi||{});function gi(e){return e?Qt(e).split(/\s+/):[]}function vi(e){var t="";switch(lt(e.className)){case"string":t=e.className;break;case"object":t=("baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return gi(t)}function mi(e){return Ct(e)?null:Qt(e).split(/(\s+)/).filter((function(e){return Mi(e)})).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function _i(e){var t="";return Ri(e)&&!Pi(e)&&e.childNodes&&e.childNodes.length&&Zt(e.childNodes,(function(e){var n;wi(e)&&e.textContent&&(t+=null!==(n=mi(e.textContent))&&void 0!==n?n:"")})),Qt(t)}function yi(e){return!!e&&1===e.nodeType}function bi(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function wi(e){return!!e&&3===e.nodeType}function ki(e){return!!e&&11===e.nodeType}var Si=["a","button","form","input","select","textarea","label"];function Ei(e){var t=e.parentNode;return!(!t||!yi(t))&&t}function Ri(e){for(var t=e;t.parentNode&&!bi(t,"body");t=t.parentNode){var n=vi(t);if(tn(n,"ph-sensitive")||tn(n,"ph-no-capture"))return!1}if(tn(vi(e),"ph-include"))return!0;var r=e.type||"";if(Ot(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!Ot(i)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,""))}function Pi(e){return!!(bi(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||bi(e,"select")||bi(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var Fi="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Ti=new RegExp("^(?:".concat(Fi,")$")),Oi=new RegExp(Fi),xi="\\d{3}-?\\d{2}-?\\d{4}",Ci=new RegExp("^(".concat(xi,")$")),Ii=new RegExp("(".concat(xi,")"));function Mi(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ct(e))return!1;if(Ot(e)){if(e=Qt(e),(t?Ti:Oi).test((e||"").replace(/[- ]/g,"")))return!1;if((t?Ci:Ii).test(e))return!1}return!0}function Ai(e){var t=_i(e);return Mi(t="".concat(t," ").concat(Di(e)).trim())?t:""}function Di(e){var t="";return e&&e.childNodes&&e.childNodes.length&&Zt(e.childNodes,(function(e){var n;if(e&&"span"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase()))try{var r=_i(e);t="".concat(t," ").concat(r).trim(),e.childNodes&&e.childNodes.length&&(t="".concat(t," ").concat(Di(e)).trim())}catch(i){Jt.error(i)}})),t}function Li(e){return function(e){return e.map((function(e){var t,n,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class){e.attr_class.sort();var i,s=_t(e.attr_class);try{for(s.s();!(i=s.n()).done;){var o=i.value;r+=".".concat(o.replace(/"/g,""))}}catch(l){s.e(l)}finally{s.f()}}var a=ut(ut(ut(ut({},e.text?{text:e.text}:{}),{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{}),e.attr_id?{attr_id:e.attr_id}:{}),e.attributes),u={};return nn(a).sort((function(e,t){var n=pt(e,1)[0],r=pt(t,1)[0];return n.localeCompare(r)})).forEach((function(e){var t=pt(e,2),n=t[0],r=t[1];return u[ji(n.toString())]=ji(r.toString())})),(r+=":")+nn(a).map((function(e){var t=pt(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')})).join("")})).join(";")}(e.map((function(e){var t,n,r={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(n=e.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:Ni(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return nn(e).filter((function(e){return 0===pt(e,1)[0].indexOf("attr__")})).forEach((function(e){var t=pt(e,2),n=t[0],i=t[1];return r.attributes[n]=i})),r})))}function ji(e){return e.replace(/"|\\"/g,'\\"')}function Ni(e){var t=e.attr__class;return t?Et(t)?t:gi(t):void 0}var $i="[SessionRecording]",qi={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(e){return e},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},Bi=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Ui=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Hi=["/s/","/e/","/i/"];function Wi(e,t,n,r){if(Ct(e))return e;var i=(null==t?void 0:t["content-length"])||new Blob([e]).size;return Ot(i)&&(i=parseInt(i)),i>n?$i+" ".concat(r," body too large to record (").concat(i," bytes)"):e}function Vi(e,t){if(Ct(e))return e;var n=e;return Mi(n,!1)||(n=$i+" "+t+" body redacted"),Zt(Ui,(function(e){var r,i;null!==(r=n)&&void 0!==r&&r.length&&-1!==(null===(i=n)||void 0===i?void 0:i.indexOf(e))&&(n=$i+" "+t+" body redacted as might contain: "+e)})),n}var zi="__ph_opt_in_out_";function Gi(e,t){ts(!0,e,t)}function Ki(e,t){ts(!1,e,t)}function Ji(e,t){return"1"===es(e,t)}function Yi(e,t){return!!function(e){if(e&&e.respectDnt){var t=e&&e.window||Dt,n=null==t?void 0:t.navigator,r=!1;return Zt([null==n?void 0:n.doNotTrack,n.msDoNotTrack,t.doNotTrack],(function(e){tn([!0,1,"1","yes"],e)&&(r=!0)})),r}return!1}(t)||"0"===es(e,t)}function Qi(e,t){Xi(t=t||{}).remove(Zi(e,t),!!t.crossSubdomainCookie)}function Xi(e){return"localStorage"===(e=e||{}).persistenceType?tr:"localStorage+cookie"===e.persistenceType?rr:Zn}function Zi(e,t){return((t=t||{}).persistencePrefix||zi)+e}function es(e,t){return Xi(t).get(Zi(e,t))}function ts(e,t,n){Ot(t)&&t.length?(Xi(n=n||{}).set(Zi(t,n),e?1:0,It(n.cookieExpiration)?n.cookieExpiration:null,n.crossSubdomainCookie,n.secureCookie),n.capture&&e&&n.capture(n.captureEventName||"$opt_in",n.captureProperties||{},{send_instantly:!0})):Jt.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}function ns(e){var t=!1;try{var n=e.config.token,r=e.config.respect_dnt,i=e.config.opt_out_capturing_persistence_type,s=e.config.opt_out_capturing_cookie_prefix||void 0,o=e.config.window;n&&(t=Yi(n,{respectDnt:r,persistenceType:i,persistencePrefix:s,window:o}))}catch(a){Jt.error("Unexpected error when checking capturing opt-out status: "+a)}return t}var rs,is=3e5,ss=is;!function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet"}(rs||(rs={}));var os=[rs.MouseMove,rs.MouseInteraction,rs.Scroll,rs.ViewportResize,rs.Input,rs.TouchMove,rs.MediaInteraction,rs.Drag],as=function(e){return{rrwebMethod:e,enqueuedAt:Date.now(),attempt:1}},us="[SessionRecording]",ls=function(){function e(t){var n=this;if(ct(this,e),ft(this,"queuedRRWebEvents",[]),ft(this,"isIdle",!1),ft(this,"_linkedFlagSeen",!1),ft(this,"_lastActivityTimestamp",Date.now()),ft(this,"windowId",null),ft(this,"sessionId",null),ft(this,"_linkedFlag",null),ft(this,"_forceAllowLocalhostNetworkCapture",!1),ft(this,"_samplingSessionListener",null),this.instance=t,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,null==Dt||Dt.addEventListener("beforeunload",(function(){n._flushBuffer()})),null==Dt||Dt.addEventListener("offline",(function(){n._tryAddCustomEvent("browser offline",{})})),null==Dt||Dt.addEventListener("online",(function(){n._tryAddCustomEvent("browser online",{})})),null==Dt||Dt.addEventListener("visibilitychange",(function(){if(null!=Bt&&Bt.visibilityState){var e="window "+Bt.visibilityState;n._tryAddCustomEvent(e,{})}})),!this.instance.sessionManager)throw Jt.error(us+" started without valid sessionManager"),new Error(us+" started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer(),this._setupSampling()}return ht(e,[{key:"rrwebRecord",get:function(){var e;return null==Gt||null===(e=Gt.rrweb)||void 0===e?void 0:e.record}},{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw Jt.error(us+" started without valid sessionManager"),new Error(us+" started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){var e=this.instance.get_property(Sn);return Mt(e)?e:null}},{key:"sessionDuration",get:function(){var e,t,n=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],r=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return n?n.timestamp-r:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(vn),t=!this.instance.config.disable_session_recording;return Dt&&e&&t}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(mn),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}},{key:"canvasRecording",get:function(){var e=this.instance.get_property(yn);return e&&e.fps&&e.quality?{enabled:e.enabled,fps:e.fps,quality:e.quality}:void 0}},{key:"networkPayloadCapture",get:function(){var e,t,n=this.instance.get_property(_n),r={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},i=(null==r?void 0:r.recordHeaders)||(null==n?void 0:n.recordHeaders),s=(null==r?void 0:r.recordBody)||(null==n?void 0:n.recordBody),o=this.instance.config.capture_performance||(null==n?void 0:n.capturePerformance);return i||s||o?{recordHeaders:i,recordBody:s,recordPerformance:o}:void 0}},{key:"sampleRate",get:function(){var e=this.instance.get_property(bn);return It(e)?e:null}},{key:"minimumDuration",get:function(){var e=this.instance.get_property(wn);return It(e)?e:null}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?Ct(this._linkedFlag)||this._linkedFlagSeen?Mt(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}},{key:"startIfEnabledOrStop",value:function(){this.isRecordingEnabled?(this._startCapture(),Jt.info(us+" started")):(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,Jt.info(us+" stopped"))}},{key:"makeSamplingDecision",value:function(e){var t,n=this.sessionId!==e,r=this.sampleRate;if(It(r)){var i,s=this.isSampled,o=n||!Mt(s);!(i=o?Math.random()<r:s)&&o&&Jt.warn(us+" Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r}),null===(t=this.instance.persistence)||void 0===t||t.register(ft({},Sn,i))}else{var a;null===(a=this.instance.persistence)||void 0===a||a.register(ft({},Sn,null))}}},{key:"afterDecideResponse",value:function(e){var t,n,r,i=this;if(this._persistDecideResponse(e),this._linkedFlag=(null===(t=e.sessionRecording)||void 0===t?void 0:t.linkedFlag)||null,null!==(n=e.sessionRecording)&&void 0!==n&&n.endpoint&&(this._endpoint=null===(r=e.sessionRecording)||void 0===r?void 0:r.endpoint),this._setupSampling(),!Ct(this._linkedFlag)){var s=Ot(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,o=Ot(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((function(e,t){var n=Pt(t)&&s in t,r=o?t[s]===o:n;if(r){var a={linkedFlag:s,linkedVariant:o},u="linked flag matched";Jt.info(us+" "+u,a),i._tryAddCustomEvent(u,a)}i._linkedFlagSeen=r}))}this.receivedDecide=!0,this.startIfEnabledOrStop()}},{key:"_setupSampling",value:function(){var e=this;It(this.sampleRate)&&xt(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId((function(t){e.makeSamplingDecision(t)})))}},{key:"_persistDecideResponse",value:function(e){if(this.instance.persistence){var t=this.instance.persistence,n=function(){var n,r,i,s,o,a,u,l,c=null===(n=e.sessionRecording)||void 0===n?void 0:n.sampleRate,d=Ct(c)?null:parseFloat(c),h=null===(r=e.sessionRecording)||void 0===r?void 0:r.minimumDurationMilliseconds;t.register((ft(l={},vn,!!e.sessionRecording),ft(l,mn,null===(i=e.sessionRecording)||void 0===i?void 0:i.consoleLogRecordingEnabled),ft(l,_n,ut({capturePerformance:e.capturePerformance},null===(s=e.sessionRecording)||void 0===s?void 0:s.networkPayloadCapture)),ft(l,yn,{enabled:null===(o=e.sessionRecording)||void 0===o?void 0:o.recordCanvas,fps:null===(a=e.sessionRecording)||void 0===a?void 0:a.canvasFps,quality:null===(u=e.sessionRecording)||void 0===u?void 0:u.canvasQuality}),ft(l,bn,d),ft(l,wn,Tt(h)?null:h),l))};n(),this.sessionManager.onSessionId(n)}}},{key:"log",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:rn()})}},{key:"_startCapture",value:function(){var e=this;Tt(Object.assign)||this._captureStarted||this.instance.config.disable_session_recording||ns(this.instance)||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():dn(this.instance.requestRouter.endpointFor("assets","/static/recorder.js?v=".concat(yt.LIB_VERSION)),(function(t){if(t)return Jt.error(us+" could not load recorder.js",t);e._onScriptLoaded()})))}},{key:"isInteractiveEvent",value:function(e){var t;return 3===e.type&&-1!==os.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}},{key:"_updateWindowAndSessionIds",value:function(e){var t=this.isInteractiveEvent(e);t||this.isIdle||e.timestamp-this._lastActivityTimestamp>ss&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:ss}));var n=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)),!this.isIdle){var r=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),i=r.windowId,s=r.sessionId,o=this.sessionId!==s,a=this.windowId!==i;this.windowId=i,this.sessionId=s,(n||-1===[di,hi].indexOf(e.type)&&(a||o))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRWebMethod",value:function(e){try{return e.rrwebMethod(),!0}catch(t){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Jt.warn(us+" could not emit queued rrweb event.",t,e),!1}}},{key:"_tryAddCustomEvent",value:function(e,t){var n=this;return this._tryRRWebMethod(as((function(){return n.rrwebRecord.addCustomEvent(e,t)})))}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRWebMethod(as((function(){return e.rrwebRecord.takeFullSnapshot()})))}},{key:"_onScriptLoaded",value:function(){for(var e,t=this,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},r=this.instance.config.session_recording,i=0,s=Object.entries(r||{});i<s.length;i++){var o=pt(s[i],2),a=o[0],u=o[1];a in n&&(n[a]=u)}if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new fi(this.rrwebRecord,{onBlockedNode:function(e,n){var r="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");Jt.info(r,{node:n}),t.log(us+" "+r,"warn")}}),this._scheduleFullSnapshot();var l=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(ut({emit:function(e){t.onRRwebEmit(e)},plugins:l},n)),this.instance._addCaptureHook((function(e){try{if("$pageview"===e){var n=Dt?t._maskUrl(Dt.location.href):"";if(!n)return;t._tryAddCustomEvent("$pageview",{href:n}),t._tryTakeFullSnapshot()}}catch(r){Jt.error("Could not add $pageview to rrweb session",r)}})),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:l.map((function(e){return null==e?void 0:e.name}))}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else Jt.error(us+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_scheduleFullSnapshot",value:function(){var e=this;this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),this._fullSnapshotTimer=setInterval((function(){e._tryTakeFullSnapshot()}),is)}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return Gt.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(Gt.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&Rt(Gt.getRecordNetworkPlugin)&&(!ur.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(Gt.getRecordNetworkPlugin(function(e,t){var n,r,i,s={payloadSizeLimitBytes:qi.payloadSizeLimitBytes,performanceEntryTypeToObserve:gt(qi.performanceEntryTypeToObserve)},o=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,u=!1!==e.capture_performance&&t.recordPerformance,l=(n=s,i=Math.min(1e6,null!==(r=n.payloadSizeLimitBytes)&&void 0!==r?r:1e6),function(e){return null!=e&&e.requestBody&&(e.requestBody=Wi(e.requestBody,e.requestHeaders,i,"Request")),null!=e&&e.responseBody&&(e.responseBody=Wi(e.responseBody,e.responseHeaders,i,"Response")),e}),c=function(e){return l(function(e){var t=lr(e.name);if(!(t&&t.pathname&&Hi.some((function(e){return 0===t.pathname.indexOf(e)}))))return e}((t=e,Zt(Object.keys(null!==(n=t.requestHeaders)&&void 0!==n?n:{}),(function(e){var n;Bi.includes(e.toLowerCase())&&(null===(n=t.requestHeaders)||void 0===n||delete n[e])})),t)));var t,n},d=Rt(e.session_recording.maskNetworkRequestFn);return d&&Rt(e.session_recording.maskCapturedNetworkRequestFn)&&Jt.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=function(t){var n=e.session_recording.maskNetworkRequestFn({url:t.name});return ut(ut({},t),{},{name:null==n?void 0:n.url})}),s.maskRequestFn=Rt(e.session_recording.maskCapturedNetworkRequestFn)?function(t){var n,r,i,s=c(t);return s&&null!==(n=null===(r=(i=e.session_recording).maskCapturedNetworkRequestFn)||void 0===r?void 0:r.call(i,s))&&void 0!==n?n:void 0}:function(e){return function(e){if(!Tt(e))return e.requestBody=Vi(e.requestBody,"Request"),e.responseBody=Vi(e.responseBody,"Response"),e}(c(e))},ut(ut(ut({},qi),s),{},{recordHeaders:o,recordBody:a,recordPerformance:u,recordInitialRequests:u})}(this.instance.config,this.networkPayloadCapture))):Jt.info(us+" NetworkCapture not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(this._processQueuedEvents(),e&&Pt(e)){if(e.type===pi.Meta){var t=this._maskUrl(e.data.href);if(this._lastHref=t,!t)return;e.data.href=t}else this._pageViewFallBack();e.type===pi.FullSnapshot&&this._scheduleFullSnapshot();var n=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(n){var r=function(e){var t=e;if(t&&Pt(t)&&6===t.type&&Pt(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var n=[],r=0;r<t.data.payload.payload.length;r++)t.data.payload.payload[r]&&t.data.payload.payload[r].length>2e3?n.push(t.data.payload.payload[r].slice(0,2e3)+"...[truncated]"):n.push(t.data.payload.payload[r]);return t.data.payload.payload=n,e}return e}(n),i=JSON.stringify(r).length;if(this._updateWindowAndSessionIds(r),!this.isIdle||r.type===pi.Custom){var s={$snapshot_bytes:i,$snapshot_data:r,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(s):this.clearBuffer()}}}}},{key:"_pageViewFallBack",value:function(){if(!this.instance.config.capture_pageview&&Dt){var e=this._maskUrl(Dt.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}},{key:"_processQueuedEvents",value:function(){var e=this;if(this.queuedRRWebEvents.length){var t=gt(this.queuedRRWebEvents);this.queuedRRWebEvents=[],t.forEach((function(n){Date.now()-n.enqueuedAt>2e3?e._tryAddCustomEvent("rrwebQueueTimeout",{enqueuedAt:n.enqueuedAt,attempt:n.attempt,queueLength:t.length}):e._tryRRWebMethod(n)&&e._tryAddCustomEvent("rrwebQueueSuccess",{enqueuedAt:n.enqueuedAt,attempt:n.attempt,queueLength:t.length})}))}}},{key:"_maskUrl",value:function(e){var t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var n,r={url:e};return null===(n=r=t.maskNetworkRequestFn(r))||void 0===n?void 0:n.url}return e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var t=this.minimumDuration,n=this.sessionDuration,r=It(n)&&n>=0,i=It(t)&&r&&n<t;return"buffering"===this.status||i?(this.flushBufferTimer=setTimeout((function(){e._flushBuffer()}),2e3),this.buffer||this.clearBuffer()):this.buffer&&0!==this.buffer.data.length?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var t,n=this,r=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+r>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),xt(this.buffer.sessionId)&&!xt(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout((function(){n._flushBuffer()}),2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",_noHeatmaps:!0})}}]),e}(),cs=function(){function e(t){ct(this,e),this.instance=t,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return ht(e,[{key:"call",value:function(){var e=this,t={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(Pn),group_properties:this.instance.get_property(Fn),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:t,compression:this.instance.config.disable_compression?void 0:un.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(t){return e.parseDecideResponse(t.json)}})}},{key:"parseDecideResponse",value:function(e){var t=this;this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(null!=e?e:{},n),n)Jt.error("Failed to fetch feature flags from PostHog.");else{if(!Bt||!Bt.body)return Jt.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((function(){t.parseDecideResponse(e)}),500);this.instance._afterDecideResponse(e);var r=null==Dt?void 0:Dt.extendPostHogWithExceptionAutoCapture;if(e.autocaptureExceptions&&e.autocaptureExceptions&&Tt(r)&&dn(this.instance.requestRouter.endpointFor("assets","/static/exception-autocapture.js"),(function(n){if(n)return Jt.error("Could not load exception autocapture script",n);Dt.extendPostHogWithExceptionAutocapture(t.instance,e)})),e.siteApps)if(this.instance.config.opt_in_site_apps){var i,s=_t(e.siteApps);try{var o=function(){var e=i.value,n=e.id,r=e.url,s=t.instance.requestRouter.endpointFor("api",r);Gt["__$$ph_site_app_".concat(n)]=t.instance,dn(s,(function(e){e&&Jt.error("Error while initializing PostHog app with config id ".concat(n),e)}))};for(s.s();!(i=s.n()).done;)o()}catch(a){s.e(a)}finally{s.f()}}else e.siteApps.length>0&&Jt.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}]),e}(),ds=null!=Dt&&Dt.location?dr(Dt.location.hash,"__posthog")||dr(location.hash,"state"):null,hs="_postHogToolbarParams",fs=function(){function e(t){ct(this,e),ft(this,"_toolbarScriptLoaded",!1),this.instance=t}return ht(e,[{key:"maybeLoadToolbar",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!Dt||!Bt)return!1;n=null!==(e=n)&&void 0!==e?e:Dt.location,i=null!==(t=i)&&void 0!==t?t:Dt.history;try{if(!r){try{Dt.localStorage.setItem("test","test"),Dt.localStorage.removeItem("test")}catch(u){return!1}r=null==Dt?void 0:Dt.localStorage}var s,o=ds||dr(n.hash,"__posthog")||dr(n.hash,"state"),a=o?sn((function(){return JSON.parse(atob(decodeURIComponent(o)))}))||sn((function(){return JSON.parse(decodeURIComponent(o))})):null;return a&&"ph_authorize"===a.action?((s=a).source="url",s&&Object.keys(s).length>0&&(a.desiredHash?n.hash=a.desiredHash:i?i.replaceState("",Bt.title,n.pathname+n.search):n.hash="")):((s=JSON.parse(r.getItem(hs)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token||(this.loadToolbar(s),0))}catch(u){return!1}}},{key:"_callLoadToolbar",value:function(e){(Gt.ph_load_toolbar||Gt.ph_load_editor)(e,this.instance)}},{key:"loadToolbar",value:function(e){var t=this;if(!Dt||Dt.localStorage.getItem(hs)&&this._toolbarScriptLoaded)return!1;var n="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,r=ut(ut({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});if(Dt.localStorage.setItem(hs,JSON.stringify(ut(ut({},r),{},{source:void 0}))),this._toolbarScriptLoaded)this._callLoadToolbar(r);else{this._toolbarScriptLoaded=!0;var i=3e5,s=Math.floor(Date.now()/i)*i;dn(this.instance.requestRouter.endpointFor("assets","/static/toolbar.js?t=".concat(s)),(function(e){if(e)return Jt.error("Failed to load toolbar",e),void(t._toolbarScriptLoaded=!1);t._callLoadToolbar(r)})),cn(Dt,"turbolinks:load",(function(){t._toolbarScriptLoaded=!1,t.loadToolbar(r)}))}return!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}]),e}(),ps=function(){function e(t){ct(this,e),ft(this,"isPaused",!0),ft(this,"queue",[]),ft(this,"flushTimeoutMs",3e3),this.sendRequest=t}return ht(e,[{key:"enqueue",value:function(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}},{key:"unload",value:function(){var e=this;this.clearFlushTimeout();var t=this.queue.length>0?this.formatQueue():{},n=Object.values(t);[].concat(gt(n.filter((function(e){return 0===e.url.indexOf("/e")}))),gt(n.filter((function(e){return 0!==e.url.indexOf("/e")})))).map((function(t){e.sendRequest(ut(ut({},t),{},{transport:"sendBeacon"}))}))}},{key:"enable",value:function(){this.isPaused=!1,this.setFlushTimeout()}},{key:"setFlushTimeout",value:function(){var e=this;this.isPaused||(this.flushTimeout=setTimeout((function(){if(e.clearFlushTimeout(),e.queue.length>0){var t=e.formatQueue(),n=function(n){var r=t[n],i=(new Date).getTime();r.data&&Et(r.data)&&Zt(r.data,(function(e){e.offset=Math.abs(e.timestamp-i),delete e.timestamp})),e.sendRequest(r)};for(var r in t)n(r)}}),this.flushTimeoutMs))}},{key:"clearFlushTimeout",value:function(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}},{key:"formatQueue",value:function(){var e={};return Zt(this.queue,(function(t){var n,r=t,i=(r?r.batchKey:null)||r.url;Tt(e[i])&&(e[i]=ut(ut({},r),{},{data:[]})),null===(n=e[i].data)||void 0===n||n.push(r.data)})),this.queue=[],e}}]),e}(),gs=Uint8Array,vs=Uint16Array,ms=Uint32Array,_s=new gs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ys=new gs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bs=new gs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ws=function(e,t){for(var n=new vs(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new ms(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},ks=ws(_s,2),Ss=ks[0],Es=ks[1];Ss[28]=258,Es[258]=28;for(var Rs=ws(ys,0)[1],Ps=new vs(32768),Fs=0;Fs<32768;++Fs){var Ts=(43690&Fs)>>>1|(21845&Fs)<<1;Ts=(61680&(Ts=(52428&Ts)>>>2|(13107&Ts)<<2))>>>4|(3855&Ts)<<4,Ps[Fs]=((65280&Ts)>>>8|(255&Ts)<<8)>>>1}var Os=function(e,t,n){for(var r=e.length,i=0,s=new vs(t);i<r;++i)++s[e[i]-1];var o,a=new vs(t);for(i=0;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;for(o=new vs(r),i=0;i<r;++i)o[i]=Ps[a[e[i]-1]++]>>>15-e[i];return o},xs=new gs(288);for(Fs=0;Fs<144;++Fs)xs[Fs]=8;for(Fs=144;Fs<256;++Fs)xs[Fs]=9;for(Fs=256;Fs<280;++Fs)xs[Fs]=7;for(Fs=280;Fs<288;++Fs)xs[Fs]=8;var Cs=new gs(32);for(Fs=0;Fs<32;++Fs)Cs[Fs]=5;var Is=Os(xs,9),Ms=Os(Cs,5),As=function(e){return(e/8|0)+(7&e&&1)},Ds=function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof vs?vs:e instanceof ms?ms:gs)(n-t);return r.set(e.subarray(t,n)),r},Ls=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},js=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Ns=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return[new gs(0),0];if(1==i){var o=new gs(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],u=n[1],l=0,c=1,d=2;for(n[0]={s:-1,f:a.f+u.f,l:a,r:u};c!=i-1;)a=n[n[l].f<n[d].f?l++:d++],u=n[l!=c&&n[l].f<n[d].f?l++:d++],n[c++]={s:-1,f:a.f+u.f,l:a,r:u};var h=s[0].s;for(r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var f=new vs(h+1),p=$s(n[c-1],f,0);if(p>t){r=0;var g=0,v=p-t,m=1<<v;for(s.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<i;++r){var _=s[r].s;if(!(f[_]>t))break;g+=m-(1<<p-f[_]),f[_]=t}for(g>>>=v;g>0;){var y=s[r].s;f[y]<t?g-=1<<t-f[y]++-1:++r}for(;r>=0&&g;--r){var b=s[r].s;f[b]==t&&(--f[b],++g)}p=t}return[new gs(f),p]},$s=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},qs=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new vs(++t),r=0,i=e[0],s=1,o=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[a]}return[n.subarray(0,r),t]},Bs=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Us=function(e,t,n){var r=n.length,i=As(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var s=0;s<r;++s)e[i+s+4]=n[s];return 8*(i+4+r)},Hs=function(e,t,n,r,i,s,o,a,u,l,c){Ls(t,c++,n),++i[256];for(var d=Ns(i,15),h=d[0],f=d[1],p=Ns(s,15),g=p[0],v=p[1],m=qs(h),_=m[0],y=m[1],b=qs(g),w=b[0],k=b[1],S=new vs(19),E=0;E<_.length;++E)S[31&_[E]]++;for(E=0;E<w.length;++E)S[31&w[E]]++;for(var R=Ns(S,7),P=R[0],F=R[1],T=19;T>4&&!P[bs[T-1]];--T);var O,x,C,I,M=l+5<<3,A=Bs(i,xs)+Bs(s,Cs)+o,D=Bs(i,h)+Bs(s,g)+o+14+3*T+Bs(S,P)+(2*S[16]+3*S[17]+7*S[18]);if(M<=A&&M<=D)return Us(t,c,e.subarray(u,u+l));if(Ls(t,c,1+(D<A)),c+=2,D<A){O=Os(h,f),x=h,C=Os(g,v),I=g;var L=Os(P,F);for(Ls(t,c,y-257),Ls(t,c+5,k-1),Ls(t,c+10,T-4),c+=14,E=0;E<T;++E)Ls(t,c+3*E,P[bs[E]]);c+=3*T;for(var j=[_,w],N=0;N<2;++N){var $=j[N];for(E=0;E<$.length;++E){var q=31&$[E];Ls(t,c,L[q]),c+=P[q],q>15&&(Ls(t,c,$[E]>>>5&127),c+=$[E]>>>12)}}}else O=Is,x=xs,C=Ms,I=Cs;for(E=0;E<a;++E)if(r[E]>255){q=r[E]>>>18&31,js(t,c,O[q+257]),c+=x[q+257],q>7&&(Ls(t,c,r[E]>>>23&31),c+=_s[q]);var B=31&r[E];js(t,c,C[B]),c+=I[B],B>3&&(js(t,c,r[E]>>>5&8191),c+=ys[B])}else js(t,c,O[r[E]]),c+=x[r[E]];return js(t,c,O[256]),c+x[256]},Ws=new ms([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Vs=function(){for(var e=new ms(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),zs=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Gs(e,t){void 0===t&&(t={});var n=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Vs[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}}(),r=e.length;n.p(e);var i,s=function(e,t,n,r,i){return function(e,t,n,r,i,s){var o=e.length,a=new gs(r+o+5*(1+Math.floor(o/7e3))+i),u=a.subarray(r,a.length-i),l=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var d=c+65535;d<o?l=Us(u,l,e.subarray(c,d)):(u[c]=s,l=Us(u,l,e.subarray(c,o)))}else{for(var h=Ws[t-1],f=h>>>13,p=8191&h,g=(1<<n)-1,v=new vs(32768),m=new vs(g+1),_=Math.ceil(n/3),y=2*_,b=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<y)&g},w=new ms(25e3),k=new vs(288),S=new vs(32),E=0,R=0,P=(c=0,0),F=0,T=0;c<o;++c){var O=b(c),x=32767&c,C=m[O];if(v[x]=C,m[O]=x,F<=c){var I=o-c;if((E>7e3||P>24576)&&I>423){l=Hs(e,u,0,w,k,S,R,P,T,c-T,l),P=E=R=0,T=c;for(var M=0;M<286;++M)k[M]=0;for(M=0;M<30;++M)S[M]=0}var A=2,D=0,L=p,j=x-C&32767;if(I>2&&O==b(c-j))for(var N=Math.min(f,I)-1,$=Math.min(32767,c),q=Math.min(258,I);j<=$&&--L&&x!=C;){if(e[c+A]==e[c+A-j]){for(var B=0;B<q&&e[c+B]==e[c+B-j];++B);if(B>A){if(A=B,D=j,B>N)break;var U=Math.min(j,B-2),H=0;for(M=0;M<U;++M){var W=c-j+M+32768&32767,V=W-v[W]+32768&32767;V>H&&(H=V,C=W)}}}j+=(x=C)-(C=v[x])+32768&32767}if(D){w[P++]=268435456|Es[A]<<18|Rs[D];var z=31&Es[A],G=31&Rs[D];R+=_s[z]+ys[G],++k[257+z],++S[G],F=c+A,++E}else w[P++]=e[c],++k[e[c]]}}l=Hs(e,u,s,w,k,S,R,P,T,c-T,l)}return Ds(a,0,r+As(l)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)}(e,t,10+((i=t).filename&&i.filename.length+1||0),8),o=s.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&zs(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(s,t),zs(s,o-8,n.d()),zs(s,o-4,r),s}var Ks,Js=!!Wt||!!Ht,Ys="text/plain",Qs=function(e,t){var n=pt(e.split("?"),2),r=n[0],i=n[1],s=ut({},t);null==i||i.split("&").forEach((function(e){var t=pt(e.split("="),1)[0];delete s[t]}));var o=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",i=[];return Zt(e,(function(e,r){Tt(e)||Tt(r)||"undefined"===r||(t=encodeURIComponent(e instanceof File?e.name:e.toString()),n=encodeURIComponent(r),i[i.length]=n+"="+t)})),i.join(r)}(s);return o=o?(i?i+"&":"")+o:i,"".concat(r,"?").concat(o)},Xs=function(e){return"data="+encodeURIComponent("string"==typeof e?e:JSON.stringify(e))},Zs=function(e){var t=e.data,n=e.compression;if(t){if(n===un.GZipJS){var r=Gs(function(e,t){var n=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new gs(e.length+(e.length>>>1)),i=0,s=function(e){r[i++]=e},o=0;o<n;++o){if(i+5>r.length){var a=new gs(i+8+(n-o<<1));a.set(r),r=a}var u=e.charCodeAt(o);u<128?s(u):u<2048?(s(192|u>>>6),s(128|63&u)):u>55295&&u<57344?(s(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++o))>>>18),s(128|u>>>12&63),s(128|u>>>6&63),s(128|63&u)):(s(224|u>>>12),s(128|u>>>6&63),s(128|63&u))}return Ds(r,0,i)}(JSON.stringify(t)),{mtime:0});return{contentType:Ys,body:new Blob([r],{type:Ys})}}if(n===un.Base64){var i=function(e){var t,n,r,i,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,u=0,l="",c=[];if(!e)return e;e=function(e){var t,n,r,i,s="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var o=e.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),xt(a)||(n>t&&(s+=e.substring(t,n)),s+=a,t=n=i+1)}return n>t&&(s+=e.substring(t,e.length)),s}(e);do{t=(s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,n=s>>12&63,r=s>>6&63,i=63&s,c[u++]=o.charAt(t)+o.charAt(n)+o.charAt(r)+o.charAt(i)}while(a<e.length);switch(l=c.join(""),e.length%3){case 1:l=l.slice(0,-2)+"==";break;case 2:l=l.slice(0,-1)+"="}return l}(JSON.stringify(t));return{contentType:"application/x-www-form-urlencoded",body:Xs(i)}}return{contentType:"application/json",body:JSON.stringify(t)}}},eo=["retriesPerformedSoFar"],to=function(){function e(t){var n=this;ct(this,e),ft(this,"isPolling",!1),ft(this,"pollIntervalMs",3e3),ft(this,"queue",[]),this.instance=t,this.queue=[],this.areWeOnline=!0,!Tt(Dt)&&"onLine"in Dt.navigator&&(this.areWeOnline=Dt.navigator.onLine,Dt.addEventListener("online",(function(){n.areWeOnline=!0,n.flush()})),Dt.addEventListener("offline",(function(){n.areWeOnline=!1})))}return ht(e,[{key:"retriableRequest",value:function(e){var t=this,n=e.retriesPerformedSoFar,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eo);It(n)&&n>0&&(r.url=Qs(r.url,{retry_count:n})),this.instance._send_request(ut(ut({},r),{},{callback:function(e){var i;200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=n?n:0)<10?t.enqueue(ut({},r)):null===(i=r.callback)||void 0===i||i.call(r,e)}}))}},{key:"enqueue",value:function(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n,r,i,s,o,a=(n=t,r=3e3*Math.pow(2,n),i=r/2,s=Math.min(18e5,r),o=(Math.random()-.5)*(s-i),Math.ceil(s+o)),u=Date.now()+a;this.queue.push({retryAt:u,requestOptions:e});var l="Enqueued failed request for retry in ".concat(a);navigator.onLine||(l+=" (Browser is offline)"),Jt.warn(l),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var e=this;this.poller&&clearTimeout(this.poller),this.poller=setTimeout((function(){e.areWeOnline&&e.queue.length>0&&e.flush(),e.poll()}),this.pollIntervalMs)}},{key:"flush",value:function(){var e=Date.now(),t=[],n=this.queue.filter((function(n){return n.retryAt<e||(t.push(n),!1)}));if(this.queue=t,n.length>0){var r,i=_t(n);try{for(i.s();!(r=i.n()).done;){var s=r.value.requestOptions;this.retriableRequest(s)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"unload",value:function(){this.poller&&(clearTimeout(this.poller),this.poller=void 0);var e,t=_t(this.queue);try{for(t.s();!(e=t.n()).done;){var n=e.value.requestOptions;try{this.instance._send_request(ut(ut({},n),{},{transport:"sendBeacon"}))}catch(r){Jt.error(r)}}}catch(r){t.e(r)}finally{t.f()}this.queue=[]}}]),e}(),no=1800,ro=function(){function e(t,n,r,i){ct(this,e),ft(this,"_sessionIdChangedHandlers",[]),this.config=t,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||Kn,this._windowIdGenerator=i||Kn;var s=t.persistence_name||t.token,o=t.session_idle_timeout_seconds||no;if(It(o)?o>no?Jt.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):o<60&&Jt.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(Jt.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),o=no),this._sessionTimeoutMs=1e3*Math.min(Math.max(o,60),no),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var a=ar.parse(this._window_id_storage_key),u=ar.parse(this._primary_window_exists_storage_key);a&&!u?this._windowId=a:ar.remove(this._window_id_storage_key),ar.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return ht(e,[{key:"onSessionId",value:function(e){var t=this;return Tt(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){t._sessionIdChangedHandlers=t._sessionIdChangedHandlers.filter((function(t){return t!==e}))}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&ar.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&ar.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?ar.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,t,n){e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register(ft({},kn,[t,e,n])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[kn];return Et(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;null==Dt||Dt.addEventListener("beforeunload",(function(){e._canUseSessionStorage()&&ar.remove(e._primary_window_exists_storage_key)}))}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),n=pt(this._getSessionId(),3),r=n[0],i=n[1],s=n[2],o=this._getWindowId(),a=s&&s>0&&Math.abs(t-s)>864e5,u=!1,l=!i,c=!e&&Math.abs(t-r)>this._sessionTimeoutMs;l||c||a?(i=this._sessionIdGenerator(),o=this._windowIdGenerator(),Jt.info("[SessionId] new session ID generated",{sessionId:i,windowId:o,changeReason:{noSessionId:l,activityTimeout:c,sessionPastMaximumLength:a}}),s=t,u=!0):o||(o=this._windowIdGenerator(),u=!0);var d=0===r||!e||a?t:r,h=0===s?(new Date).getTime():s;return this._setWindowId(o),this._setSessionId(i,d,h),u&&this._sessionIdChangedHandlers.forEach((function(e){return e(i,o)})),{sessionId:i,windowId:o,sessionStartTimestamp:h}}}]),e}();!function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"}(Ks||(Ks={}));var io="i.posthog.com",so=function(){function e(t){ct(this,e),ft(this,"_regionCache",{}),this.instance=t}return ht(e,[{key:"apiHost",get:function(){return this.instance.config.api_host.trim().replace(/\/$/,"")}},{key:"uiHost",get:function(){var e;return null===(e=this.instance.config.ui_host)||void 0===e?void 0:e.replace(/\/$/,"")}},{key:"region",get:function(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=Ks.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=Ks.EU:this._regionCache[this.apiHost]=Ks.CUSTOM),this._regionCache[this.apiHost]}},{key:"endpointFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&(t="/"===t[0]?t:"/".concat(t)),"ui"===e)return(this.uiHost||this.apiHost.replace(".".concat(io),".posthog.com"))+t;if(this.region===Ks.CUSTOM)return this.apiHost+t;var n=io+t;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(n);case"api":return"https://".concat(this.region,".").concat(n)}}}]),e}(),oo=ht((function e(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:["error"];ct(this,e),this.name="posthog-js",this.setupOnce=function(e){e((function(e){var o,a,u,l,c;if("*"!==s&&!s.includes(e.level)||!t.__loaded)return e;e.tags||(e.tags={});var d=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));e.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(e.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=(null===(o=e.exception)||void 0===o?void 0:o.values)||[],f={$exception_message:(null===(a=h[0])||void 0===a?void 0:a.value)||e.message,$exception_type:null===(u=h[0])||void 0===u?void 0:u.type,$exception_personURL:d,$sentry_event_id:e.event_id,$sentry_exception:e.exception,$sentry_exception_message:(null===(l=h[0])||void 0===l?void 0:l.value)||e.message,$sentry_exception_type:null===(c=h[0])||void 0===c?void 0:c.type,$sentry_tags:e.tags,$level:e.level};return n&&r&&(f.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+e.event_id),t.capture("$exception",f),e}))}}));var ao=function(){function e(t){ct(this,e),this._instance=t}return ht(e,[{key:"doPageView",value:function(){var e,t=this._previousScrollProperties();return this._currentPath=null!==(e=null==Dt?void 0:Dt.location.pathname)&&void 0!==e?e:"",this._instance.scrollManager.resetContext(),t}},{key:"doPageLeave",value:function(){return this._previousScrollProperties()}},{key:"_previousScrollProperties",value:function(){var e=this._currentPath,t=this._instance.scrollManager.getContext();if(!e||!t)return{};var n=t.maxScrollHeight,r=t.lastScrollY,i=t.maxScrollY,s=t.maxContentHeight,o=t.lastContentY,a=t.maxContentY;return Tt(n)||Tt(r)||Tt(i)||Tt(s)||Tt(o)||Tt(a)?{}:(n=Math.ceil(n),r=Math.ceil(r),i=Math.ceil(i),s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),{$prev_pageview_pathname:e,$prev_pageview_last_scroll:r,$prev_pageview_last_scroll_percentage:n<=1?1:uo(r/n,0,1),$prev_pageview_max_scroll:i,$prev_pageview_max_scroll_percentage:n<=1?1:uo(i/n,0,1),$prev_pageview_last_content:o,$prev_pageview_last_content_percentage:s<=1?1:uo(o/s,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:s<=1?1:uo(a/s,0,1)})}}]),e}();function uo(e,t,n){return Math.max(t,Math.min(e,n))}var lo={icontains:function(e){return!!Dt&&Dt.location.href.toLowerCase().indexOf(e.toLowerCase())>-1},regex:function(e){return!!Dt&&function(e,t){return!!function(e){try{new RegExp(e)}catch(t){return!1}return!0}(t)&&new RegExp(t).test(e)}(Dt.location.href,e)},exact:function(e){return(null==Dt?void 0:Dt.location.href)===e}},co=function(){function e(t){ct(this,e),this.instance=t}return ht(e,[{key:"afterDecideResponse",value:function(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}},{key:"loadIfEnabled",value:function(){var e=this,t=null==Gt?void 0:Gt.extendPostHogWithSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||t||dn(this.instance.requestRouter.endpointFor("assets","/static/surveys.js"),(function(t){if(t)return Jt.error("Could not load surveys script",t);Gt.extendPostHogWithSurveys(e.instance)}))}},{key:"getSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return e([]);var r=this.instance.get_property(Tn);if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:function(n){var r;if(200!==n.statusCode||!n.json)return e([]);var i=n.json.surveys||[];return null===(r=t.instance.persistence)||void 0===r||r.register(ft({},Tn,i)),e(i)}})}},{key:"getActiveMatchingSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys((function(n){var r=n.filter((function(e){return!(!e.start_date||e.end_date)})).filter((function(e){var t,n,r,i;if(!e.conditions)return!0;var s=null===(t=e.conditions)||void 0===t||!t.url||lo[null!==(n=null===(r=e.conditions)||void 0===r?void 0:r.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url),o=null===(i=e.conditions)||void 0===i||!i.selector||(null==Bt?void 0:Bt.querySelector(e.conditions.selector));return s&&o})).filter((function(e){if(!e.linked_flag_key&&!e.targeting_flag_key)return!0;var n=!e.linked_flag_key||t.instance.featureFlags.isFeatureEnabled(e.linked_flag_key),r=!e.targeting_flag_key||t.instance.featureFlags.isFeatureEnabled(e.targeting_flag_key);return n&&r}));return e(r)}),n)}}]),e}(),ho=function(){function e(t){var n,r,i=this;ct(this,e),ft(this,"serverLimits",{}),ft(this,"lastEventRateLimited",!1),ft(this,"checkForLimiting",(function(e){var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach((function(e){Jt.info("[RateLimiter] ".concat(e||"events"," is quota limited.")),i.serverLimits[e]=(new Date).getTime()+6e4}))}catch(n){return void Jt.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(null==n?void 0:n.message,'"'),{text:t})}})),this.instance=t,this.captureEventsPerSecond=(null===(n=t.config.rate_limiting)||void 0===n?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(r=t.config.rate_limiting)||void 0===r?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.isCaptureClientSideRateLimited(!0)}return ht(e,[{key:"isCaptureClientSideRateLimited",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=(new Date).getTime(),s=null!==(e=null===(t=this.instance.persistence)||void 0===t?void 0:t.get_property(In))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:i};s.tokens+=(i-s.last)/1e3*this.captureEventsPerSecond,s.last=i,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var o=s.tokens<1;return o||r||(s.tokens=Math.max(0,s.tokens-1)),!o||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,null===(n=this.instance.persistence)||void 0===n||n.set_property(In,s),o}},{key:"isServerRateLimited",value:function(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}]),e}(),fo=function(){return ut({initialPathName:(null==Ut?void 0:Ut.pathname)||"",referringDomain:ui.referringDomain()},ui.campaignParams())},po=function(){function e(t,n,r){var i=this;ct(this,e),ft(this,"_onSessionIdCallback",(function(e){var t=i._getStoredProps();if(!t||t.sessionId!==e){var n={sessionId:e,props:i._sessionSourceParamGenerator()};i._persistence.register(ft({},Cn,n))}})),this._sessionIdManager=t,this._persistence=n,this._sessionSourceParamGenerator=r||fo,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return ht(e,[{key:"_getStoredProps",value:function(){return this._persistence.props[Cn]}},{key:"getSessionProps",value:function(){var e,t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}]),e}(),go=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],vo=function(e,t){if(!e)return!1;var n=e.toLowerCase();return go.concat(t||[]).some((function(e){var t=e.toLowerCase();return-1!==n.indexOf(t)}))},mo=function(){function e(){ct(this,e),this.clicks=[]}return ht(e,[{key:"isRageClick",value:function(e,t,n){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&n-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}]),e}(),_o=function(){function e(t){ct(this,e),ft(this,"rageclicks",new mo),ft(this,"_isDisabledServerSide",null),ft(this,"_initialized",!1),this.instance=t}return ht(e,[{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&this._setupListeners()}},{key:"isEnabled",get:function(){return!!this.instance.config.__preview_heatmaps}},{key:"getAndClearBuffer",value:function(){var e=this.buffer;return this.buffer=void 0,e}},{key:"_setupListeners",value:function(){var e=this;Dt&&Bt&&(cn(Bt,"click",(function(t){return e._onClick(t||(null==Dt?void 0:Dt.event))}),!1,!0),cn(Bt,"mousemove",(function(t){return e._onMouseMove(t||(null==Dt?void 0:Dt.event))}),!1,!0),this._initialized=!0)}},{key:"_getProperties",value:function(e,t){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),s=function(e,t,n){for(var r=e;r&&!bi(r,"body");){if(r===n)return!1;if(tn(t,null==Dt?void 0:Dt.getComputedStyle(r).position))return!0;r=Ei(r)}return!1}(e.target,["fixed","sticky"],i);return{x:e.clientX+(s?0:r),y:e.clientY+(s?0:n),target_fixed:s,type:t}}},{key:"_onClick",value:function(e){var t,n=this._getProperties(e,"click");null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(ut(ut({},n),{},{type:"rageclick"})),this._capture(n)}},{key:"_onMouseMove",value:function(e){var t=this;clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((function(){t._capture(t._getProperties(e,"mousemove"))}),500)}},{key:"_capture",value:function(e){if(Dt){var t=Dt.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}}}]),e}(),yo=function(){function e(t){var n=this;ct(this,e),ft(this,"_updateScrollData",(function(){var e,t,r,i;n.context||(n.context={});var s=n.scrollElement(),o=n.scrollY(),a=s?Math.max(0,s.scrollHeight-s.clientHeight):0,u=o+((null==s?void 0:s.clientHeight)||0),l=(null==s?void 0:s.scrollHeight)||0;n.context.lastScrollY=Math.ceil(o),n.context.maxScrollY=Math.max(o,null!==(e=n.context.maxScrollY)&&void 0!==e?e:0),n.context.maxScrollHeight=Math.max(a,null!==(t=n.context.maxScrollHeight)&&void 0!==t?t:0),n.context.lastContentY=u,n.context.maxContentY=Math.max(u,null!==(r=n.context.maxContentY)&&void 0!==r?r:0),n.context.maxContentHeight=Math.max(l,null!==(i=n.context.maxContentHeight)&&void 0!==i?i:0)})),this.instance=t}return ht(e,[{key:"getContext",value:function(){return this.context}},{key:"resetContext",value:function(){var e=this.context;return setTimeout(this._updateScrollData,0),e}},{key:"startMeasuringScrollPosition",value:function(){null==Dt||Dt.addEventListener("scroll",this._updateScrollData,!0),null==Dt||Dt.addEventListener("scrollend",this._updateScrollData,!0),null==Dt||Dt.addEventListener("resize",this._updateScrollData)}},{key:"scrollElement",value:function(){if(!this.instance.config.scroll_root_selector)return null==Dt?void 0:Dt.document.documentElement;var e,t=_t(Et(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector]);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=null==Dt?void 0:Dt.document.querySelector(n);if(r)return r}}catch(i){t.e(i)}finally{t.f()}}},{key:"scrollY",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return Dt&&(Dt.scrollY||Dt.pageYOffset||Dt.document.documentElement.scrollTop)||0}},{key:"scrollX",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return Dt&&(Dt.scrollX||Dt.pageXOffset||Dt.document.documentElement.scrollLeft)||0}}]),e}(),bo=function(){function e(){ct(this,e),ft(this,"events",{}),this.events={}}return ht(e,[{key:"on",value:function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){n.events[e]=n.events[e].filter((function(e){return e!==t}))}}},{key:"emit",value:function(e,t){var n,r=_t(this.events[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t)}catch(o){r.e(o)}finally{r.f()}var i,s=_t(this.events["*"]||[]);try{for(s.s();!(i=s.n()).done;)(0,i.value)(e,t)}catch(o){s.e(o)}finally{s.f()}}}]),e}(),wo="$copy_autocapture";function ko(e,t){return t.length>e?t.slice(0,e)+"...":t}var So,Eo,Ro=function(){function e(t){ct(this,e),ft(this,"_initialized",!1),ft(this,"_isDisabledServerSide",null),ft(this,"rageclicks",new mo),ft(this,"_elementsChainAsString",!1),this.instance=t}return ht(e,[{key:"config",get:function(){var e,t=Pt(this.instance.config.autocapture)?this.instance.config.autocapture:{};return t.url_allowlist=null===(e=t.url_allowlist)||void 0===e?void 0:e.map((function(e){return new RegExp(e)})),t}},{key:"_addDomEventHandlers",value:function(){var e=this;if(this.isBrowserSupported()){if(Dt&&Bt){var t=function(t){t=t||(null==Dt?void 0:Dt.event);try{e._captureEvent(t)}catch(n){Jt.error("Failed to capture event",n)}},n=function(t){t=t||(null==Dt?void 0:Dt.event),e._captureEvent(t,wo)};cn(Bt,"submit",t,!1,!0),cn(Bt,"change",t,!1,!0),cn(Bt,"click",t,!1,!0),this.config.capture_copied_text&&(cn(Bt,"copy",n,!1,!0),cn(Bt,"cut",n,!1,!0))}}else Jt.info("Disabling Automatic Event Collection because this browser is not supported")}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}},{key:"afterDecideResponse",value:function(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register(ft({},gn,!!e.autocapture_opt_out)),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}},{key:"isEnabled",get:function(){var e,t,n=null===(e=this.instance.persistence)||void 0===e?void 0:e.props[gn],r=this._isDisabledServerSide;if(xt(r)&&!Mt(n)&&!this.instance.config.advanced_disable_decide)return!1;var i=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!i}},{key:"_previousElementSibling",value:function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!yi(t));return t}},{key:"_getAugmentPropertiesFromElement",value:function(e){if(!Ri(e))return{};var t={};return Zt(e.attributes,(function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),r=e.value;n&&r&&Mi(r)&&(t[n]=r)}})),t}},{key:"_getPropertiesFromElement",value:function(e,t,n){var r,i=e.tagName.toLowerCase(),s={tag_name:i};Si.indexOf(i)>-1&&!n&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?s.$el_text=ko(1024,Ai(e)):s.$el_text=ko(1024,_i(e)));var o=vi(e);o.length>0&&(s.classes=o.filter((function(e){return""!==e})));var a=null===(r=this.config)||void 0===r?void 0:r.element_attribute_ignorelist;Zt(e.attributes,(function(n){var r;if((!Pi(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==a||!a.includes(n.name))&&!t&&Mi(n.value)&&(r=n.name,!Ot(r)||"_ngcontent"!==r.substring(0,10)&&"_nghost"!==r.substring(0,7))){var i=n.value;"class"===n.name&&(i=gi(i).join(" ")),s["attr__"+n.name]=ko(1024,i)}}));for(var u=1,l=1,c=e;c=this._previousElementSibling(c);)u++,c.tagName===e.tagName&&l++;return s.nth_child=u,s.nth_of_type=l,s}},{key:"_getDefaultProperties",value:function(e){return{$event_type:e,$ce_version:1}}},{key:"_getEventTarget",value:function(e){return Tt(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}},{key:"_captureEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(this.isEnabled){var r,i=this._getEventTarget(e);wi(i)&&(i=i.parentNode||null),"$autocapture"===n&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!==(r=this.rageclicks)&&void 0!==r&&r.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");var s=n===wo;if(i&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!Dt||!e||bi(e,"html")||!yi(e))return!1;if(null!=n&&n.url_allowlist){var s=Dt.location.href,o=n.url_allowlist;if(o&&!o.some((function(e){return s.match(e)})))return!1}if(null!=n&&n.dom_event_allowlist){var a=n.dom_event_allowlist;if(a&&!a.some((function(e){return t.type===e})))return!1}for(var u=!1,l=[e],c=!0,d=e;d.parentNode&&!bi(d,"body");)if(ki(d.parentNode))l.push(d.parentNode.host),d=d.parentNode.host;else{if(!(c=Ei(d)))break;if(r||Si.indexOf(c.tagName.toLowerCase())>-1)u=!0;else{var h=Dt.getComputedStyle(c);h&&"pointer"===h.getPropertyValue("cursor")&&(u=!0)}l.push(c),d=c}if(!function(e,t){var n=null==t?void 0:t.element_allowlist;if(Tt(n))return!0;var r,i=_t(e);try{var s=function(){var e=r.value;if(n.some((function(t){return e.tagName.toLowerCase()===t})))return{v:!0}};for(i.s();!(r=i.n()).done;){var o=s();if("object"===lt(o))return o.v}}catch(a){i.e(a)}finally{i.f()}return!1}(l,n))return!1;if(!function(e,t){var n=null==t?void 0:t.css_selector_allowlist;if(Tt(n))return!0;var r,i=_t(e);try{var s=function(){var e=r.value;if(n.some((function(t){return e.matches(t)})))return{v:!0}};for(i.s();!(r=i.n()).done;){var o=s();if("object"===lt(o))return o.v}}catch(a){i.e(a)}finally{i.f()}return!1}(l,n))return!1;var f=Dt.getComputedStyle(e);if(f&&"pointer"===f.getPropertyValue("cursor")&&"click"===t.type)return!0;var p=e.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Si.indexOf(p)>-1||"true"===e.getAttribute("contenteditable"))}}(i,e,this.config,s,s?["copy","cut"]:void 0)){for(var o,a,u=[i],l=i;l.parentNode&&!bi(l,"body");)ki(l.parentNode)?(u.push(l.parentNode.host),l=l.parentNode.host):(u.push(l.parentNode),l=l.parentNode);var c,d=[],h={},f=!1;if(Zt(u,(function(e){var n=Ri(e);"a"===e.tagName.toLowerCase()&&(c=e.getAttribute("href"),c=n&&Mi(c)&&c),tn(vi(e),"ph-no-capture")&&(f=!0),d.push(t._getPropertiesFromElement(e,t.instance.config.mask_all_element_attributes,t.instance.config.mask_all_text));var r=t._getAugmentPropertiesFromElement(e);en(h,r)})),this.instance.config.mask_all_text||("a"===i.tagName.toLowerCase()||"button"===i.tagName.toLowerCase()?d[0].$el_text=Ai(i):d[0].$el_text=_i(i)),c&&(d[0].attr__href=c),f)return!1;var p=en(this._getDefaultProperties(e.type),this._elementsChainAsString?{$elements_chain:Li(d)}:{$elements:d},null!==(o=d[0])&&void 0!==o&&o.$el_text?{$el_text:null===(a=d[0])||void 0===a?void 0:a.$el_text}:{},h);if(n===wo){var g,v=mi(null==Dt||null===(g=Dt.getSelection())||void 0===g?void 0:g.toString()),m=e.type||"clipboard";if(!v)return!1;p.$selected_content=v,p.$copy_type=m}return this.instance.capture(n,p),!0}}}},{key:"isBrowserSupported",value:function(){return Rt(null==Bt?void 0:Bt.querySelectorAll)}}]),e}(),Po={},Fo=function(){},To="posthog",Oo=!Js&&-1===(null==zt?void 0:zt.indexOf("MSIE"))&&-1===(null==zt?void 0:zt.indexOf("Mozilla")),xo=function(){var e,t,n;return{api_host:"https://us.i.posthog.com",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(t=null==Bt?void 0:Bt.location,n=null==t?void 0:t.hostname,!!Ot(n)&&"herokuapp.com"!==n.split(".").slice(-2).join(".")),persistence:"localStorage+cookie",persistence_name:"",loaded:Fo,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:Ut&&Ot(null==Ut?void 0:Ut.search)&&-1!==Ut.search.indexOf("__posthog_debug=true")||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==Dt||null===(e=Dt.location)||void 0===e?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:function(e){var t="Bad HTTP status: "+e.statusCode+" "+e.text;Jt.error(t)},get_device_id:function(e){return e},_onCapture:Fo,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"always"}},Co=function(e){var t={};Tt(e.process_person)||(t.person_profiles=e.process_person),Tt(e.xhr_headers)||(t.request_headers=e.xhr_headers),Tt(e.cookie_name)||(t.persistence_name=e.cookie_name),Tt(e.disable_cookie)||(t.disable_persistence=e.disable_cookie);var n=en({},t,e);return Et(e.property_blacklist)&&(Tt(e.property_denylist)?n.property_denylist=e.property_blacklist:Et(e.property_denylist)?n.property_denylist=[].concat(gt(e.property_blacklist),gt(e.property_denylist)):Jt.error("Invalid value for property_denylist config: "+e.property_denylist)),n},Io=function(){function e(){ct(this,e),ft(this,"__forceAllowLocalhost",!1)}return ht(e,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){Jt.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),e}(),Mo=function(){function e(){var t=this;ct(this,e),ft(this,"webPerformance",new Io),ft(this,"_debugEventEmitter",new bo),this.config=xo(),this.decideEndpointWasHit=!1,this.SentryIntegration=oo,this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.featureFlags=new Bn(this),this.toolbar=new fs(this),this.scrollManager=new yo(this),this.pageViewManager=new ao(this),this.surveys=new co(this),this.rateLimiter=new ho(this),this.requestRouter=new so(this),this.people={set:function(e,n,r){var i=Ot(e)?ft({},e,n):e;t.setPersonProperties(i),null==r||r({})},set_once:function(e,n,r){var i=Ot(e)?ft({},e,n):e;t.setPersonProperties(void 0,i),null==r||r({})}},this.on("eventCaptured",(function(e){return Jt.info("send",e)}))}return ht(e,[{key:"init",value:function(t,n,r){if(r&&r!==To){var i,s=null!==(i=Po[r])&&void 0!==i?i:new e;return s._init(t,n,r),Po[r]=s,Po[To][r]=s,s}return this._init(t,n,r)}},{key:"_init",value:function(e){var t,n,r,i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(Tt(e)||Ot(r=e)&&0===r.trim().length)return Jt.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Jt.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;if(this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(en({},xo(),Co(s),{name:o,token:e})),this.compression=s.disable_compression?void 0:un.Base64,this.persistence=new ci(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new ci(ut(ut({},this.config),{},{persistence:"sessionStorage"})),this._requestQueue=new ps((function(e){return i._send_request(e)})),this._retryQueue=new to(this),this.__request_queue=[],this.sessionManager=new ro(this.config,this.persistence),this.sessionPropsManager=new po(this.sessionManager,this.persistence),this.sessionRecording=new ls(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new Ro(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new _o(this),this.heatmaps.startIfEnabled(),yt.DEBUG=yt.DEBUG||this.config.debug,this._gdpr_init(),void 0!==(null===(t=s.bootstrap)||void 0===t?void 0:t.distinctID)){var a,u,l=this.config.get_device_id(Kn()),c=null!==(a=s.bootstrap)&&void 0!==a&&a.isIdentifiedID?l:s.bootstrap.distinctID;this.persistence.set_property(xn,null!==(u=s.bootstrap)&&void 0!==u&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:c})}if(this._hasBootstrappedFeatureFlags()){var d,h,f=Object.keys((null===(d=s.bootstrap)||void 0===d?void 0:d.featureFlags)||{}).filter((function(e){var t,n;return!(null===(t=s.bootstrap)||void 0===t||null===(n=t.featureFlags)||void 0===n||!n[e])})).reduce((function(e,t){var n,r;return e[t]=(null===(n=s.bootstrap)||void 0===n||null===(r=n.featureFlags)||void 0===r?void 0:r[t])||!1,e}),{}),p=Object.keys((null===(h=s.bootstrap)||void 0===h?void 0:h.featureFlagPayloads)||{}).filter((function(e){return f[e]})).reduce((function(e,t){var n,r,i,o;return null!==(n=s.bootstrap)&&void 0!==n&&null!==(r=n.featureFlagPayloads)&&void 0!==r&&r[t]&&(e[t]=null===(i=s.bootstrap)||void 0===i||null===(o=i.featureFlagPayloads)||void 0===o?void 0:o[t]),e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:f,featureFlagPayloads:p})}if(!this.get_distinct_id()){var g=this.config.get_device_id(Kn());this.register_once({distinct_id:g,$device_id:g},""),this.persistence.set_property(xn,"anonymous")}return null==Dt||null===(n=Dt.addEventListener)||void 0===n||n.call(Dt,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),s.segment?function(e,t){var n=e.config.segment;if(!n)return t();!function(e,t){var n=e.config.segment;if(!n)return t();var r=function(n){var r=function(){return n.anonymousId()||Kn()};e.config.get_device_id=r,n.id()&&(e.register({distinct_id:n.id(),$device_id:r()}),e.persistence.set_property(xn,"identified")),t()},i=n.user();"then"in i&&Rt(i.then)?i.then((function(e){return r(e)})):r(i)}(e,(function(){n.register(function(e){Promise&&Promise.resolve||Jt.warn("This browser does not have Promise support, and can not use the segment integration");var t=function(t,n){var r;if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||e.reset(),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(e.register({distinct_id:t.event.userId}),e.reloadFeatureFlags());var i=e._calculate_event_properties(n,null!==(r=t.event.properties)&&void 0!==r?r:{});return t.event.properties=Object.assign({},i,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(e){return t(e,e.event.event)},page:function(e){return t(e,"$pageview")},identify:function(e){return t(e,"$identify")},screen:function(e){return t(e,"$screen")}}}(e)).then((function(){t()}))}))}(this,(function(){return i._loaded()})):this._loaded(),Rt(this.config._onCapture)&&this.on("eventCaptured",(function(e){return i.config._onCapture(e.event,e)})),this}},{key:"_afterDecideResponse",value:function(e){var t,n,r,i;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=tn(e.supportedCompression,un.GZipJS)?un.GZipJS:tn(e.supportedCompression,un.Base64)?un.Base64:void 0),null!==(t=e.analytics)&&void 0!==t&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),null===(n=this.sessionRecording)||void 0===n||n.afterDecideResponse(e),null===(r=this.autocapture)||void 0===r||r.afterDecideResponse(e),null===(i=this.surveys)||void 0===i||i.afterDecideResponse(e)}},{key:"_loaded",value:function(){var e=this,t=this.config.advanced_disable_decide;t||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){Jt.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((function(){Bt&&e.capture("$pageview",{title:Bt.title},{send_instantly:!0})}),1),t||(new cs(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.enable())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||Xt(this.__request_queue,(function(t){return e._send_retriable_request(t)})),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_handle_unload",value:function(){var e,t;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_send_request",value:function(e){var t,n,r=this;this.__loaded&&(Oo?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Qs(e.url,{ip:this.config.ip?1:0}),e.headers=this.config.request_headers,e.compression="best-available"===e.compression?this.compression:e.compression,t=ut(ut({},e),{},{callback:function(t){var n,i,s;r.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null===(i=(s=r.config).on_request_error)||void 0===i||i.call(s,t)),null===(n=e.callback)||void 0===n||n.call(e,t)}}),(n=ut({},t)).timeout=n.timeout||6e4,n.url=Qs(n.url,{_:(new Date).getTime().toString(),ver:yt.LIB_VERSION,compression:n.compression}),"sendBeacon"===n.transport&&null!=qt&&qt.sendBeacon?function(t){var n=Qs(t.url,{beacon:"1"});try{var r,i=null!==(r=Zs(t))&&void 0!==r?r:{},s=i.contentType,o=i.body,a="string"==typeof o?new Blob([o],{type:s}):o;qt.sendBeacon(n,a)}catch(e){}}(n):"fetch"===n.transport&&Ht?function(t){var n,r,i=null!==(n=Zs(t))&&void 0!==n?n:{},s=i.contentType,o=i.body,a=new Headers;Zt(a,(function(e,t){a.append(t,e)})),s&&a.append("Content-Type",s);var u=t.url,l=null;if(Vt){var c=new Vt;l={signal:c.signal,timeout:setTimeout((function(){return c.abort()}),t.timeout)}}Ht(u,{method:(null==t?void 0:t.method)||"GET",headers:a,keepalive:"POST"===t.method,body:o,signal:null===(r=l)||void 0===r?void 0:r.signal}).then((function(n){return n.text().then((function(r){var i,s={statusCode:n.status,text:r};if(200===n.status)try{s.json=JSON.parse(r)}catch(e){Jt.error(e)}null===(i=t.callback)||void 0===i||i.call(t,s)}))})).catch((function(e){var n;Jt.error(e),null===(n=t.callback)||void 0===n||n.call(t,{statusCode:0,text:e})})).finally((function(){return l?clearTimeout(l.timeout):null}))}(n):Wt||!Bt?function(t){var n,r=new Wt;r.open(t.method||"GET",t.url,!0);var i=null!==(n=Zs(t))&&void 0!==n?n:{},s=i.contentType,o=i.body;Zt(t.headers,(function(e,t){r.setRequestHeader(t,e)})),s&&r.setRequestHeader("Content-Type",s),t.timeout&&(r.timeout=t.timeout),r.withCredentials=!0,r.onreadystatechange=function(){if(4===r.readyState){var n,i={statusCode:r.status,text:r.responseText};if(200===r.status)try{i.json=JSON.parse(r.responseText)}catch(e){}null===(n=t.callback)||void 0===n||n.call(t,i)}},r.send(o)}(n):function(e){var t;if(Bt){var n=Bt.createElement("script");n.type="text/javascript",n.async=!0,n.defer=!0,n.src=e.url;var r=Bt.getElementsByTagName("script")[0];null===(t=r.parentNode)||void 0===t||t.insertBefore(n,r)}}(n)))}},{key:"_send_retriable_request",value:function(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}},{key:"_execute_array",value:function(e){var t,n=this,r=[],i=[],s=[];Xt(e,(function(e){e&&(t=e[0],Et(t)?s.push(e):Rt(e)?e.call(n):Et(e)&&"alias"===t?r.push(e):Et(e)&&-1!==t.indexOf("capture")&&Rt(n[t])?s.push(e):i.push(e))}));var o=function(e,t){Xt(e,(function(e){if(Et(e[0])){var n=t;Zt(e,(function(e){n=n[e[0]].apply(n,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(i,this),o(s,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,t,n){var r;if(!(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue))return Jt.uninitializedWarning("posthog.capture");if(!ns(this))if(null!=n&&n.skip_client_rate_limiting||!this.rateLimiter.isCaptureClientSideRateLimited())if(!Tt(e)&&Ot(e)){if(!zt||this.config.opt_out_useragent_filter||!vo(zt,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&(this.sessionPersistence.update_campaign_params(),this.persistence.set_initial_campaign_params()),this.config.save_referrer&&(this.sessionPersistence.update_referrer_info(),this.persistence.set_initial_referrer_info());var i={uuid:Kn(),event:e,properties:this._calculate_event_properties(e,t||{})};if(null==n||!n._noHeatmaps){var s,o=null===(s=this.heatmaps)||void 0===s?void 0:s.getAndClearBuffer();o&&(i.properties.$heatmap_data=o)}(null==n?void 0:n.$set)&&(i.$set=null==n?void 0:n.$set);var a=this._calculate_set_once_properties(null==n?void 0:n.$set_once);a&&(i.$set_once=a),(i=function(e,t){return n=e,r=function(e){return Ot(e)&&!xt(t)?e.slice(0,t):e},i=new Set,function e(t,n){return t!==Object(t)?r?r(t):t:i.has(t)?void 0:(i.add(t),Et(t)?(s=[],Xt(t,(function(t){s.push(e(t))}))):(s={},Zt(t,(function(t,n){i.has(t)||(s[n]=e(t,n))}))),s);var s}(n);var n,r,i}(i,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=(null==n?void 0:n.timestamp)||new Date,Tt(null==n?void 0:n.timestamp)||(i.properties.$event_time_override_provided=!0,i.properties.$event_time_override_system_time=new Date);var u=ut(ut({},i.properties.$set),i.$set);Ft(u)||this.setPersonPropertiesForFlags(u),this._debugEventEmitter.emit("eventCaptured",i);var l={method:"POST",url:null!==(r=null==n?void 0:n._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:i,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this._send_retriable_request(l):this._requestQueue.enqueue(l),i}}else Jt.error("No event name provided to posthog.capture");else Jt.critical("This capture call is ignored due to client rate limiting.")}},{key:"_addCaptureHook",value:function(e){this.on("eventCaptured",(function(t){return e(t.event)}))}},{key:"_calculate_event_properties",value:function(e,t){if(!this.persistence||!this.sessionPersistence)return t;var n=this.persistence.remove_event_timer(e),r=ut({},t);if(r.token=this.config.token,"$snapshot"===e){var i=ut(ut({},this.persistence.properties()),this.sessionPersistence.properties());return r.distinct_id=i.distinct_id,r}var s=ui.properties();if(this.sessionManager){var o=this.sessionManager.checkAndGetSessionAndWindowId(),a=o.sessionId,u=o.windowId;r.$session_id=a,r.$window_id=u}if(this.requestRouter.region===Ks.CUSTOM&&(r.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===e||"$pageleave"===e||"$autocapture"===e)){var l=this.sessionPropsManager.getSessionProps();r=en(r,l)}if(!this.config.disable_scroll_properties){var c={};"$pageview"===e?c=this.pageViewManager.doPageView():"$pageleave"===e&&(c=this.pageViewManager.doPageLeave()),r=en(r,c)}if("$pageview"===e&&Bt&&(r.title=Bt.title),!Tt(n)){var d=(new Date).getTime()-n;r.$duration=parseFloat((d/1e3).toFixed(3))}zt&&this.config.opt_out_useragent_filter&&(r.$browser_type=vo(zt,this.config.custom_blocked_useragents)?"bot":"browser"),(r=en({},s,this.persistence.properties(),this.sessionPersistence.properties(),r)).$is_identified=this._isIdentified(),Et(this.config.property_denylist)?Zt(this.config.property_denylist,(function(e){delete r[e]})):Jt.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var h=this.config.sanitize_properties;return h&&(r=h(r,e)),r.$process_person_profile=this._hasPersonProcessing(),r}},{key:"_calculate_set_once_properties",value:function(e){if(!this.persistence||!this._hasPersonProcessing())return e;var t=en({},this.persistence.get_initial_props(),e||{});return Ft(t)?void 0:t}},{key:"register",value:function(e,t){var n;null===(n=this.persistence)||void 0===n||n.register(e,t)}},{key:"register_once",value:function(e,t,n){var r;null===(r=this.persistence)||void 0===r||r.register_once(e,t,n)}},{key:"register_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}},{key:"unregister",value:function(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}},{key:"unregister_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}},{key:"_register_single",value:function(e,t){this.register(ft({},e,t))}},{key:"getFeatureFlag",value:function(e,t){return this.featureFlags.getFeatureFlag(e,t)}},{key:"getFeatureFlagPayload",value:function(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(n){return t}}},{key:"isFeatureEnabled",value:function(e,t){return this.featureFlags.isFeatureEnabled(e,t)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}},{key:"getEarlyAccessFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}},{key:"on",value:function(e,t){return this._debugEventEmitter.on(e,t)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var t,n;return null!==(t=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(e))&&void 0!==t?t:function(){}}},{key:"getSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}},{key:"getActiveMatchingSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}},{key:"identify",value:function(e,t,n){if(!this.__loaded||!this.persistence)return Jt.uninitializedWarning("posthog.identify");if(It(e)&&(e=e.toString(),Jt.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))Jt.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==r&&e!==this.get_property(fn)&&(this.unregister(fn),this.register({distinct_id:e}));var s="anonymous"===(this.persistence.get_property(xn)||"anonymous");e!==r&&s?(this.persistence.set_property(xn,"identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(r)):(t||n)&&this.setPersonProperties(t,n),e!==r&&(this.reloadFeatureFlags(),this.unregister(On))}}else Jt.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}},{key:"group",value:function(e,t,n){if(e&&t){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:ut(ut({},r),{},ft({},e,t))}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags(ft({},e,n))),r[e]===t||n||this.reloadFeatureFlags()}}else Jt.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,t)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var t,n,r,i;if(!this.__loaded)return Jt.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");null===(t=this.persistence)||void 0===t||t.clear(),null===(n=this.sessionPersistence)||void 0===n||n.clear(),null===(r=this.persistence)||void 0===r||r.set_property(xn,"anonymous"),null===(i=this.sessionManager)||void 0===i||i.resetSessionId();var o=this.config.get_device_id(Kn());this.register_once({distinct_id:o,$device_id:e?o:s},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var t=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=t.sessionId,r=t.sessionStartTimestamp,i=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(null!=e&&e.withTimestamp&&r){var s,o=null!==(s=e.timestampLookBack)&&void 0!==s?s:10;if(!r)return i;var a=Math.max(Math.floor(((new Date).getTime()-r)/1e3)-o,0);i+="?t=".concat(a)}return i}},{key:"alias",value:function(e,t){return e===this.get_property(hn)?(Jt.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Tt(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(fn,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(Jt.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}},{key:"set_config",value:function(e){var t,n,r,i,s=ut({},this.config);Pt(e)&&(en(this.config,Co(e)),null===(t=this.persistence)||void 0===t||t.update_config(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new ci(ut(ut({},this.config),{},{persistence:"sessionStorage"})),tr.is_supported()&&"true"===tr.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(yt.DEBUG=!0),null===(n=this.sessionRecording)||void 0===n||n.startIfEnabledOrStop(),null===(r=this.autocapture)||void 0===r||r.startIfEnabled(),null===(i=this.heatmaps)||void 0===i||i.startIfEnabled(),this.surveys.loadIfEnabled())}},{key:"startSessionRecording",value:function(e){if(null!=e&&e.sampling){var t,n,r=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId();null===(n=this.persistence)||void 0===n||n.register(ft({},Sn,!0)),Jt.info("Session recording started with sampling override for session: ",null==r?void 0:r.sessionId)}this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}},{key:"getSessionProperty",value:function(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}},{key:"toString",value:function(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:To;return t!==To&&(t=To+"."+t),t}},{key:"_isIdentified",value:function(){var e,t;return"identified"===(null===(e=this.persistence)||void 0===e?void 0:e.get_property(xn))||"identified"===(null===(t=this.sessionPersistence)||void 0===t?void 0:t.get_property(xn))}},{key:"_hasPersonProcessing",value:function(){var e,t,n,r;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&Ft(this.getGroups())&&(null===(e=this.persistence)||void 0===e||null===(t=e.props)||void 0===t||!t[fn])&&(null===(n=this.persistence)||void 0===n||null===(r=n.props)||void 0===r||!r[Dn]))}},{key:"_requirePersonProcessing",value:function(e){return"never"===this.config.person_profiles?(Jt.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(Dn,!0),!0)}},{key:"_gdpr_init",value:function(){"localStorage"===this.config.opt_out_capturing_persistence_type&&tr.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!Zn.get("ph_optout")||(Zn.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var t,n,r,i,s;if(e&&e.clear_persistence)r=!0;else{if(!e||!e.enable_persistence)return;r=!1}this.config.disable_persistence||(null===(t=this.persistence)||void 0===t?void 0:t.disabled)===r||null===(i=this.persistence)||void 0===i||i.set_disabled(r),this.config.disable_persistence||(null===(n=this.sessionPersistence)||void 0===n?void 0:n.disabled)===r||null===(s=this.sessionPersistence)||void 0===s||s.set_disabled(r)}},{key:"_gdpr_call_func",value:function(e,t){return t=en({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},t||{}),tr.is_supported()||"localStorage"!==t.persistence_type||(t.persistence_type="cookie"),e(this.config.token,{capture:t.capture,captureEventName:t.capture_event_name,captureProperties:t.capture_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieExpiration:t.cookie_expiration,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=en({enable_persistence:!0},e||{}),this._gdpr_call_func(Gi,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var t=en({clear_persistence:!0},e||{});this._gdpr_call_func(Ki,t),this._gdpr_update_persistence(t)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(Ji,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(Yi,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var t=en({enable_persistence:!0},null!=e?e:{});this._gdpr_call_func(Qi,t),this._gdpr_update_persistence(t)}},{key:"debug",value:function(e){!1===e?(null==Dt||Dt.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==Dt||Dt.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),e}();!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=on(e.prototype[t[n]])}(Mo,["identify"]),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(So||(So={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(Eo||(Eo={}));var Ao,Do=(Ao=Po[To]=new Mo,function(){function e(){e.done||(e.done=!0,Oo=!1,Zt(Po,(function(e){e._dom_loaded()})))}null!=Bt&&Bt.addEventListener&&("complete"===Bt.readyState?e():Bt.addEventListener("DOMContentLoaded",e,!1)),Dt&&cn(Dt,"load",e,!0)}(),Ao);const Lo="analytics:batchEventNames",jo="phc_GDjwotW3KHI0SgY928miUIOMOvyXlDe5VOD0tzkvi1M",No="phc_hzA3aWlsO64mFH1VodQTlYASVMJX0zz26GaiS8D7ye8",$o=864e5,qo="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",Bo=!!localStorage.getItem("disableAnalytics"),Uo=(null==(e=window.m)?void 0:e.globals.isProduction)||!1;let Ho=null;const Wo=new w("tab.missingPosthogHost",1e-5);class Vo{constructor(e={}){this.defaults=e}static capture(e,t,n){Xo(e,t,n)}static batchCapture(e,t){Ko(e,t)}static identify(){return Bo?Promise.resolve():Jo().then((e=>{var t,n;let r=null==(n=null==(t=Do.persistence)?void 0:t.props)?void 0:n.$device_id;e&&(Do.identify(e),function(e){if(!localStorage.getItem("posthog:marketingSite:identified")){let t=function(e){"posthog:identified"===e.data&&(localStorage.setItem("posthog:marketingSite:identified",!0),window.removeEventListener("message",t))};window.addEventListener("message",t),Go("distinctId="+e)}}(e),r=e),Do.get_distinct_id()===qo&&r&&Do.register_once({distinct_id:r})}))}static sendBatchEventsIfNeeded(){!function(){let e=localStorage.getObject(Lo)||[];e.forEach((t=>{const n="analytics:"+Ba.toCamelCase(t);let{count:r,firstLoad:i,date:s,properties:o}=zo(n);s!==Ba.getDateString()&&(r>0&&Xo(t,{...o,$time:Math.round(i/1e3),count:r},{timestamp:new Date(i)}),localStorage.removeItem(n),e=e.filter((e=>e!==t)))})),localStorage.setObject(Lo,e)}()}static reset(){return Bo?Promise.resolve():(Do.reset(!0),new Promise((e=>{function t(e){"posthog:reset"===e.data&&n()}function n(){window.removeEventListener("message",t),e()}window.addEventListener("message",t),setTimeout(n,2e3),Go("reset=true")})))}static disableCaptureExceptFeatures(e){Ho=e}static enableCaptureForAllFeatures(){Ho=null}static async getDistinctId(e){const t=await Jo(e);return console.log(t),t}capture(e,t,n){Xo.call(this,e,Object.assign({},this.defaults,t),n)}batchCapture(e,t){Ko(e,t)}}function zo(e){return localStorage.getObject(e)||{date:Ba.getDateString(),count:0,firstLoad:Date.now()}}function Go(e){const t=a.MARKETING_SITE;let n=document.getElementById("analytics-identify");n||(n=document.createElement("iframe"),n.setAttribute("id","analytics-identify"),document.documentElement.appendChild(n)),n.setAttribute("src",t+"posthog?"+e)}function Ko(e,t){const n="analytics:"+Ba.toCamelCase(e);let r=zo(n);r.date!==Ba.getDateString()&&console.warn(`This event (${e}) was dated for a previous day and has not been sent. Previous day's data needs to be sent before being captured for today`),r.properties={...r.properties,...t},r.count+=1,localStorage.setObject(n,r);const i=localStorage.getObject(Lo)||[];i.includes(e)||(i.push(e),localStorage.setObject(Lo,i))}async function Jo(e=Ba.getUserUuid()){if(!e)return null;const t=Ba.uuidToByteArray(e);if(!t)return null;const n=await crypto.subtle.digest("SHA-256",new Uint8Array(t));return new Uint8Array(n).reduce(((e,t)=>{const n=e+t.toString(16).padStart(2,"0");return n===qo?(console.error(new Error("null or undefined id used to generate distinct id. Please ensure null check is functioning.")),null):n}),"")}async function Yo(){let{started_trial_ever:e,paid_for_plus_ever:t,nextUpdate:n=0}=localStorage.getObject("analyticsSubscription")||{};if("never"!==n&&n<Date.now()&&localStorage.getItem("token"))try{const{data:{subscriptionSummary:{trialEnd:n,trialing:r,active:i,subscriptionEnd:s}={}}={}}=await st.get("user/profile?details=1");e=!!n,t=!r&&i||!!s,localStorage.setObject("analyticsSubscription",{nextUpdate:e&&t?"never":Date.now()+$o,started_trial_ever:e,paid_for_plus_ever:t})}catch{return{}}return{started_trial_ever:e,paid_for_plus_ever:t}}function Qo(){const[e,t,n]=m.globals.version.split(".").map((e=>parseInt(e)));let r={};Object.values(rt.experiments).forEach((e=>{r[e.experimentName]=e.variantName}));let i=Object.keys(r).length>0;return{extension_version:m.globals.version,extension_version_major:e,extension_version_minor:t,extension_version_patch:n,in_any_experiment:i,experiments:r}}function Xo(e,t={},n={}){Bo||Ho&&!Ho.includes(t.feature)||async function(){if(!m.models)return{};const e=localStorage.getItem("email"),t=localStorage.getItem("token"),n=Ba.getProduct();return{product:n,has_email:!!e&&m.isLoggedIn(),has_token:!!t,is_internal:(null==e?void 0:e.includes("@momentumdash.com"))||!1,is_admin:["Team","Community"].includes(n)&&m.models.teamInfo.get("team").userIsAdmin,organization_id:["Team","Community"].includes(n)?m.models.teamInfo.get("id"):null,...await Yo(),...Qo()}}().then((r=>{!function(e,t){m.devTools&&m.devTools.getFeatureDebug("instrumentation")&&console.log("📈 "+e,t)}(e,t),Do.capture(e,Object.assign({$set:r,source:"extension",is_paid_event:!1},Qo(),t),Object.assign({timestamp:new Date},n))}))}Bo||Promise.all([async function(e=Uo){if(!e)return a.POSTHOG_DEV;try{const e=await h("posthog.host");if(e)return`https://${e}`}catch(ln){console.error(ln)}return a.POSTHOG_PROD}(),async function(e=Uo){return e?await h("posthog.apiKey").catch(console.error)||No:jo}()]).then((([e,t])=>{t&&e?Do.init(t,{api_host:e,disable_session_recording:!0,autocapture:!1,capture_pageview:!1,loaded(){Vo.identify()}}):Wo.error("Error initializing analytics. api key: "+t+". host: "+e+".")}));const Zo=["xhrQueue","idMap","syncedDb:clocks","syncedDb:countdowns","syncedDb:metrics","syncedDb:onboardingSteps","syncedDb:links","syncedDb:focus","syncedDb:notes","syncedDb:tabs","syncedDb:pomodoro","syncedDb:siteBlockerGroups","syncedDb:siteBlockerWebsites","syncedDb:streaks","analyticsQueue","notificationsQueue","keyValueStorage","keyValueDb:misc","keyValueDb:timestamp","syncedDb:main.data.userSubscriptionSummary"],ea="serviceWorker:failedUpdated:details",ta="data:collection:accepted",na="login:data",ra=Object.freeze(Object.defineProperty({__proto__:null,clearIndexedDb:()=>Promise.allSettled(Zo.map((e=>{if(e.includes(".")){const[t,n,r]=e.split(".");if(!t||!r||!n)return Promise.resolve();const i=indexedDB.open(t);i.onerror=()=>Promise.resolve(),i.onsuccess=()=>{const e=i.result;return e.objectStoreNames.contains(n)?new Promise(((t,i)=>{const s=e.transaction([n],"readwrite").objectStore(n).delete(r);s.onsuccess=t,s.onerror=i})):Promise.resolve()}}return new Promise(((t,n)=>{const r=indexedDB.deleteDatabase(e);r.onsuccess=t,r.onerror=n}))}))),clearLocalStorage:()=>{const e=["api","local-account","local-marketing","client_uuid","weather:forecast","weather:location","debugInstrumentation","notification:safariUpdate:forceVersionCheck","dev-panel:open","dev-panel:active-tab","onboarding:skip",ea,ta].reduce(((e,t)=>{const n=localStorage.getItem(t);return n&&(e[t]=n),e}),{});localStorage.clear(),Object.entries(e).forEach((([e,t])=>{localStorage.setItem(e,t)}))},clearStorage:async()=>{Ba.clearLocalStorage();const e=[Ba.clearIndexedDb()];localStorage.getItem("analyticsDisabled")||e.push(Vo.reset()),await Promise.allSettled(e)},getLocalStorageBool:(e,t=!1)=>{const n=localStorage.getItem(e);return null===n?t:"true"===n},toggleLocalStorageBool:e=>{const t="true"===localStorage[e]?"false":"true";return localStorage[e]=t,"true"===t}},Symbol.toStringTag,{value:"Module"})),ia=Object.freeze(Object.defineProperty({__proto__:null,loadOnboarding:async()=>{const e=()=>m.trigger("onboarding:load");m.modals?e():(m.once("modalContainer:created",e),await m.widgetManager.loadWidget("modal"))}},Symbol.toStringTag,{value:"Module"})),sa=(e,t)=>e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className),oa=Object.freeze(Object.defineProperty({__proto__:null,addClass:(e,t)=>{e.classList?e.classList.add(t):sa(e,t)||(e.className+=" "+t)},domReady:e=>{"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)},hasClass:sa,isInputOrTextAreaActive:()=>{var e,t;return"INPUT"===(null==(e=document.activeElement)?void 0:e.tagName)||"TEXTAREA"===(null==(t=document.activeElement)?void 0:t.tagName)||document.activeElement instanceof HTMLElement&&document.activeElement.isContentEditable},removeClass:(e,t)=>{e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")},removePulseClass:e=>{var t,n;"pulse"!==(null==(t=e.originalEvent)?void 0:t.animationName)&&"pulselight"!==(null==(n=e.originalEvent)?void 0:n.animationName)||$(e.target).removeClass("pulse")},scrollToBottom:e=>{const t=e[0];t&&(t.scrollTop=t.scrollHeight)},setEndOfContentEditable:e=>{let t,n;document.createRange&&(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),n=window.getSelection(),null==n||n.removeAllRanges(),null==n||n.addRange(t))},toggleClassTwice:(e,t)=>{e.toggleClass(t),setTimeout((function(){e.toggleClass(t)}),Ba.mConst("timeToggleClassTwice"))}},Symbol.toStringTag,{value:"Module"})),aa=e=>{const t=void 0===e?new Date:new Date(e);return t.getHours()<Ba.mConst("dateRolloverHour")&&t.setDate(t.getDate()-1),t.getFullYear().toString()+"-"+Ba.twoDigit(t.getMonth()+1)+"-"+Ba.twoDigit(t.getDate())},ua=()=>new Date(aa()+"T16:00:00.000").getDay(),la=e=>{const{days:t,hours:n,minutes:r}=Ba.extractTimeElapsedData(e);return t>0?`${t}d ${n}h`:n>0&&0===r?`${n}h`:n>0?`${n}h ${r.toString().padStart(2,"0")}m`:`${r}m`},ca=Object.freeze(Object.defineProperty({__proto__:null,calcDayMs:(e,t)=>{const n=new Date(e);let r=e.getMilliseconds()-n.setHours(0,0,0,0)-t*Ba.mConst("msPerHour");return r<0&&(r+=Ba.mConst("msPerDay")),r},dateAdd:(e,t,n)=>{let r=new Date(e);function i(){(null==r?void 0:r.getDate())!==e.getDate()&&(null==r||r.setDate(0))}switch(t.toLowerCase()){case"year":r.setFullYear(r.getFullYear()+n),i();break;case"quarter":r.setMonth(r.getMonth()+3*n),i();break;case"month":r.setMonth(r.getMonth()+n),i();break;case"week":r.setDate(r.getDate()+7*n);break;case"day":r.setDate(r.getDate()+n);break;case"hour":r.setTime(r.getTime()+36e5*n);break;case"minute":r.setTime(r.getTime()+6e4*n);break;case"second":r.setTime(r.getTime()+1e3*n);break;default:r=void 0}return r},dateDiffIntegerDays:(e,t)=>{const n=new Date(e.valueOf());return(new Date(t.valueOf()).setHours(0,0,0,0)-n.setHours(0,0,0,0))/Ba.mConst("msPerDay")},dateIsInLast7d:e=>{const t=Ba.dateDiffIntegerDays(m.date(),e);return t>-7&&t<=0},dateIsToday:e=>0===Ba.dateDiffIntegerDays(m.date(),e),dateIsTomorrow:e=>1===Ba.dateDiffIntegerDays(m.date(),e),dateIsYesterday:e=>-1===Ba.dateDiffIntegerDays(m.date(),e),extractTimeElapsedData:e=>{const t=864e5,n=36e5,r=Math.floor(e/t);e-=r*t;const i=Math.floor(e/n);e-=i*n;const s=Math.floor(e/6e4);e-=6e4*s;return{days:r,hours:i,minutes:s,seconds:Math.floor(e/1e3)}},formatMonthDayRelative:(e,t)=>{let n;return n=Ba.dateIsTomorrow(e)?"Tomorrow":Ba.dateIsToday(e)?"Today":Ba.dateIsYesterday(e)?"Yesterday":Ba.getMonthName(e,t)+" "+e.getDate(),n},formatRelativeDate:e=>{let t;return t=Ba.dateIsToday(e)?Ba.formatTime(e):Ba.dateIsInLast7d(e)?Ba.getDayName(e,!0):Ba.getMonthName(e,!0)+" "+e.getDate()+Ba.formatYearRelative(e),t},formatTime:e=>{const t=e.getHours(),n=Ba.twoDigit(e.getMinutes());let r;if(m.models.customization.get("hour12clock")){r=(t%12||12)+":"+n+" "+(t>=12?"PM":"AM")}else r=Ba.twoDigit(t)+":"+n;return r},formatYearRelative:e=>{const t=m.date(),n=e.getFullYear();return n===t.getFullYear()?"":", "+n},getCurrentDayIndex:ua,getDateOnly:e=>e.getFullYear().toString()+"-"+Ba.twoDigit(e.getMonth()+1)+"-"+Ba.twoDigit(e.getDate()),getDateString:aa,getDateStringDayOffset:e=>{const t=24*e*60*60*1e3,n=new Date;return aa(n.setTime(n.getTime()+t))},getDayName:(e,t)=>Ba.mConst(t?"dayNamesShort":"dayNames")[e.getDay()],getDayPart:e=>{const t=e.getHours();let n;return n=t>=Ba.mConst("dateRolloverHour")&&t<12?"morning":t>=12&&t<17?"afternoon":"evening",n},getDaysInMonth:(e,t)=>new Date(e,t+1,0).getDate(),getFriendlyDate:e=>{const t=(e=e instanceof Date?e:new Date(e)).getFullYear()===(new Date).getFullYear()?"":", "+e.getFullYear();return Ba.mConst("monthNamesShort")[e.getMonth()]+" "+e.getDate()+t},getFriendlyDateTime:e=>Ba.getFriendlyDate(e).replace(",","")+", "+Ba.getHoursMinsStr(e).toLowerCase().replace(" ",""),getFriendlyTimeElapsed:e=>{const{hours:t,minutes:n,seconds:r}=Ba.extractTimeElapsedData(e),i=`${t} hour${1!==t?"s":""}`,s=`${n} minute${1!==n?"s":""}`;return t>0&&0===n?i:t>0?`${i} and ${s}`:n>0?s:`${r} second${1!==r?"s":""}`},getFriendlyTimeElapsedSmall:la,getHoursMinsStr:(e,t)=>{void 0===t&&(t=m.models.customization.get("hour12clock"));let n,r,i=e.getHours();return t?(r=" "+(i<12?"AM":"PM"),i>12&&(i-=12),0===i&&(i=12),n=i):(r="",n=Ba.twoDigit(i)),n+":"+Ba.twoDigit(e.getMinutes())+r},getMonthName:(e,t)=>Ba.mConst(t?"monthNamesShort":"monthNames")[e.getMonth()],nightsBetween:(e,t,n)=>{let r=e,i=t;const s=e.valueOf()>=t.valueOf();s&&(r=t,i=e);const o=i.valueOf()-r.valueOf(),a=Ba.calcDayMs(r,n)+o;let u=Math.floor(a/Ba.mConst("msPerDay"));return 0!==u&&s&&(u*=-1),u},parseIsoDatetime:e=>{const t=e.split(/[: T-]/).map(parseFloat);return new Date(t[0],t[1]-1,t[2],t[3]||0,t[4]||0,t[5]||0,0)},toTodaysTime:e=>{var t;const n=m.date(),r=e.indexOf(":");let i=Number(e.substring(0,r));return i=12===i?0:i,n.setHours(i+("p"===(null==(t=e[e.length-2])?void 0:t.toLowerCase())?12:0)),n.setMinutes(parseInt(e.substring(r+1,e.length-2))),n}},Symbol.toStringTag,{value:"Module"})),da=e=>{try{return new URL(e),!0}catch{return!1}},ha=e=>(/^(((f|ht)tps?)|chrome|chrome-extension|chrome-search):\/\//i.test(e)||/^(file:\\|file:\/\/)+/i.test(e)||(e="https://"+e),e),fa=(...e)=>{const t=new URL(window.location.toString());e.forEach((e=>t.searchParams.delete(e)));const n=`${t.searchParams.size>0?"?":""}${t.searchParams.toString()}`,r=`${t.pathname}${n}`;window.history.replaceState({},"",r)},pa=()=>Object.fromEntries(new URLSearchParams(window.location.search)),ga=Object.freeze(Object.defineProperty({__proto__:null,ensureUrlScheme:ha,extendUrlParams:(e,t)=>{const n=new URL(e),r=new URLSearchParams([...Array.from(n.searchParams.entries()),...Object.entries(t)]);return`${n.origin}${n.pathname}?${r.toString()}`},getAndRemoveParamsFromUrl:(...e)=>{const t=pa(),n=e.reduce(((e,n)=>(e[n]=t[n]??"",e)),{});return fa(...e),n},getFavIcon:e=>{try{const t=new URL(e);return"https://www.google.com/s2/favicons?sz=32&domain="+t.origin+t.pathname}catch(ln){return"/img/icon/links-fallback.svg"}},getParamsFromUrl:pa,isUrlLocalFileLink:e=>/^(file:\\|file:\/\/)+/i.test(e),isValidUrl:da,removeUrlParams:fa},Symbol.toStringTag,{value:"Module"})),va=Object.freeze(Object.defineProperty({__proto__:null,getMetaKeyName:e=>{let t;return t=Ba.isMacOs()?"Cmd":Ba.isLinuxOs()?"Meta":"Ctrl",e&&(t=t.toLowerCase()),t},isLinuxOs:()=>navigator.platform.includes("Linux"),isMacOs:()=>navigator.platform.includes("Mac"),isTouchDevice:()=>["iPhone Simulator","iPod Simulator","iPhone","iPod"].includes(navigator.platform)||/iPhone|iPod|iPad|Android/.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,isWindowsOs:()=>navigator.platform.includes("Win")},Symbol.toStringTag,{value:"Module"})),ma=()=>navigator.userAgent.includes("Edg"),_a=()=>"Chrome"===m.globals.platform||"Edge"===m.globals.platform,ya=()=>!!Ba.isChromium()&&!!chrome.extension,ba=()=>"Safari"===m.globals.platform,wa=()=>"Firefox"===m.globals.platform,ka=()=>m.globals.platform,Sa=()=>Ba.isChromium()?window.chrome:window.browser,Ea=()=>{const e=Ra();return e&&e>=122&&!ma()?"chrome://new-tab-page/":"chrome-search://local-ntp/local-ntp.html"},Ra=()=>{const e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(!e)return null;const t=e[2];return t?parseInt(t,10):null},Pa=()=>window.location.href.split("-")[0]||"chrome",Fa=Object.freeze(Object.defineProperty({__proto__:null,bookmarksNotSupported:()=>{const e=Ba.getBrowserName();return["Safari"].includes(e)},getBrowser:Sa,getBrowserName:ka,getChromeNewTabPageUrl:Ea,getChromeVersion:Ra,getCurrentBrowserFromUrl:Pa,isChrome:()=>"Chrome"===m.globals.platform,isChromium:_a,isChromiumExtension:ya,isEdge:ma,isFirefox:wa,isSafari:ba,useAppleAppPayment:()=>Ba.isSafari()},Symbol.toStringTag,{value:"Module"})),Ta=Object.freeze(Object.defineProperty({__proto__:null,getStackTrace:()=>{if(!Error.captureStackTrace)return;const e={stack:void 0};return Error.captureStackTrace(e,Ba.getStackTrace),e.stack},isDev:()=>!m.globals.isProduction,logViaDom:(...e)=>{var t;let n=document.querySelector(".dom-debug-container");n||(n=document.createElement("div"),n.classList.add("dom-debug-container"),Object.assign(n.style,{pointerEvents:"none",padding:"10px",maxHeight:"100vh",overflow:"auto"}),null==(t=document.querySelector(".full"))||t.appendChild(n));const r=document.createElement("div");r.innerText=e.map((e=>String(e))).join(" "),n.appendChild(r)}},Symbol.toStringTag,{value:"Module"})),Oa=()=>{if(localStorage.getItem("token"))return!1;const e=localStorage.getObject("momentum-customization-1");return!!(null==e?void 0:e.displayname)},xa=()=>{let e=localStorage.getItem("user_uuid")||localStorage.getItem("userId");if(e)return e;const t=localStorage.getItem("token");if(!t)return null;const n=g(t);return n?(e=n.user_uuid||n.user_guid,e?e.toLowerCase():null):null},Ca=Object.freeze(Object.defineProperty({__proto__:null,getUserState:()=>{const e=localStorage.getItem("unregistered"),t=m.conditionalFeatures.featureEnabled("team"),n=t&&m.models.teamInfo&&m.models.teamInfo.get("team")&&m.models.teamInfo.get("team").userIsAdmin,r=t&&!n,i=m.conditionalFeatures.featureEnabled("plus")&&!t,s=!(t||e||i);let o;return e?o="unregistered":n?o="teamAdmin":r?o="teamMember":i?o="plus":s&&(o="free"),{state:o,isUnregistered:e,isTeam:t,isTeamAdmin:n,isPlus:i,isTeamMember:r,isFree:s}},getUserUuid:xa,userIsLegacyUnregistered:Oa},Symbol.toStringTag,{value:"Module"})),Ia=Object.freeze(Object.defineProperty({__proto__:null,isTabOrEnter:e=>{const t=e.originalEvent;return(null==t?void 0:t.key)?"Enter"===t.key||"Tab"===t.key:(null==t?void 0:t.code)?"Enter"===t.code||"Tab"===t.code||"NumpadEnter"===t.code:13===e.keyCode||9===e.keyCode}},Symbol.toStringTag,{value:"Module"})),Ma=e=>new Promise((t=>setTimeout(t,e))),Aa=Object.freeze(Object.defineProperty({__proto__:null,delay:Ma,doubleRaf:()=>new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame(e)}))}))},Symbol.toStringTag,{value:"Module"})),Da=e=>e().then((e=>e.default)),La=Object.freeze(Object.defineProperty({__proto__:null,loadModuleDefault:Da,newTabForFileLink:async e=>{await Ba.getBrowser().tabs.create({url:e})}},Symbol.toStringTag,{value:"Module"})),ja=Object.freeze(Object.defineProperty({__proto__:null,betweenInclusive:(e,t,n)=>e>=t&&e<=n,getRandomBoolByFrequency:e=>Math.random()<e,getRandomIntBetween:(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),isNumber:e=>("string"==typeof e&&""!==e||"number"==typeof e)&&!isNaN(+e),shortId:()=>{const e=()=>(46656*Math.random()|0).toString(36),t=e=>("000"+e).slice(-3);return t(e())+t(e())}},Symbol.toStringTag,{value:"Module"})),Na=()=>location.host.includes("localhost:"),$a=(e,t)=>{const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let i=0;i<n.length;i++){if((n[i]??-1)>(r[i]??-1))return 1;if((n[i]??-1)<(r[i]??-1))return-1}return 0},qa=e=>rt.experiments.find((t=>t.experimentName===e)),Ba={...v,...ra,...ia,...oa,...ca,...ga,...va,...Fa,...Ta,..._,...y,...Ca,...Ia,...Aa,...La,...ja,...Object.freeze(Object.defineProperty({__proto__:null,compareVersions:$a,currentVersionIsNewerThan:e=>1===$a(m.globals.version,e),getProduct:()=>{const e=m.models.teamInfo.get("team");return m.conditionalFeatures.featureEnabled("team")&&e?e.type===u.TEAM?"Team":"Community":m.conditionalFeatures.featureEnabled("plus")?"Plus":"Free"},isWebApp:Na,shouldShowIntroduction:()=>!m.models.customization.get("displayname")&&!m.isLoggedIn()||localStorage.getItem("doLoginOnNextLoad")||localStorage.getItem("registrationStatePending")||localStorage.getItem("loginParams")||localStorage.getItem("pendingLoginState")||localStorage.getItem("tokenNeeded")&&!localStorage.getItem("token")},Symbol.toStringTag,{value:"Module"})),...Object.freeze(Object.defineProperty({__proto__:null,filterObject:(e,t)=>Object.fromEntries(Object.entries(e).filter((([,e])=>t(e)))),filterObjectKeysByObject:(e,t)=>Object.keys(t).reduce(((t,n)=>(t[n]=e[n],t)),{}),mergeObjects:(e,t)=>(e=e||{},Object.entries(t).forEach((([t,n])=>e[t]=n)),e)},Symbol.toStringTag,{value:"Module"})),...Object.freeze(Object.defineProperty({__proto__:null,access:(e,...t)=>"function"==typeof e?e.apply(null,[...t]):e,getOppositePosition:e=>{switch(e){case"right":return"left";case"left":return"right";case"top":return"bottom";case"bottom":return"top"}},mConst:e=>{const t=l[e];return void 0===t&&console.warn("constant not found:",e),t}},Symbol.toStringTag,{value:"Module"})),...Object.freeze(Object.defineProperty({__proto__:null,getExperiment:qa},Symbol.toStringTag,{value:"Module"}))};i.config.productionTip=!1;const Ua=new i({created(){this.key="crossTabMessage",this.handlers={},window.addEventListener("storage",this.onStorageEvent)},methods:{sendCrossTabMessage(e,...t){localStorage.setObject(this.key,{eventName:e,payload:[...t]}),localStorage.removeItem(this.key)},addCrossTabMessageListener(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},removeCrossTabMessageListener(e,t){if(e in this.handlers){const n=this.handlers[e].indexOf(t);this.handlers[e].splice(n,1)}},onStorageEvent(e){if(e.key===this.key&&e.newValue){const{eventName:t,payload:n}=JSON.parse(e.newValue);t in this.handlers&&this.handlers[t].forEach((e=>{n&&n.length?e.apply(null,n):e()}))}}}}),Ha=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),Wa=new w("tab.workers.updateFailure"),Va="dataServiceUpdating";class za{constructor(){this.pendingMsgs={},this.serviceWorkerVersionVerified=!1,this.serviceWorkerVersionVerifiedPromise=null,this.resolveServiceWorkerVersionVerifiedPromise=null}sendRecurringCrossTabMessage({msgId:e,handler:t,args:n=[],success:r,failure:i}={}){const s={msgId:e,handler:t,args:n,recurringCrossTab:!0};this.addRecurringCrossTabMessageListener({msgId:e,success:r,failure:i}),this.awaitWorkerReady().then((()=>{this._setMessageTimeout(s),this._sendMessage(s)}))}addRecurringCrossTabMessageListener({msgId:e,success:t,failure:n}={}){function r(t){null==n||n(t),n||console.error(`Unhandled error in ${e}. Error was caught but no failure callback registered`,t)}this.pendingMsgs[e]={resolve:function(e){try{null==t||t(e)}catch(ln){r(ln)}},reject:r,recurringCrossTab:!0}}async sendMessage({handler:e,args:t=[],timeout:n}={},{verifyReady:r=!0}={}){const i={msgId:Ba.uuidv4(),tabId:b,handler:e,args:t};return r&&await this.awaitWorkerReady(),n&&(i.timeout=n),new Promise(((e,t)=>{this.pendingMsgs[i.msgId]={resolve:e,reject:t};const r=n?Math.min(1.2*n,n+3e3):13e3;this._setMessageTimeout(i,r),this._sendMessage(i)}))}_sendMessage(){}_setMessageTimeout(e,t=13e3){const n=this.pendingMsgs[e.msgId];n&&(n.timeoutId=setTimeout((()=>{delete this.pendingMsgs[e.msgId];const t=this._getTimeoutErrorMessage(e.handler);console.error(t,e),n.reject(new Error(t))}),t))}_onMessage(e){const{msgId:t,response:n,error:r,exemptedTabId:i}=e;if(i===b||!(t in this.pendingMsgs))return;const{resolve:s,reject:o,timeoutId:a,recurringCrossTab:u}=this.pendingMsgs[t];r?o(r):s(n),a&&clearTimeout(a),u||delete this.pendingMsgs[t]}_getTimeoutErrorMessage(){}awaitWorkerReady(){return this.serviceWorkerVersionVerifiedPromise||(this.serviceWorkerVersionVerifiedPromise=new Promise((e=>{this.resolveServiceWorkerVersionVerifiedPromise=e,this._verifyVersionMatch()}))),this.serviceWorkerVersionVerifiedPromise}_verifyVersionMatch(){const e={handler:"getVersion",msgId:Ba.uuidv4(),timeout:800};this.sendMessage(e,{verifyReady:!1}).then((e=>{if(e!==t)throw{message:`Service worker updating from version ${e} to ${t}.`,oldVersion:e};Ua.$emit("flashMessage:dismiss",Va),clearTimeout(this.updateTimeoutId),this.serviceWorkerVersionVerified=!0,this.resolveServiceWorkerVersionVerifiedPromise(),this._isFirstSuccessfulConnectionAfterFailure()&&this._saveAndLogFirstSuccessfulConnection()})).catch((e=>{console.warn(e.message||e),e.oldVersion,Ua.$emit("flashMessage",{message:"Updating Momentum…",persist:!0,closeButtonEnabled:!1,id:Va}),this.updateTimeoutId=setTimeout((async()=>{Ua.$emit("flashMessage:dismiss",Va),Ua.$emit("flashMessage",{message:"There was an issue updating Momentum. Please reload the extension to complete the update.",error:!0,closeButtonEnabled:!1,button:{text:"Reload",action:async()=>{await Wa.info("Service worker: extension reload clicked",{userId:Ba.getUserUuid()}),chrome.runtime.reload()}},id:"dataServiceUpdateFailed"});const t=await this._getUpdatedUpdateFailureLoggingDetails(e.oldVersion);Wa.warn("Service worker: major update failed",t),this._saveUpdateFailureTalliesDetails(t),console.error("Service worker major update failed.")}),15e3)}))}_isFirstSuccessfulConnectionAfterFailure(){var e,t,n;const r=this._getUpdateFailureLoggingDetails();return!(null==(t=(e=r.resolvedVersions).includes)?void 0:t.call(e,m.globals.version))&&(null==(n=null==r?void 0:r.affectedVersions)?void 0:n.includes(m.globals.version))}_saveAndLogFirstSuccessfulConnection(){const e=this._getUpdateFailureLoggingDetails();e.resolvedVersions.includes(m.globals.version)||e.resolvedVersions.push(m.globals.version),localStorage.setObject(ea,e),Wa.info("Service Worker: update failure resolved",{userId:Ba.getUserUuid()})}async _isFreshInstall(){const e=await f.get("installDate");return e?e>Date.now()-864e5:null}_getUpdateFailureLoggingDetails(){return localStorage.getObject(ea)||{affectedVersions:[],affectedVersionsTallies:{},totalFailedConnectionAttempts:0,resolvedVersions:[]}}async _getUpdatedUpdateFailureLoggingDetails(e="unspecified"){var n,r;const i=this._getUpdateFailureLoggingDetails();return(n=i.affectedVersionsTallies)[r=m.globals.version]??(n[r]=0),i.affectedVersionsTallies[m.globals.version]++,i.totalFailedConnectionAttempts++,{...i,oldVersion:e,newVersion:t,userId:Ba.getUserUuid(),isFreshInstall:await this._isFreshInstall(),affectedVersions:Object.keys(i.affectedVersionsTallies)}}_saveUpdateFailureTalliesDetails({affectedVersions:e,affectedVersionsTallies:t,totalFailedConnectionAttempts:n,resolvedVersions:r}){localStorage.setObject(ea,{affectedVersions:e,affectedVersionsTallies:t,totalFailedConnectionAttempts:n,resolvedVersions:r})}}class Ga extends za{constructor(){super(),chrome.runtime.onMessage.addListener((e=>{"tabs"===e.target&&this._onMessage(e)}))}_sendMessage(e){e.target="backgroundWorker",chrome.runtime.sendMessage(e)}_getTimeoutErrorMessage(e){return`Message to service worker timed out. Reason: ${this.serviceWorkerVersionVerified?"Message sent but no response received":"Worker version not verified"}. Handler: ${e}`}}class Ka extends za{constructor(){super(),this.updateTimeoutId=null,this.worker=null,this.workerAssignedPromise=null,this.resolveWorkerAssignedPromise=null}assignWorker(e){const t=!!this.worker;this.worker=e,navigator.serviceWorker.addEventListener("message",(e=>this._onMessage(e.data))),this.awaitWorkerReady(),this.resolveWorkerAssignedPromise(),t&&this._verifyVersionMatch()}awaitWorkerAssigned(){return this.workerAssignedPromise||(this.workerAssignedPromise=new Promise((e=>this.resolveWorkerAssignedPromise=e))),this.workerAssignedPromise}async awaitWorkerReady(){return this.awaitWorkerAssigned().then(za.prototype.awaitWorkerReady.bind(this))}_sendMessage(e){this.worker.postMessage(e)}_getTimeoutErrorMessage(e){let t="Message sent but no response received";return this.worker?this.serviceWorkerVersionVerified||(t="Worker version not verified"):t="Worker not assigned",`Message to service worker timed out. Reason: ${t}. Handler: ${e}`}}let Ja;new w("tab.workers"),navigator.serviceWorker&&Na()?(Ja=new Ka,navigator.serviceWorker.register("serviceWorker.js",{type:"module"}).then((()=>{navigator.serviceWorker.ready.then((function(e){function t(n=e.active){return"activated"===n.state&&(Ja.assignWorker(n),n.removeEventListener("statechange",t),!0)}e.addEventListener("updatefound",(()=>{const n=e.installing;n.addEventListener("statechange",(()=>{t(n)&&Ua.$emit("serviceWorker:updated")}))})),e.active?t():e.installing.addEventListener("statechange",t)}))}))):Ja=new Ga;const Ya=Ja;const Qa=new class{constructor(e){this.db=e,this.listeners={}}async saveServerTimestamps(e){const t={};Object.entries(e).forEach((([e,n])=>{t[e]={server:n}}));const n=await this.db.bulkPatch(t);Object.entries(n).forEach((([e,t])=>{var n,r;if(!t)return;const{newValue:i,previousValue:s}=t;(!(null==s?void 0:s.server)||(null==i?void 0:i.server)&&(null==i?void 0:i.server)>s.server)&&(null==(r=(n=this.listeners)[e])||r.call(n))}))}addUpdateListener(e,t){this.listeners[e]=t}async requiresSync(e){const t=await n.get(e);return!t||!t.cache||!t.server||t.cache<t.server}}(n);class Xa{constructor(e,{queryParams:t={},getResponseProperty:n,path:i="",mode:s=r.Sync,queueKey:o}={}){this.type=e,this.queryParams=t,this.getResponseProperty=n,this.path=i,this.mode=s,this.messageBus=Ya,this.queueKey=o??e}get({id:e,path:t=this.path||this.type,mode:n=this.mode,success:i,failure:s,queryParams:o={},retry:a,responseProperty:u=this.getResponseProperty,appendIdToPath:l,timestampKey:c=this.type}){(async()=>{var d;n===r.Timestamp&&(n=await Qa.requiresSync(c)?r.Sync:r.Cache,Qa.addUpdateListener(c,this.refresh.bind(this,{id:e,path:t,queryParams:o,retry:a,responseProperty:u,appendIdToPath:l,timestampKey:c}))),t+=this.buildQueryString((null==(d=this.queryParams)?void 0:d.get)||{},o);const h=[this.type,{id:e,path:t,env:this.getEnv(),mode:n,retry:a,responseProperty:u,appendIdToPath:l,timestampKey:c,queueKey:this.queueKey}];n===r.Server?this.messageBus.sendMessage({handler:"get",args:h}).then(i).catch(s):this.messageBus.sendRecurringCrossTabMessage({msgId:`${this.type}${e?`:${e}`:""}:refreshed`,handler:"get",args:h,success:i,failure:s})})()}refresh({id:e,path:t=this.path||this.type,queryParams:n={},retry:i,responseProperty:s=this.getResponseProperty,appendIdToPath:o,timestampKey:a=this.type}={}){return new Promise(((u,l)=>this.get({id:e,mode:r.Server,path:t,queryParams:n,retry:i,success:u,failure:l,responseProperty:s,appendIdToPath:o,timestampKey:a})))}async create(e,t,{path:n=this.path||this.type,mode:r=this.mode}={}){const i=[this.type,e,t];i.push({path:n,mode:r,env:this.getEnv(),queueKey:this.queueKey}),await this.messageBus.sendMessage({handler:"create",args:i})}async update(e,t,{path:n=this.path||this.type,mode:r=this.mode,queryParams:i={},appendIdToPath:s}={}){var o;const a=this.buildQueryString((null==(o=this.queryParams)?void 0:o.update)||{},i),u=[this.type,e,t];u.push({path:n,mode:r,env:this.getEnv(),queryString:a,appendIdToPath:s,queueKey:this.queueKey}),await this.messageBus.sendMessage({handler:"update",args:u})}async delete(e,{path:t=this.path||this.type,mode:n=this.mode}={}){const r=[this.type,e];r.push({path:t,mode:n,env:this.getEnv(),queueKey:this.queueKey}),await this.messageBus.sendMessage({handler:"delete",args:r})}getEnv(){return{token:localStorage.getItem("token"),clientUuid:localStorage.getItem("client_uuid"),apiUrl:m.globals.urlRootApi,version:m.globals.version,tabId:b}}buildQueryString(...e){const t=e.reduce(((e,t)=>({...t,...e})),{}),n=new URLSearchParams(t).toString();return n?"?"+n:""}}const Za="data:image/svg+xml,%3csvg%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M64%2032C64%2049.6731%2049.6731%2064%2032%2064C14.3269%2064%200%2049.6731%200%2032C0%2014.3269%2014.3269%200%2032%200C49.6731%200%2064%2014.3269%2064%2032ZM28%2046C28%2043.7909%2029.7909%2042%2032%2042C34.2091%2042%2036%2043.7909%2036%2046C36%2048.2091%2034.2091%2050%2032%2050C29.7909%2050%2028%2048.2091%2028%2046ZM32%2015C29.7909%2015%2028%2016.7909%2028%2019V33C28%2035.2091%2029.7909%2037%2032%2037C34.2091%2037%2036%2035.2091%2036%2033V19C36%2016.7909%2034.2091%2015%2032%2015Z'%20/%3e%3c/svg%3e",eu={messageText:"If the problem persists, please ",linkText:"contact us."};class tu{constructor({message:e,id:t=p(),error:n=!1,button:r,buttons:i,persist:s=n,closeButtonEnabled:o=!0===s,contact:a=!!n&&eu,icon:u=(n?Za:void 0),onDismiss:l,description:c,confetti:d}){this.id=t,this.message=e,this.persist=s||4e3,this.closeButtonEnabled=o,u&&(this.icon=u),n&&(this.error=n),r?this.buttons=[r]:i&&(this.buttons=i),l&&(this.onDismiss=l),a&&(this.contact=!0===a?eu:a),c&&(this.description=c),d&&(this.confetti=d)}}const nu=Ya,ru=c([]);function iu(){return ru.value[0]}function su(e){ru.value.push(new tu(e))}function ou(e){Ua.sendCrossTabMessage("flashMessage:dismiss",e),au(e)}function au(e){var t,n;const r=ru.value.findIndex((t=>t.id===e));null==(n=null==(t=ru.value[r])?void 0:t.onDismiss)||n.call(t),~r&&ru.value.splice(r,1)}function uu(e,t,n,r,i,s,o,a){var u="function"==typeof e?e.options:e;return t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),s&&(u._scopeId="data-v-"+s),{exports:e,options:u}}Ua.$on("flashMessage",su),Ua.$on("flashMessage:dismiss",ou),Ua.addCrossTabMessageListener("flashMessage:dismiss",au),nu.addRecurringCrossTabMessageListener({msgId:"flashMessage",success:su});const lu={tabs:{query:e=>new Promise((t=>Sa().tabs.query(e,t))),create:e=>new Promise((t=>Sa().tabs.create(e,t))),update:(e,t)=>new Promise((n=>Sa().tabs.update(e,t,n))),group:e=>new Promise((t=>Sa().tabs.group(e,t))),move:(e,t)=>new Promise((n=>Sa().tabs.move(e,t,n))),moveToWindow:async(e,t)=>{e&&t&&await lu.tabs.move(e,{windowId:t,index:-1})},openUrl:(e,t=!1)=>t?lu.tabs.create({url:e,active:!1}):new Promise((t=>Sa().tabs.update({url:e},t))),getCurrent:()=>new Promise((e=>Sa().tabs.getCurrent(e)))},windows:{create:e=>new Promise((t=>Sa().windows.create(e,t))),remove:e=>new Promise((t=>Sa().windows.remove(e,t))),removeAndWaitForSessionChange:e=>{let t;return Promise.race([new Promise((n=>{t=n,Sa().sessions.onChanged.addListener(t),lu.windows.remove(e)})),(async()=>{throw await Ba.delay(5e3),"No change in chrome sessions, could not get restore key for window or tab"})()]).finally((()=>{Sa().sessions.onChanged.removeListener(t)}))},update:(e,t)=>new Promise((n=>Sa().windows.update(e,t,n))),get:e=>new Promise((t=>Sa().windows.get(e,{},t))),getAll:()=>new Promise((e=>Sa().windows.getAll(e))),getCurrent:()=>new Promise((e=>Sa().windows.getCurrent(e)))},sessions:{restoreWindow:e=>new Promise((t=>Sa().sessions.restore(e,(e=>{(null==e?void 0:e.window)?t(null==e?void 0:e.window):(null==e?void 0:e.tab)?Sa().windows.get(e.tab.windowId||0,{},t):t(void 0)})))),getRecentlyClosedWindowSessionIds:()=>new Promise((e=>Sa().sessions.getRecentlyClosed({},(t=>{const n=[];t.forEach((e=>{var t;"window"in e&&(null==(t=e.window)?void 0:t.sessionId)&&n.push(e.window.sessionId)})),e(n)})))),getLastClosedSessionId:()=>new Promise((e=>Sa().sessions.getRecentlyClosed({maxResults:1},(t=>{var n,r,i,s;const o=(null==(r=null==(n=t[0])?void 0:n.window)?void 0:r.sessionId)||(null==(s=null==(i=t[0])?void 0:i.tab)?void 0:s.sessionId);if(!o)throw new Error("Could not get session ID from closed window");e(o)}))))},permissions:{request:e=>Ba.isFirefox()?Sa().permissions.request({...e}):new Promise((t=>Sa().permissions.request(e,t))),contains:e=>Ba.isFirefox()?Sa().permissions.contains({...e}):new Promise((t=>Sa().permissions.contains(e,t)))},topSites:{get:()=>new Promise((e=>Sa().topSites.get(e)))}};export{Vo as A,Pa as B,ya as C,ta as D,it as E,_a as F,iu as G,ou as H,Qa as I,xa as J,Ha as K,na as L,w as T,Za as _,st as a,Ya as b,Sa as c,ot as d,Ua as e,Xa as f,qa as g,et as h,ba as i,Ma as j,la as k,Da as l,ka as m,uu as n,Ea as o,lu as p,da as q,rt as r,nt as s,b as t,Ba as u,ha as v,wa as w,ua as x,aa as y,Oa as z};