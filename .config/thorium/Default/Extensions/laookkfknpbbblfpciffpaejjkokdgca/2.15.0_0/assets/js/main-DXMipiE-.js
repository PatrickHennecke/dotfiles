import{d as t,a as s,V as i}from"./ResizeSensor-CXS_pGRc.js";import o from"./AppContainer-CpKUTdzh.js";import{S as r}from"./SmoothReflow-B3dWZqEj.js";import{B as e}from"./BaseIcon-CACrCBea.js";import{A as a}from"./AppHeaderControl-BC-AHodD.js";import{u as n,S as p}from"./SubscriptionSummary-Bb_CwKvU.js";import{u as c,r as l,A as u,n as d}from"./promisifiedChrome-CheD9WtZ.js";import"./VueBase-CjPGMLuv.js";import"./environmentVariables-Cy83xda0.js";import"./showAnyway-CbfR58eh.js";import"./reactiveCustomization-CrL2eTrh.js";import"./allComponentsMounted-C3UsG_cA.js";import"./dashboard-CF_jRhAY.js";import"./main--IJuvtTE.js";import"./localStorage-B4mFdj8F.js";import"./preload-helper-D7CfCCEq.js";import"./Logger-Dqn8sDPg.js";import"./migrateLegacyUserMessageHandler-CU6TUnqH.js";import"./timestampDb-sTUCijT1.js";import"./index-CJJH83pl.js";import"./string-KTo4Qfpe.js";import"./arrow-B0GpGOd-.js";import"./icon-weather-reset-D7qA-OAP.js";import"./icon-settings-Bycjf8-G.js";import"./icon-chrome-BdhFuvxf.js";import"./icon-back-arrow-CiRQJ6G-.js";import"./icon-back-D_TFrgyJ.js";import"./icon-check-Vc9B11BJ.js";import"./icon-circle-D-D5U4qS.js";import"./icon-close-BUGl_M7j.js";import"./icon-cog-BFr_Pva7.js";import"./icon-skip-BOkC5L0N.js";import"./icon-trash-DFxJwJNo.js";import"./icon-down-BiHbKN-t.js";import"./icon-edit-CixeXNYx.js";import"./icon-ellipsis-D3jS4u3x.js";import"./icon-error-state-BKQhfBCj.js";import"./icon-heart-v5O7C6eS.js";import"./icon-hide-NFfBhfBx.js";import"./icon-key-BPNRipb3.js";import"./icon-lock-B0ekkj2F.js";import"./icon-next-B4hjdiAA.js";import"./icon-photo-BrwqV1T0.js";import"./icon-pin-BHeOuzvO.js";import"./icon-plus-D4YOesIc.js";import"./icon-profile-B_XWyuTb.js";import"./icon-x-qUCmf2CW.js";import"./icon-skip-intro-BUi8b3Ak.js";import"./icon-tooltip-CN09iXOB.js";import"./icon-visible-on-CM3kpcFN.js";import"./icon-x-caret-half-CZtcH_PM.js";import"./star-rating-CNohptmf.js";import"./pomodoro-circle-Dx_GWql1.js";import"./star-KworSO8x.js";import"./thanks-DfYnO-qW.js";import"./add-COIuonao.js";import"./google-DKPAcOmk.js";import"./arrow-up-1QPpu78M.js";import"./chevron-down-DdbU9YAr.js";import"./pomodoro-DvfTwCi0.js";import"./clocks-DjzskNOU.js";import"./close-D7GCNZxm.js";import"./search-DCqlmJx6.js";import"./folder-CwWTWsnJ.js";import"./switch-EuBTQVVE.js";import"./focus-mode-09pIyYAW.js";import"./storage-YYEO5TB5.js";import"./icon-confetti-Dz2LojDe.js";import"./wind-D3u4taeq.js";import"./sparks-CAw9b6ob.js";import"./secure-B8YP-AML.js";import"./icon-percent-schedule-CA5EI9b7.js";import"./icon-trello-BoqqWb7o.js";import"./icon-clean-rFsPxTtp.js";import"./icon-more-lists-Dg-hN7s6.js";import"./icon-more-fonts-CcfOY0t4.js";import"./icon-focus-stats-keERwXFt.js";import"./icon-easy-access-BZifTR0C.js";import"./icon-top-of-mind-B6EhbCcK.js";import"./icon-flow-5QqmGIWX.js";import"./icon-focused-JrsBbR-K.js";import"./icon-weather-extra-ufLpT_SX.js";import"./icon-spiral-gh4hwZDD.js";import"./icon-happy-place-D1z6CJgM.js";import"./icon-time-sensitive-CP2L3maw.js";import"./icon-hourly-CdMmiQZT.js";import"./icon-infinity-D4yMRoAd.js";import"./icon-integrations-Y-aXZTst.js";import"./icon-kanban-Dodqg7y-.js";import"./icon-personalize-photos-D2M4lLlt.js";import"./icon-personalize-n8qjJGGA.js";import"./icon-photo-match-C2EChNEK.js";import"./icon-random-375DbcwF.js";import"./icon-timezones-DGZoTtaT.js";import"./icon-simplify-BRUtLJYp.js";import"./icon-skip-Bd6EhalI.js";import"./icon-sync-DIH26Y9h.js";const j="plusStatusBanner:trial:dismissed",S="plusStatusBanner:expired:dismissed";var h=(t=>(t.Default="control",t.AddPayment="experimental",t))(h||{});const b={control:"Subscribe to Momentum Plus",experimental:"Add payment method"},y=t("plusStatusBanner",{state:()=>({trialDismissedDate:Number(localStorage.getItem(j)??0),expiredDismissedDate:Number(localStorage.getItem(S)??0)}),getters:{trialVisible(t){const s=n();return s.status===p.TrialingCardless&&s.trialRemainingDays<=2&&!s.hasPaymentMethod&&c.dateDiffIntegerDays(t.trialDismissedDate,Date.now())>=1},expiredVisible(t){const s=n();return[p.ExpiredPlus,p.ExpiredTrial].includes(s.status)&&!t.expiredDismissedDate},bannerVisible(){const t=n();return t.loaded&&!t.loading&&(this.trialVisible||this.expiredVisible)},trialDaysText(){const t=n();return`${t.trialRemainingDays} day${1!==t.trialRemainingDays?"s":""}`}},actions:{dismissTrialBannerForDay(){const t=Date.now();localStorage.setItem(j,String(t)),this.trialDismissedDate=t},dismissExpiredBannerIndefinitely(){const t=Date.now();localStorage.setItem(S,String(t)),this.expiredDismissedDate=t}}}),g=new u({feature:"plus status banner"});const f=d(s({name:"PlusStatusBanner",components:{AppHeaderControl:a,BaseIcon:e,SmoothReflow:r,AppContainer:o},setup:()=>({plusStatusBannerStore:y(),subscriptionSummaryStore:n()}),computed:{ctaTrialButtonExperiment:()=>l.experiments.find((t=>"plus_status_cta_trial_button_experiment"===t.experimentName)),ctaTrialButtonExperimentCopy(){const t=this.ctaTrialButtonExperiment?this.ctaTrialButtonExperiment.variantName:h.Default;return b[t]},expiredStatusCopy(){switch(this.subscriptionSummaryStore.status){case p.ExpiredTrial:return"Your Plus trial has expired";case p.ExpiredPlus:default:return"You've lost access to Plus!"}}},async mounted(){this.subscriptionSummaryStore.loaded||this.subscriptionSummaryStore.loading||await this.subscriptionSummaryStore.refresh(),m.widgetManager.appReady("plus-status-banner")},methods:{openUpgradeModal(){g.capture("add payment clicked",{type:this.subscriptionSummaryStore.status}),m.cmd("modal.open","SUBSCRIBE")},closeBanner(){g.capture("dismissed",{type:this.subscriptionSummaryStore.status}),this.plusStatusBannerStore.trialVisible?this.plusStatusBannerStore.dismissTrialBannerForDay():this.plusStatusBannerStore.expiredVisible&&this.plusStatusBannerStore.dismissExpiredBannerIndefinitely()}}}),(function(){var t=this,s=t._self._c;return t._self._setupProxy,s("smooth-reflow",{attrs:{disabled:t.plusStatusBannerStore.bannerVisible}},[t.plusStatusBannerStore.bannerVisible?s("app-container",{staticClass:"plus-status-banner dark dark-full",attrs:{"app-name":"plus-status-banner","data-test":"plus-status-banner"}},[t.plusStatusBannerStore.trialVisible?[s("span",{staticClass:"status-title"},[t._v(" "+t._s(t.plusStatusBannerStore.trialDaysText)+" remaining in Plus trial â€¢ Don't lose access to Plus! ")]),s("button",{staticClass:"dash-button",attrs:{"data-test":"upgrade"},on:{click:t.openUpgradeModal}},[t._v(t._s(t.ctaTrialButtonExperimentCopy))])]:t.plusStatusBannerStore.expiredVisible?[s("span",{staticClass:"status-title"},[t._v(t._s(t.expiredStatusCopy))]),s("button",{staticClass:"dash-button",attrs:{"data-test":"upgrade"},on:{click:t.openUpgradeModal}},[t._v("Subscribe to access all features")])]:t._e(),s("app-header-control",{attrs:{"data-test":"dismiss"},on:{click:t.closeBanner}},[s("base-icon",{staticClass:"icon close",attrs:{src:"icon-close",size:"11px"}})],1)],2):t._e()],1)}),[],!1,null,"9e9a6756").exports,x=document.querySelector(".region.top-bar"),B=document.createElement("div");x&&x.prepend(B),new i({render:t=>t(f)}).$mount(B);