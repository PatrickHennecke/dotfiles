import{n as s,u as e,p as t}from"./promisifiedChrome-CheD9WtZ.js";import{S as i}from"./SmoothReflow-B3dWZqEj.js";import{_ as o}from"./icon-down-BiHbKN-t.js";import"./timestampDb-sTUCijT1.js";import"./Logger-Dqn8sDPg.js";import"./environmentVariables-Cy83xda0.js";import"./ResizeSensor-CXS_pGRc.js";import"./preload-helper-D7CfCCEq.js";import"./string-KTo4Qfpe.js";import"./allComponentsMounted-C3UsG_cA.js";const r=s({name:"PermissionRequest",components:{SmoothReflow:i},props:{permissionExplanation:{type:String,default:"To use this feature"},widgetName:{type:String,default:"Momentum"},permissions:{type:Object,default:()=>{}},requestImmediately:{type:Boolean,default:!1},resolve:{type:Function,default:()=>{}}},setup:()=>({browser:e.getBrowser()}),data:()=>({browserRequestOpen:!1,contentVisible:!1}),computed:{iconStyling:()=>({top:e.isWindowsOs()||e.isFirefox(),right:e.isFirefox()}),title(){return`${this.widgetName} Requires Additional Permissions`},description(){return`${this.permissionExplanation}, ${this.widgetName} needs additional permissions.`}},created(){this.requestImmediately&&this.requestPermissions()},mounted(){m.widgetManager.hideApps({layer:"permissions"}),this.contentVisible=!0},destroyed(){m.widgetManager.showApps({layer:"permissions"})},methods:{requestPermissions(){this.browserRequestOpen=!0,t.permissions.request(this.permissions).then((s=>this.resolvePermissionRequest(s)),(s=>{console.error(s),this.resolvePermissionRequest(!1)}))},async resolvePermissionRequest(s){this.contentVisible=!1,await this.$nextTick(),this.resolve(s),this.$emit("dismiss")}}},(function(){var s=this,e=s._self._c;return e("div",{staticClass:"permission-overlay dark",attrs:{"data-test":"permission-overlay"}},[e("transition",{attrs:{name:"slide-down-fade",mode:"out-in"}},[s.contentVisible?e("div",{staticClass:"upper"},[e("div",{staticClass:"title"},[s._v(s._s(s.title))]),e("div",{staticClass:"description"},[s._v(s._s(s.description))]),e("smooth-reflow",[s.browserRequestOpen?s._e():e("div",{staticClass:"action-buttons-wrapper"},[e("div",{staticClass:"privacy"},[s._v("We value and protect your privacy. Learn more in our "),e("a",{attrs:{href:"https://momentumdash.com/legal/privacy",target:"_blank"}},[s._v("Privacy Policy.")])]),e("div",{staticClass:"button-row"},[e("div",{staticClass:"dash-button dash-button-neutral",attrs:{"data-test":"deny-permissions"},on:{click:function(e){return s.resolvePermissionRequest(!1)}}},[s._v("Go back")]),e("div",{staticClass:"dash-button dash-button-primary",attrs:{"data-test":"allow-permissions"},on:{click:s.requestPermissions}},[s._v("Continue")])])])]),e("smooth-reflow",{staticClass:"arrow-wrapper",class:s.iconStyling},[s.browserRequestOpen?e("div",[e("div",{staticClass:"icon"},[e("inline-svg",{staticClass:"icon",attrs:{src:o}})],1)]):s._e()])],1):s._e()]),e("div",{staticClass:"center"}),e("div",{staticClass:"lower"})],1)}),[],!1,null,"02d8fec1").exports;export{r as default};