import{V as e}from"./ResizeSensor-CXS_pGRc.js";import{g as t,d as i}from"./onboardingStepCollection-CDnR_iEN.js";import{r as n}from"./promisifiedChrome-CheD9WtZ.js";import"./environmentVariables-Cy83xda0.js";import"./VueBase-CjPGMLuv.js";import"./dashboard-CF_jRhAY.js";import"./main--IJuvtTE.js";import"./localStorage-B4mFdj8F.js";import"./preload-helper-D7CfCCEq.js";import"./Logger-Dqn8sDPg.js";import"./migrateLegacyUserMessageHandler-CU6TUnqH.js";import"./timestampDb-sTUCijT1.js";import"./index-CJJH83pl.js";import"./itemModelMixin-BHakSWl-.js";import"./reactiveCustomization-CrL2eTrh.js";import"./namesMixin-EAvqmdCw.js";import"./itemDataServiceMixins-R3DPkCUM.js";import"./focusModeHelpers-Cqkll3ju.js";import"./arrow-B0GpGOd-.js";import"./LinksService-BV1Om5gI.js";import"./icon-next-B4hjdiAA.js";import"./authService-B5VliZ3K.js";import"./SubscriptionSummary-Bb_CwKvU.js";import"./icon-confetti-Dz2LojDe.js";import"./siteBlockerGroups-1V1XRNi6.js";import"./constants-D-OQQ8lR.js";import"./compareObjects-BF7sSNEf.js";import"./string-KTo4Qfpe.js";const s=new(e.extend({name:"ModalDevPanelManager",data:()=>({experimentMap:t(),definitions:i,pinnedStep:null}),methods:{setStepActive(e,t){const i=()=>m.trigger("modal:show",e,{subStepIndex:t,force:!0});m.modals?i():m.once("modalContainer:created:checkForced",i)},setPinnedStepActiveOnDashLoad({stepId:e,subStepIndex:t,experimentId:i,variantId:s}={}){let p;if(i){const t=this.experimentMap[i],n=t&&t.variants[s];p=n&&n.steps[e]}else p=this.definitions[e];p&&(this.toggleStepPinned(p,{stepId:e,subStepIndex:t,experimentId:i,variantId:s}),n.appsReady?this.setStepActive(p,t):m.once("appsReady",(()=>{this.setStepActive(p,t)})))},toggleStepPinned(e,{stepId:t,subStepIndex:i,experimentId:n,variantId:s}={}){const p=localStorage.getObject("devPanel:pinnedStep");p?this.objectsMatch(p,{stepId:t,subStepIndex:i,experimentId:n,variantId:s})?(this.$set(e,"pinned",!e.pinned),this.pinnedStep=e.pinned?e:null,this.updateSubStepIndex(e,e.pinned?i:void 0),null===this.pinnedStep&&m.trigger("modal:close")):this.objectsMatch((({stepId:e,experimentId:t,variantId:i})=>({stepId:e,experimentId:t,variantId:i}))(p),{stepId:t,experimentId:n,variantId:s})?this.updateSubStepIndex(e,i):(this.pinnedStep&&(this.$set(this.pinnedStep,"pinned",!1),this.updateSubStepIndex(this.pinnedStep,void 0)),this.$set(e,"pinned",!0),this.updateSubStepIndex(e,i),this.pinnedStep=e):(this.$set(e,"pinned",!0),this.pinnedStep=e,this.updateSubStepIndex(e,i)),e.pinned?localStorage.setObject("devPanel:pinnedStep",{stepId:t,subStepIndex:i,experimentId:n,variantId:s}):localStorage.removeItem("devPanel:pinnedStep")},updateSubStepIndex(e,t){void 0===t?this.$delete(e,"pinnedSubStepIndex"):this.$set(e,"pinnedSubStepIndex",t)},objectsMatch:(e,t)=>new Array(...new Set([...Object.keys(e),...Object.keys(t)])).every((i=>e[i]===t[i]))}}));export{s as default};