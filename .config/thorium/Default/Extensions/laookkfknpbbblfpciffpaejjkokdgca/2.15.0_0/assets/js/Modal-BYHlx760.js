import{M as t}from"./ModalBanner-DpVzvVKq.js";import{_ as e}from"./icon-close-BUGl_M7j.js";import{n as s}from"./promisifiedChrome-CheD9WtZ.js";import"./icon-back-D_TFrgyJ.js";import"./timestampDb-sTUCijT1.js";import"./Logger-Dqn8sDPg.js";import"./environmentVariables-Cy83xda0.js";import"./ResizeSensor-CXS_pGRc.js";import"./preload-helper-D7CfCCEq.js";import"./string-KTo4Qfpe.js";const i=s({name:"OnboardingIntro",defaultModalWidth:640,defaultModalHeight:500,components:{ModalBanner:t},props:{id:{type:String,required:!0},nextButtonText:{type:String,default:"Next"},dismissButtonText:{type:String,default:"Dismiss"},showDismissButton:{type:Boolean,default:!1},subSteps:{type:Array,default:null},activeSubStepIndex:{type:Number,default:0},customClass:{type:String,default:""},customWidth:{type:Number,default:null},customHeight:{type:Number,default:null},hideClose:{type:Boolean,default:!1},sidebar:{type:[Object,Function],default:null},transition:{type:String,default:"zoom"},reverseTransition:{type:String,default:""},transitionMode:{type:String,default:"out-in"},swapPrimaryButton:{type:Boolean,default:!1},plans:{type:Object,default:()=>({})},plansError:{type:Boolean,default:!1},sales:{type:Object,default:()=>({})},firstSubStep:{type:Function,default:()=>0}},data:()=>({nippleClass:"",shake:!1,footerVisible:!0,navigatingBack:!1,transitionActive:!1,processing:!1,firstSubStepEntered:!1}),computed:{renderedSubSteps(){const t=[this.activeSubStep];return this.preRenderStep&&this.preRenderStep!==this.activeSubStep&&t.push(this.preRenderStep),t},activeSubStep(){return this.subSteps&&this.subSteps[this.activeSubStepIndex]||null},activeNextButtonText(){return this.processing?"Processing…":this.activeSubStep&&this.activeSubStep.nextButtonText||this.nextButtonText},modalWidth(){return this.activeSubStep.customWidth||this.customWidth||this.$options.defaultModalWidth},modalHeight(){return this.activeSubStep.customHeight||this.customHeight||this.$options.defaultModalHeight},preRenderStep(){return this.subSteps.find((t=>t.preRender))},preRenderComponent(){return this.preRenderStep&&this.preRenderStep.component},stepTransition(){return this.activeSubStepIndex!==this.firstSubStep()||this.navigatingBack||this.firstSubStepEntered?this.navigatingBack&&this.reverseTransition?this.reverseTransition:this.transition:"zoom"},stepTransitionMode(){return this.activeSubStepIndex!==this.firstSubStep()||this.navigatingBack?this.transitionMode:"out-in"},saleBannerActive(){return this.activeSubStep.hasSaleBanner&&!this.$plus&&this.sales&&Object.keys(this.sales).length},isSafari:m.utils.isSafari},watch:{activeSubStepIndex(t,e){this.navigatingBack=t<e},activeSubStep(t){t.showUpgrade&&m.commandManager.beforeExecute("upsell.upgrade"),this.footerVisible=!t.hideFooter}},created(){this.activeSubStep.hideFooter&&(this.footerVisible=!1),m.on("globalEvent:key:enter",this.completeSubStep),m.on("modal:hideFooter",this.hideFooter)},mounted(){this.$apps=document.querySelector(".apps")},destroyed(){m.off("globalEvent:key:enter",this.completeSubStep),m.off("modal:hideFooter",this.hideFooter)},methods:{completeSubStep(t){this.transitionActive||this.$emit("subStepComplete",t)},goToSubStep(t){this.$emit("goToSubStep",t)},upgrade(){this.$emit("upgrade")},dismiss(){this.$emit("dismiss")},shakeContainer(){this.shake=!0,setTimeout((()=>{this.shake=!1}),1e3)},showFooter(){this.footerVisible=!0},hideFooter(){this.footerVisible=!1},beforeSubStepLeave(){this.transitionActive=!0},afterSubStepLeave(){this.$emit("afterSubStepLeave")},beforeSubStepEnter(){this.$emit("beforeSubStepEnter")},afterSubStepEnter(){this.firstSubStepEntered=!0,this.transitionActive=!1},updateProcessingState(t){this.processing=t}}},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"modal-container"},[s("link",{attrs:{"data-n-head":"ssr",rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap"}}),s("div",{staticClass:"modal-overlay",on:{click:t.shakeContainer}}),s("div",{staticClass:"app modal light light-full",class:[{shake:t.shake},t.customClass],style:{"--modal-height":t.modalHeight+"px","--modal-width":t.modalWidth+"px"},attrs:{"data-test":"modal"}},[t.hideClose||t.activeSubStep.hideClose||t.saleBannerActive&&!t.sidebar?t._e():s("div",{staticClass:"icon-wrapper close",on:{click:function(e){return e.stopPropagation(),t.dismiss.apply(null,arguments)}}},[s("inline-svg",{staticClass:"icon icon-close",attrs:{src:e}})],1),s("div",{ref:"main",staticClass:"main"},[s("transition",{attrs:{name:"banner-fade",mode:"out-in"}},[t.saleBannerActive?s("modal-banner",{key:t.activeSubStepIndex,attrs:{"show-close":!t.sidebar&&!t.hideClose&&!t.activeSubStep.hideClose,"show-back":t.activeSubStep.showBackBtn,sales:t.sales},on:{close:t.dismiss,goBack:function(e){return t.goToSubStep(t.activeSubStepIndex-1)}}}):t._e()],1),s("transition",{attrs:{name:t.transition,mode:t.transitionMode}},[s("transition-group",{key:t.preRenderStep?"static":t.activeSubStepIndex,staticClass:"step-container",attrs:{tag:"div",appear:"",name:t.stepTransition,mode:t.stepTransitionMode},on:{"before-leave":t.beforeSubStepLeave,"after-leave":t.afterSubStepLeave,"before-enter":t.beforeSubStepEnter,"after-enter":t.afterSubStepEnter}},t._l(t.renderedSubSteps,(function(e){return s(e.component,t._b({directives:[{name:"show",rawName:"v-show",value:e.component&&e===t.activeSubStep,expression:"subStep.component && subStep === activeSubStep"}],key:t.preRenderStep?e.name:"static",tag:"component",staticClass:"sub-step",class:{"pre-render":t.preRenderStep===e},attrs:{processing:t.processing,plans:t.plans,"plans-error":t.plansError,sales:t.sales,"show-back":!t.saleBannerActive,"transition-active":t.transitionActive,"is-active-step":e===t.activeSubStep},on:{"update:processing":t.updateProcessingState,nextStep:t.completeSubStep,showFooter:t.showFooter,goBack:function(e){return t.goToSubStep(t.activeSubStepIndex-1)}}},"component",e.subStepProps,!1))})),1)],1),s("transition",{attrs:{appear:"",name:"fade",mode:"out-in"}},[t.footerVisible?s("footer",{key:t.activeSubStepIndex,staticClass:"footer",attrs:{"data-test":"footer"}},[s("div",{staticClass:"footer-button-row"},[t.activeSubStep.showUpgrade?s("button",{staticClass:"button",class:{"button-secondary":!t.swapPrimaryButton},attrs:{"data-test":"upgrade-button"},on:{click:t.upgrade}},[t._v("Upgrade to Plus")]):t._e(),s("button",{staticClass:"button next",class:{"button-secondary":t.swapPrimaryButton},attrs:{disabled:t.transitionActive,"data-test":"next"},on:{click:t.completeSubStep}},[t._v(t._s(t.activeNextButtonText))]),t.showDismissButton?s("button",{staticClass:"button button-secondary dismiss",attrs:{disabled:t.transitionActive,"data-test":"dismiss"},on:{click:t.dismiss}},[t._v(t._s(t.dismissButtonText))]):t._e()]),t.activeSubStep.belowButtonMsg?s("div",{staticClass:"below-button-msg"},[t._v(t._s(t.activeSubStep.belowButtonMsg))]):t._e(),s("div",{staticClass:"progress",class:{"hide-progress":t.subSteps.length<=1}},t._l(t.subSteps.length,(function(e){return s("span",{key:e,staticClass:"progress-dot-wrapper",class:{active:e-1===t.activeSubStepIndex},on:{click:function(s){return t.goToSubStep(e-1)}}},[s("span",{staticClass:"dot"},[t._v("•")])])})),0)]):t._e()])],1),t.sidebar?s(t.sidebar,{tag:"component",staticClass:"u--mobile-hide"}):t._e()],1)])}),[],!1,null,"a101ea65").exports;export{i as default};