import{M as e}from"./MaskedOverlay-wuesr0Jl.js";import{n as t,A as s}from"./promisifiedChrome-CheD9WtZ.js";import{S as a}from"./onboardingStepCollection-CDnR_iEN.js";import"./timestampDb-sTUCijT1.js";import"./Logger-Dqn8sDPg.js";import"./environmentVariables-Cy83xda0.js";import"./ResizeSensor-CXS_pGRc.js";import"./preload-helper-D7CfCCEq.js";import"./string-KTo4Qfpe.js";import"./VueBase-CjPGMLuv.js";import"./dashboard-CF_jRhAY.js";import"./main--IJuvtTE.js";import"./localStorage-B4mFdj8F.js";import"./migrateLegacyUserMessageHandler-CU6TUnqH.js";import"./index-CJJH83pl.js";import"./itemModelMixin-BHakSWl-.js";import"./reactiveCustomization-CrL2eTrh.js";import"./namesMixin-EAvqmdCw.js";import"./itemDataServiceMixins-R3DPkCUM.js";import"./focusModeHelpers-Cqkll3ju.js";import"./arrow-B0GpGOd-.js";import"./LinksService-BV1Om5gI.js";import"./icon-next-B4hjdiAA.js";import"./authService-B5VliZ3K.js";import"./SubscriptionSummary-Bb_CwKvU.js";import"./icon-confetti-Dz2LojDe.js";import"./siteBlockerGroups-1V1XRNi6.js";import"./constants-D-OQQ8lR.js";import"./compareObjects-BF7sSNEf.js";const r=t({name:"Tour",components:{MaskedOverlay:e},props:{id:{type:String,required:!0},name:{type:String,default:""},subSteps:{type:Array,default:null},activeSubStepIndex:{type:Number,default:0},plans:{type:Object,default:()=>({})},sales:{type:Object,default:()=>({})},plansError:{type:Boolean,default:!1},onCreated:{type:Function,default:()=>{}},onDestroyed:{type:Function,default:()=>{}},progressVisible:{type:Boolean,default:!0}},setup:()=>({StepState:a}),data:()=>({maskDimensions:[],maskKey:0,maskActive:!1}),computed:{activeSubStepProgressText(){return Object.prototype.hasOwnProperty.call(this.activeSubStep,"progressBarText")?this.activeSubStep.progressBarText:this.activeSubStep.subStepProps.heading},activeSubStepClass(){var e;return this.activeSubStep.class||"sub-step-"+(null==(e=this.activeSubStep.name)?void 0:e.toLowerCase().replaceAll(" ","-"))},activeSubStep(){var e;return(null==(e=this.subSteps)?void 0:e[this.activeSubStepIndex])||null},activeSubComponent(){var e;return(null==(e=this.activeSubStep)?void 0:e.component)||""}},created(){s.disableCaptureExceptFeatures(["onboarding","paywall","upgrade","notifications"]),m.tourActive=!0,this.onCreated()},destroyed(){m.tourActive=!1,this.onDestroyed(),s.enableCaptureForAllFeatures()},methods:{updateMaskDimensions(e){this.maskDimensions=e,this.maskKey+=1}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tour dark dark-full",attrs:{"data-test":"tour"},on:{mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()},click:function(e){e.stopPropagation()}}},[e.progressVisible?t("div",{staticClass:"progress"},e._l(e.subSteps,(function(s,a){return t("div",{key:a,staticClass:"progress-item-wrapper",class:{active:e.activeSubStepIndex===a,disabled:e.activeSubStep.lockProgressBar||s.lockProgressBar},attrs:{"data-test":"progress-btn"},on:{click:function(t){return e.$emit("goToSubStep",a)}}},[t("div",{staticClass:"progress-item"},[e._v(e._s(e.activeSubStepIndex===a?e.activeSubStepProgressText:""))])])})),0):e._e(),t("transition",{attrs:{appear:"",name:"fade",mode:"out-in"},on:{"before-enter":function(t){return e.$emit("beforeSubStepEnter")},leave:function(t){e.maskActive=!1},"after-leave":function(t){return e.$emit("afterSubStepLeave")}}},[t(e.activeSubComponent,e._b({key:e.activeSubStepIndex,tag:"component",class:e.activeSubStepClass,attrs:{plans:e.plans,sales:e.sales,"plans-error":e.plansError,"parent-modal-name":e.name,name:e.activeSubStep.name},on:{dismiss:function(t){return e.$emit("stepComplete",{state:e.StepState.Dismissed})},next:function(t){return e.$emit("subStepComplete")},updateMaskDimensions:e.updateMaskDimensions,maskReady:function(t){e.maskActive=!0}}},"component",e.activeSubStep.subStepProps,!1))],1),t("masked-overlay",{key:e.maskKey,staticClass:"overlay tour-overlay",attrs:{"mask-dimensions":e.maskDimensions,"mask-active":e.maskActive}})],1)}),[],!1,null,"93b76a51").exports;export{r as default};