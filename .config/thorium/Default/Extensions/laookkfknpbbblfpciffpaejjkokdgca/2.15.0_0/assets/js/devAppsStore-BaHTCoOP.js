import{P as e}from"./main-CySkBCZ8.js";import{d as t,w as i,s}from"./ResizeSensor-CXS_pGRc.js";import{useLinksViewStateStore as a}from"./linksViewState-QhwKH6cr.js";import{u as c}from"./links-DdeC1aoW.js";import{u as d}from"./notesViewState-CGTRJxMk.js";import{u as o}from"./notes-ctraUoaH.js";import{u as p,F as n}from"./focusModeInsightsViewState-Dj-ehXEF.js";const r=async e=>{if(!e.loaded)return e.loading?new Promise((t=>{e.$subscribe(((e,i)=>i.loaded&&t()))})):e.refresh()},l=(e,t)=>({resetBeforeViewChange:()=>t.resetBeforeViewChange(),isOpen:()=>t.popupActive,open:async()=>t.popupActive||await t.togglePopup(!0),close:async()=>!t.popupActive||await t.togglePopup(!1),refresh:()=>e.refresh(),loaded:()=>e.loaded}),v=a(),m=c(),w={...l(m,v),views:{links:{setActive:()=>v.setActiveView("list"),isActive:()=>v.popupActive&&"list"===v.activeViewId},add:{setActive:()=>(m.addItem(),v.setActiveView("form")),isActive:()=>v.popupActive&&"form"===v.activeViewId&&!m.activeItemId},edit:{async setActive(e){await r(m),m.editItem(e),await v.setActiveView("form")},isActive:()=>v.popupActive&&"form"===v.activeViewId&&m.activeItemId,selectableItems:()=>m.getUnPinnedItems.map((({id:e,title:t})=>({id:e,name:t})))}}},I=d(),u=o(),A={...l(u,I),refresh:()=>u.refresh(!0),views:{notes:{async setActive(e){e&&await r(u),u.activeItemId=e,await I.setActiveView("list")},isActive:()=>I.popupActive&&"list"===I.activeViewId,selectableItems:()=>Object.values(u.getItems).map((({id:e,preview:t})=>({id:e,name:t})))},deleted:{setActive:()=>I.setActiveView("deleted"),isActive:()=>I.popupActive&&"deleted"===I.activeViewId,selectableItems:()=>Object.values(u.getDeletedItems).map((({id:e,preview:t})=>({id:e,name:t})))}}},f=p(),g={links:w,notes:A,focusModeInsights:{...l({refresh:()=>{},loaded:!0},f),views:{[n.Overview]:{setActive:()=>f.setActiveView(n.Overview),isActive:()=>f.popupActive&&f.activeViewId===n.Overview},[n.Settings]:{setActive:()=>f.setActiveView(n.Settings),isActive:()=>f.popupActive&&f.activeViewId===n.Settings}}}},h=t("devApps",{state(){return{pinned:localStorage.getObject(e)||{appId:null,viewId:null,itemId:null},selectedItems:(t=g,Object.entries(t).reduce(((e,[t,i])=>{const s=Object.entries(i.views).reduce(((e,[t,i])=>(i.selectableItems&&(e[t]=null),e)),{});return Object.keys(s).length&&(e[t]=s),e}),{}))};var t},getters:{loaded:()=>Object.values(g).every((e=>e.loaded()))},actions:{async openView(e,t,i){await g[e].open(),g[e].resetBeforeViewChange(),g[e].views[t].setActive(i)},closeApp:e=>g[e].close(),pinApp(t,i,s){this.pinned.appId=t,this.pinned.viewId=i,localStorage.setObject(e,{appId:t,viewId:i,itemId:s})},clearPinned(){this.pinned={appId:null,viewId:null,itemId:null},localStorage.removeItem(e)},setActiveSelectedItems(){Object.entries(this.selectedItems).forEach((([e,t])=>{Object.keys(t).forEach((i=>{const s=g[e].views[i].selectableItems();this.pinned.appId===e&&this.pinned.viewId===i&&((e,t)=>t.find((t=>t.id===e)))(this.pinned.itemId,s)?t[i]=this.pinned.itemId:s.length&&(t[i]=s[0].id)}))}))}}}),V=h();i(s(V).loaded,(e=>e&&V.setActiveSelectedItems()));const b=Object.freeze(Object.defineProperty({__proto__:null,useDevAppsStore:h},Symbol.toStringTag,{value:"Module"}));export{g as a,b as d,h as u};