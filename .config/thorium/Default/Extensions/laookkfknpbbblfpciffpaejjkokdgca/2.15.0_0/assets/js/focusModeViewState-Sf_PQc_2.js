import{d as e}from"./ResizeSensor-CXS_pGRc.js";import{u as a,e as i}from"./ViewState-CkTFc_ep.js";import{u as t}from"./promisifiedChrome-CheD9WtZ.js";import{F as s,A as o,b as r,c as n,d}from"./dashboard-CF_jRhAY.js";import{s as c,a as u,r as l,b as g,g as p}from"./focusModeHelpers-Cqkll3ju.js";import{S as b}from"./siteBlockerViewState-BRcSSYc9.js";import"./environmentVariables-Cy83xda0.js";import"./timestampDb-sTUCijT1.js";import"./Logger-Dqn8sDPg.js";import"./preload-helper-D7CfCCEq.js";import"./string-KTo4Qfpe.js";import"./main--IJuvtTE.js";import"./localStorage-B4mFdj8F.js";import"./migrateLegacyUserMessageHandler-CU6TUnqH.js";import"./reactiveCustomization-CrL2eTrh.js";import"./VueBase-CjPGMLuv.js";import"./index-CJJH83pl.js";const y=a("focusModeDash",{views:{[s.Idle]:{beforeLeave:async e=>{e===s.Transition.toString()?(m.widgetManager.hideApps({layer:"focusMode"}),m.modal.hidden=!0,await t.delay(o),c()):e===s.Focusing.toString()&&(m.modal.hidden=!0,m.widgetManager.hideApps({layer:"focusMode"}),c(),t.delay(o).then((async()=>{u(),await t.delay(100),m.modal.hidden=!1})))},defaultView:!0},[s.Transition]:{beforeLeave:()=>{t.delay(o).then((async()=>{u(),await t.delay(100),m.modal.hidden=!1}))}},[s.Focusing]:{beforeLeave:e=>{l(),m.modal.hidden=!0,t.delay(o).then((()=>{g(),e===s.Idle.toString()&&m.widgetManager.showApps({layer:"focusMode"})}))}},[s.Celebration]:{beforeLeave:()=>{t.delay(o).then((async()=>{m.widgetManager.showApps({layer:"focusMode"}),await t.delay(100),m.modal.hidden=!1}))}}}}),h=y(),w=i("focusMode",{views:{[r.Settings]:{defaultView:!0,order:1},[b.Groups]:{order:2},[b.Websites]:{order:3}},extend:(a,i)=>e(i,{state:()=>({backgroundScale:1,backgroundBlurLayerOpacity:0,backgroundTransitionDuration:0}),getters:{currentFocusModeView:()=>h.activeViewId,currentlyFocusing(){return this.currentFocusModeView===s.Focusing.toString()},backgroundBlurLayerVisible(){return this.currentFocusModeView!==s.Idle.toString()}},actions:{async startFocusMode(){a.popupActive=!1,await h.setActiveView(s.Transition),this.backgroundTransitionDuration=n,await t.doubleRaf(),this.setFocusingStyleVariables(),await t.delay(this.backgroundTransitionDuration),this.backgroundTransitionDuration=0},async celebrateFocusMode(){a.popupActive=!1,await h.setActiveView(s.Celebration);this.backgroundTransitionDuration=1500,await t.doubleRaf(),this.resetFocusingStyleVariables(),await t.delay(this.backgroundTransitionDuration),this.backgroundTransitionDuration=0,await t.delay(d-1500)},async stopFocusMode(){a.popupActive=!1,this.resetFocusingStyleVariables(),await h.setActiveView(s.Idle)},setFocusingStyleVariables(){this.backgroundScale=1.1;p().blurBackground&&(this.backgroundBlurLayerOpacity=1)},resetFocusingStyleVariables(){this.backgroundScale=1,this.backgroundBlurLayerOpacity=0},async resumeFocusModeAfterTabLoad(){await h.setActiveView(s.Focusing),await("visible"===document.visibilityState?t.doubleRaf():t.delay(0)),this.setFocusingStyleVariables()}}})});export{w as default,y as useFocusModeDashViewStateStore,w as useFocusModeViewStateStore};