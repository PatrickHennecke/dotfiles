import{B as t}from"./BaseDropdownText-JuRMaT4M.js";import{B as i}from"./BaseDropdownOption-CckvXbkm.js";import{L as s}from"./dashboard-CF_jRhAY.js";import{a as n}from"./allComponentsMounted-C3UsG_cA.js";import{B as e}from"./BaseDropdown-BAkdZe-R.js";import{F as o}from"./FavIcon-Cddzo7ot.js";import{n as a,p as r,u as l,b as p}from"./promisifiedChrome-CheD9WtZ.js";import{L as c}from"./links-DdeC1aoW.js";import{_ as d}from"./icon-lock-B0ekkj2F.js";import{_ as k}from"./icon-pin-BHeOuzvO.js";import{_ as u}from"./icon-edit-CixeXNYx.js";import{_ as h}from"./icon-trash-DFxJwJNo.js";const L=a({name:"LinksListItemIcon",components:{FavIcon:o},props:{linkGroup:{type:Object,default:null},iconSrc:{type:String,default:""}},computed:{topFourLinks(){return this.linkGroup.links.slice(0,4)}}},(function(){var t=this,i=t._self._c;return t.iconSrc?i("div",{staticClass:"link-favicon"},[i("inline-svg",{staticClass:"icon-favicon",attrs:{src:t.iconSrc}})],1):t.linkGroup.hasManyLinks?i("div",{staticClass:"link-favicon-grid"},t._l(t.topFourLinks,(function(t){return i("fav-icon",{key:t.id,staticClass:"link-favicon",attrs:{url:t.url}})})),1):i("fav-icon",{staticClass:"link-favicon",attrs:{url:t.linkGroup.links[0].url}})}),[],!1,null,"5878a8b9").exports;const f=a({name:"LinksListItem",components:{LinksListItemToastHeader:a({name:"LinksListItemToastHeader",components:{LinksListItemIcon:L},props:{linkGroup:{type:Object,required:!0}}},(function(){var t=this,i=t._self._c;return i("div",{staticClass:"links-list-item-toast-header"},[i("links-list-item-icon",{attrs:{"link-group":t.linkGroup}}),i("span",{staticClass:"link-title"},[t._v(t._s(t.linkGroup.title))])],1)}),[],!1,null,"2412573f").exports,LinksListItemIcon:L,BaseDropdown:e,BaseDropdownOption:i,BaseDropdownText:t},mixins:[n],inject:["viewStateStore","itemStore","capture","batchCapture"],props:{linkGroup:{type:Object,required:!0},isTile:{type:Boolean,default:!1},isOnDash:{type:Boolean,default:!1},isTeamLink:{type:Boolean,default:!1}},computed:{linkGroupTitle(){const t=new Set(this.linkGroup.links.map((t=>new URL(t.url).hostname)));return Array.from(t).join("\n")},isLegacyLink(){return this.linkGroup instanceof c}},methods:{openLinks(t){this.batchCapture((this.linkGroup.hasManyLinks?"tab group":"link")+" click",{is_paid_event:this.linkGroup.hasManyLinks});let i=m.models.bookmarksSettings.get("openInNewTab")||t.metaKey||"auxclick"===t.type;this.linkGroup.links.forEach((({url:t},s)=>{r.tabs.openUrl(t,i).then((t=>{t&&0===s&&l.isSafari()&&r.tabs.update(t.id,{active:!0})})),i=!0}))},async toggleLinkPinned(){this.closeLinkDropdown(),await this.itemStore.update(this.linkGroup.id,{pinned:!this.linkGroup.pinned})},async editLink(){if(this.closeLinkDropdown(),this.$admin&&this.isTeamLink){const t=await p.sendMessage({handler:"getSid",args:[this.linkGroup.id]});m.cmd("window.account.open.login","team/links?id="+t.substring(1))}else await this.viewStateStore.togglePopup(!0),this.itemStore.editItem(this.linkGroup.id),await this.viewStateStore.setActiveView(s.Form)},async deleteLink(){this.closeLinkDropdown(),await this.viewStateStore.togglePopup(!0),await this.viewStateStore.setConfirmation({title:"Are you sure you want to delete this link?"})&&(this.capture((this.linkGroup.hasManyLinks?"tab group":"link")+" delete",{is_paid_event:this.linkGroup.hasManyLinks}),await this.itemStore.deleteLinkGroup(this.linkGroup.id))},closeLinkDropdown(){var t;null==(t=this.$refs["link-dropdown"])||t.closeDropdown()}}},(function(){var t=this,i=t._self._c;return i("li",{class:["link-list-item",{tile:t.isTile,dash:t.isOnDash}],attrs:{"data-test":"list-item",title:t.linkGroupTitle},on:{click:t.openLinks,auxclick:t.openLinks}},[i("links-list-item-icon",{attrs:{"link-group":t.linkGroup}}),i("span",{staticClass:"link-title"},[t._v(t._s(t.linkGroup.title))]),t.isTeamLink&&!t.$admin?i("div",{staticClass:"link-dropdown lock-wrapper",attrs:{title:"Managed by Team","data-test":"list-item-lock"}},[i("inline-svg",{staticClass:"icon icon-lock",attrs:{src:d}})],1):i("base-dropdown",{ref:"link-dropdown",staticClass:"link-dropdown",attrs:{"container-class":t.isOnDash?"dash":"app","data-test":"list-item-dropdown",title:""},scopedSlots:t._u([{key:"toastHeader",fn:function(){return[i("links-list-item-toast-header",{attrs:{"link-group":t.linkGroup}})]},proxy:!0}])},[t.isTeamLink?i("base-dropdown-text",{attrs:{"is-title":!0,"data-test":"team-link-title"}},[t._v("Team Link")]):t._e(),t.isTeamLink||t.isLegacyLink?t._e():i("base-dropdown-option",{attrs:{"data-test":"pin-item"},on:{click:t.toggleLinkPinned}},[i("inline-svg",{staticClass:"icon icon-pin",attrs:{src:k}}),i("span",{staticClass:"text"},[t._v(" "+t._s(t.linkGroup.pinned?"Unpin":"Pin")+" ")])],1),!t.isLegacyLink||t.isTeamLink?i("base-dropdown-option",{attrs:{"data-test":"edit-item"},on:{click:t.editLink}},[i("inline-svg",{staticClass:"icon icon-edit",attrs:{src:u}}),i("span",{staticClass:"text"},[t._v("Edit")])],1):t._e(),t.isTeamLink?t._e():i("base-dropdown-option",{attrs:{"data-test":"delete-item"},on:{click:t.deleteLink}},[i("inline-svg",{staticClass:"icon icon-trash",attrs:{src:h}}),i("span",{staticClass:"text"},[t._v("Delete")])],1)],1)],1)}),[],!1,null,"7165b4ad").exports,w=Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"}));export{L,f as a,w as b};